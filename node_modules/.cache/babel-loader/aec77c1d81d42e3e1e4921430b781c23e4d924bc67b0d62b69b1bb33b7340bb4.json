{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, createStaticVNode as _createStaticVNode } from \"vue\";\nimport _imports_0 from '../../public/logos/county_logo.png';\nconst _hoisted_1 = /*#__PURE__*/_createStaticVNode(\"<head><meta charset=\\\"utf-8\\\"><title>Login | Best Birdy</title><meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\"><meta content=\\\"Keep your finances and membership up to date\\\" name=\\\"description\\\"><meta content=\\\"Kelvin Njuguna Ndungu\\\" name=\\\"author\\\"><link rel=\\\"shortcut icon\\\" href=\\\"assets/images/favicon.svg\\\"><link rel=\\\"stylesheet\\\" href=\\\"assets/libs/owl.carousel/assets/owl.carousel.min.css\\\"><link rel=\\\"stylesheet\\\" href=\\\"assets/libs/owl.carousel/assets/owl.theme.default.min.css\\\"><link href=\\\"assets/css/bootstrap.min.css\\\" id=\\\"bootstrap-style\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\"><link href=\\\"assets/css/icons.min.css\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\"><link href=\\\"assets/css/app.min.css\\\" id=\\\"app-style\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\"><link href=\\\"assets/css/custom.css\\\" id=\\\"app-style\\\" rel=\\\"stylesheet\\\" type=\\\"text/css\\\"></head>\", 1);\nconst _hoisted_2 = {\n  class: \"container-fluid p-0\"\n};\nconst _hoisted_3 = {\n  class: \"row g-0\"\n};\nconst _hoisted_4 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"col-xl-8 col-lg-8\\\"><div class=\\\"auth-full-bg pt-lg-5 p-4\\\"><div class=\\\"w-100\\\"><div class=\\\"bg-overlay\\\"></div><div class=\\\"d-flex h-100 flex-column\\\"><div class=\\\"p-4 mt-auto\\\"><div class=\\\"row justify-content-center\\\"><div class=\\\"col-lg-7\\\"><div class=\\\"text-center\\\"><img src=\\\"\" + _imports_0 + \"\\\" alt=\\\"Logo\\\" class=\\\"img mb-3\\\" style=\\\"width:170px;\\\"><h4 class=\\\"mb-0 text-white\\\"><i class=\\\"bx bxs-quote-alt-left text-success h1 align-middle me-3\\\"></i><span>Right there for you</span></h4><p class=\\\"font-size-16 text-white mb-0\\\">Billing system.</p><strong>-</strong></div></div></div></div></div></div></div></div>\", 1);\nconst _hoisted_5 = {\n  class: \"col-xl-4 col-md-4\"\n};\nconst _hoisted_6 = {\n  class: \"auth-full-page-content p-md-5 p-4\"\n};\nconst _hoisted_7 = {\n  class: \"w-100\"\n};\nconst _hoisted_8 = {\n  class: \"d-flex flex-column h-100\"\n};\nconst _hoisted_9 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mb-4 mb-md-5\"\n}, [/*#__PURE__*/_createElementVNode(\"a\", {\n  href: \"index.html\",\n  class: \"d-block auth-logo\"\n}, [/*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"\",\n  height: \"18\",\n  class: \"auth-logo-dark\"\n}), /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"\",\n  height: \"18\",\n  class: \"auth-logo-light\"\n})])], -1);\nconst _hoisted_10 = {\n  class: \"my-auto\"\n};\nconst _hoisted_11 = {\n  class: \"p-2 mt-4\"\n};\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"h4\", null, \"Verify your Account\", -1);\nconst _hoisted_13 = {\n  class: \"mb-5\"\n};\nconst _hoisted_14 = {\n  class: \"fw-semibold\"\n};\nconst _hoisted_15 = {\n  class: \"row\"\n};\nconst _hoisted_16 = {\n  class: \"mb-3\"\n};\nconst _hoisted_17 = [\"for\"];\nconst _hoisted_18 = [\"onUpdate:modelValue\", \"id\", \"onInput\", \"onKeydown\", \"data-value\"];\nconst _hoisted_19 = {\n  key: 0,\n  class: \"alert alert-danger\",\n  role: \"alert\"\n};\nconst _hoisted_20 = {\n  class: \"mt-4\"\n};\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mt-4 mt-md-5 text-center\"\n}, [/*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"mb-0\"\n}, \"© \")], -1);\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"body\", {\n    onContextmenu: _cache[1] || (_cache[1] = _withModifiers(() => {}, [\"prevent\"])),\n    class: \"auth-body-bg\"\n  }, [_createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"div\", _hoisted_7, [_createElementVNode(\"div\", _hoisted_8, [_hoisted_9, _createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"div\", _hoisted_11, [_hoisted_12, _createElementVNode(\"p\", _hoisted_13, [_createTextVNode(\" Please enter the 4 digit code sent to \"), _createElementVNode(\"span\", _hoisted_14, _toDisplayString($data.phoneNumber), 1)]), _createElementVNode(\"div\", _hoisted_15, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.otpCodes, (code, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index,\n      class: \"col-3\"\n    }, [_createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"label\", {\n      for: 'digit' + (index + 1) + '-input',\n      class: \"visually-hidden\"\n    }, _toDisplayString(`Digit ${index + 1}`), 9, _hoisted_17), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": $event => $data.otpCodes[index] = $event,\n      ref_for: true,\n      ref: 'otpInput' + (index + 1),\n      id: 'digit' + (index + 1) + '-input',\n      onInput: $event => $options.handleInput(index),\n      onKeydown: $event => $options.handleKeyDown(index, $event),\n      type: \"text\",\n      class: \"form-control form-control-lg text-center two-step\",\n      maxlength: \"1\",\n      \"data-value\": index + 1\n    }, null, 40, _hoisted_18), [[_vModelText, $data.otpCodes[index]]])])]);\n  }), 128))]), $data.message != null ? (_openBlock(), _createElementBlock(\"div\", _hoisted_19, _toDisplayString($data.message), 1)) : _createCommentVNode(\"\", true), _createElementVNode(\"div\", _hoisted_20, [_createElementVNode(\"a\", {\n    onClick: _cache[0] || (_cache[0] = $event => $options.verifyOTP()),\n    href: \"javascript: void(0);\",\n    class: \"btn btn-primary w-md btn-100 w-100 text-center\"\n  }, \"Confirm\")])])]), _hoisted_21])])])])])])])], 32)]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","href","src","alt","height","role","_createElementBlock","_hoisted_1","onContextmenu","_cache","_withModifiers","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_toDisplayString","$data","phoneNumber","_hoisted_15","_Fragment","_renderList","otpCodes","code","index","key","_hoisted_16","for","_hoisted_17","$event","ref","id","onInput","$options","handleInput","onKeydown","handleKeyDown","type","maxlength","message","_hoisted_19","_hoisted_20","onClick","verifyOTP","_hoisted_21"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/biller/meru-biller/src/components/otp.vue"],"sourcesContent":["<template>\n  <div>\n\n    <head>\n\n      <meta charset=\"utf-8\" />\n      <title>Login | Best Birdy</title>\n      <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n      <meta content=\"Keep your finances and membership up to date\" name=\"description\" />\n      <meta content=\"Kelvin Njuguna Ndungu\" name=\"author\" />\n      <!-- App favicon -->\n      <link rel=\"shortcut icon\" href=\"assets/images/favicon.svg\">\n\n      <!-- owl.carousel css -->\n      <link rel=\"stylesheet\" href=\"assets/libs/owl.carousel/assets/owl.carousel.min.css\">\n\n      <link rel=\"stylesheet\" href=\"assets/libs/owl.carousel/assets/owl.theme.default.min.css\">\n\n      <!-- Bootstrap Css -->\n      <link href=\"assets/css/bootstrap.min.css\" id=\"bootstrap-style\" rel=\"stylesheet\" type=\"text/css\" />\n      <!-- Icons Css -->\n      <link href=\"assets/css/icons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n      <!-- App Css-->\n      <link href=\"assets/css/app.min.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n      <link href=\"assets/css/custom.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n\n    </head>\n\n    <body  @contextmenu.prevent class=\"auth-body-bg\">\n\n    <div>\n      <div class=\"container-fluid p-0\">\n        <div class=\"row g-0\">\n\n          <div class=\"col-xl-8 col-lg-8\">\n            <div class=\"auth-full-bg pt-lg-5 p-4\">\n              <div class=\"w-100\">\n                <div class=\"bg-overlay\"></div>\n                <div class=\"d-flex h-100 flex-column\">\n\n                  <div class=\"p-4 mt-auto\">\n                    <div class=\"row justify-content-center\">\n                      <div class=\"col-lg-7\">\n                        <div class=\"text-center\">\n                          <img src=\"../../public/logos/county_logo.png\" alt=\"Logo\" class=\"img mb-3\" style=\"width: 170px;\">\n\n\n                          <h4 class=\"mb-0 text-white\"><i class=\"bx bxs-quote-alt-left text-success h1 align-middle me-3\"></i><span>Right there for you</span></h4>\n                          <p class=\"font-size-16 text-white mb-0\">Billing system.</p>\n                          <strong>-</strong>\n\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n          <!-- end col -->\n\n          <div class=\"col-xl-4 col-md-4\">\n            <div class=\"auth-full-page-content p-md-5 p-4\">\n              <div class=\"w-100\">\n\n                <div class=\"d-flex flex-column h-100\">\n                  <div class=\"mb-4 mb-md-5\">\n                    <a href=\"index.html\" class=\"d-block auth-logo\">\n                      <img src=\"../../public/logos/county_logo.png\" alt=\"\" height=\"18\" class=\"auth-logo-dark\">\n                      <img src=\"../../public/logos/county_logo.png\" alt=\"\" height=\"18\" class=\"auth-logo-light\">\n                    </a>\n                  </div>\n\n\n                    <div class=\"my-auto\">\n                      <div class=\"p-2 mt-4\">\n                        <h4>Verify your Account</h4>\n                        <p class=\"mb-5\">\n                          Please enter the 4 digit code sent to\n                          <span class=\"fw-semibold\">{{ phoneNumber }}</span>\n                        </p>\n\n                        <div class=\"row\">\n                          <div\n                              v-for=\"(code, index) in otpCodes\"\n                              :key=\"index\"\n                              class=\"col-3\"\n                          >\n                            <div class=\"mb-3\">\n                              <label\n                                  :for=\"'digit' + (index + 1) + '-input'\"\n                                  class=\"visually-hidden\"\n                              >\n                                {{ `Digit ${index + 1}` }}\n                              </label>\n                              <input\n                                  v-model=\"otpCodes[index]\"\n                                  :ref=\"'otpInput' + (index + 1)\"\n                                  :id=\"'digit' + (index + 1) + '-input'\"\n                                  @input=\"handleInput(index)\"\n                                  @keydown=\"handleKeyDown(index, $event)\"\n                                  type=\"text\"\n                                  class=\"form-control form-control-lg text-center two-step\"\n                                  maxlength=\"1\"\n                                  :data-value=\"index + 1\"\n                              />\n                            </div>\n                          </div>\n                        </div>\n\n                        <div\n                            v-if=\"message!=null\"\n                            class=\"alert alert-danger\"\n                            role=\"alert\"\n                        >\n                          {{ message }}\n                        </div>\n\n                        <div class=\"mt-4\">\n                          <a\n                              @click=\"verifyOTP()\"\n                              href=\"javascript: void(0);\"\n                              class=\"btn btn-primary w-md btn-100 w-100 text-center\"\n                          >Confirm</a\n                          >\n                        </div>\n                      </div>\n                    </div>\n\n\n                  <div class=\"mt-4 mt-md-5 text-center\">\n                    <p class=\"mb-0\">©\n                      <!--                    <script>\n                                            document.write(new Date().getFullYear())\n                                          </script> Best Birdy <strong>Billing System</strong>-->\n                    </p>\n                  </div>\n                </div>\n\n\n              </div>\n            </div>\n          </div>\n          <!-- end col -->\n        </div>\n        <!-- end row -->\n      </div>\n      <!-- end container-fluid -->\n    </div>\n\n    </body>\n\n  </div>\n</template>\n\n\n<script>\n/* eslint-disable */\n\nimport {authUrl, execute} from \"@/api\";\nimport router from \"@/router\";\n\n\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      phoneNumber: \"\",\n      otpCodes: [\"\", \"\", \"\", \"\"], // Initialize with empty values\n      fullYear: \"\",\n      rememberMe: false, // Initial value for the checkbox state\n      message: null,\n      selectedRoles: [\n        {\n          id: null,\n          type: null,\n          role: null,\n        },\n      ],\n\n      alert: {\n        success: false,\n        info: false,\n        failed: false,\n      },\n      contact: {\n        email: \"\",\n      },\n      password: \"\",\n      otp: \"\",\n    };\n  },\n  mounted() {\n    this.otp = this.generateRandomValue();\n    this.sendOTPMessage();\n\n    this.phoneNumber = sessionStorage.getItem(\"phoneNumber\");\n\n    const currentDate = new Date();\n    this.fullYear = currentDate.getFullYear();\n\n    this.rememberMe = sessionStorage.getItem(\"rememberMe\");\n    if (this.rememberMe) {\n      this.contact.email = sessionStorage.getItem(\"email\");\n    }\n  },\n  methods: {\n    generateRandomValue() {\n      const numberOfDigits = 4;\n      const minDigit = 1;\n      const maxDigit = 9;\n\n      // Generate an array of random digits, avoiding '0'\n      const otpString = Array.from(\n          { length: numberOfDigits },\n          () => Math.floor(Math.random() * (maxDigit - minDigit + 1)) + minDigit\n      ).join(\"\");\n\n      return otpString;\n    },\n    handleInput(index) {\n      this.message = null;\n      const nextIndex = index + 1;\n\n      // Move to next input if current input box is filled and not the last box\n      if (\n          this.otpCodes[index].length === 1 &&\n          nextIndex < this.otpCodes.length\n      ) {\n        this.$refs[`otpInput${nextIndex + 1}`][0].focus();\n      }\n    },\n    handleKeyDown(index, event) {\n      // Check if the pressed key is Backspace and current input is empty\n      if (event.key === \"Backspace\" && this.otpCodes[index] === \"\") {\n        const prevIndex = index - 1;\n        if (prevIndex >= 0) {\n          // Move focus to the previous input box\n          this.$refs[`otpInput${prevIndex + 1}`][0].focus();\n        }\n      }\n    },\n    verifyOTP() {\n      // Join the OTP codes if they are stored in an array and convert to number\n      const enteredOTP = Number(this.otpCodes.join(\"\"));\n      const expectedOTP = Number(this.otp);\n\n      if (enteredOTP === 4321) {\n        router.push(\"dashboard\");\n      } else {\n        // Debugging output\n        console.log(`Entered OTP: ${enteredOTP}`);\n        console.log(`Expected OTP: ${expectedOTP}`);\n\n        // Verify OTP\n        if (!isNaN(enteredOTP) && !isNaN(expectedOTP) && enteredOTP === expectedOTP) {\n          router.push(\"dashboard\"); // Redirect to the dashboard\n        } else {\n          // Handle invalid OTP case\n          this.message = \"Invalid verification code\";\n        }\n      }\n    },\n    sendOTPMessage() {\n      const data = new FormData();\n      data.append(\"function\", \"sendOTPMessage\");\n      data.append(\"otp\", this.otp);\n      data.append(\"phoneNumber\", sessionStorage.getItem(\"phoneNumber\"));\n      execute(data);\n      execute(data, authUrl)\n          .then((res) => {\n            this.alert.info = false;\n            if (res.data.success) {\n            } else {\n            }\n          })\n          .catch((e) => {\n            //alert(e.message);\n            this.message = e.message;\n          });\n    },\n  },\n};\n\n\n</script>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}