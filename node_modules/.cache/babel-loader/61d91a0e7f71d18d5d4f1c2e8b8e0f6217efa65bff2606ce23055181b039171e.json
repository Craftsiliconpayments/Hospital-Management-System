{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable */\n\nimport { authUrl, execute } from \"@/api\";\nimport router from \"@/router\";\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      phoneNumber: '',\n      otpCodes: ['', '', '', ''],\n      // Initialize with empty values\n      fullYear: '',\n      rememberMe: false,\n      // Initial value for the checkbox state\n      message: null,\n      selectedRoles: [{\n        id: null,\n        type: null,\n        role: null\n      }],\n      alert: {\n        success: false,\n        info: false,\n        failed: false\n      },\n      contact: {\n        email: ''\n      },\n      password: '',\n      otp: ''\n    };\n  },\n  mounted() {\n    this.otp = this.generateRandomValue();\n    this.sendOTPMessage();\n    this.phoneNumber = sessionStorage.getItem(\"phoneNumber\");\n    const currentDate = new Date();\n    this.fullYear = currentDate.getFullYear();\n    this.rememberMe = sessionStorage.getItem(\"rememberMe\");\n    if (this.rememberMe) {\n      this.contact.email = sessionStorage.getItem(\"email\");\n    }\n  },\n  methods: {\n    generateRandomValue() {\n      const min = 0;\n      const max = 9; // You can adjust the range based on your requirements\n      const numberOfDigits = 4;\n\n      // Generate four random digits and concatenate them into a single number\n      const generatedDigits = Array.from({\n        length: numberOfDigits\n      }, () => Math.floor(Math.random() * (max - min + 1)) + min);\n      return parseInt(generatedDigits.join(''), 10);\n    },\n    handleInput(index) {\n      this.message = null;\n      const nextIndex = index + 1;\n      if (nextIndex < this.otpCodes.length) {\n        this.$refs[`otpInput${nextIndex}`][0].focus();\n      } else {\n        // All digits entered, you can trigger verification here if needed\n      }\n    },\n    verifyOTP() {\n      // Implement your logic to verify the OTP code\n      const enteredOTP = this.otpCodes.join('');\n      if (enteredOTP == this.otp) {\n        router.push('dashboard');\n      } else {\n        this.message = \"Invalid verification code\";\n      }\n    },\n    sendOTPMessage() {\n      const data = new FormData();\n      data.append(\"function\", \"sendOTPMessage\");\n      data.append(\"otp\", this.otp);\n      data.append(\"phoneNumber\", sessionStorage.getItem(\"phoneNumber\"));\n      execute(data);\n      execute(data, authUrl).then(res => {\n        this.alert.info = false;\n        if (res.data.success) {} else {}\n      }).catch(e => {\n        //alert(e.message);\n        this.message = e.message;\n      });\n    }\n  }\n};","map":{"version":3,"names":["authUrl","execute","router","name","data","phoneNumber","otpCodes","fullYear","rememberMe","message","selectedRoles","id","type","role","alert","success","info","failed","contact","email","password","otp","mounted","generateRandomValue","sendOTPMessage","sessionStorage","getItem","currentDate","Date","getFullYear","methods","min","max","numberOfDigits","generatedDigits","Array","from","length","Math","floor","random","parseInt","join","handleInput","index","nextIndex","$refs","focus","verifyOTP","enteredOTP","push","FormData","append","then","res","catch","e"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/biller/meru-biller/src/components/otp.vue"],"sourcesContent":["<template>\n\n  <!-- Mirrored from themesbrand.com/skote-django/layouts/auth-login.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 16 Feb 2023 20:27:00 GMT -->\n  <head>\n\n    <meta charset=\"utf-8\" />\n    <title>Login | Skote - Admin & Dashboard Template</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta content=\"Premium Multipurpose Admin & Dashboard Template\" name=\"description\" />\n    <meta content=\"Themesbrand\" name=\"author\" />\n    <!-- App favicon -->\n    <link rel=\"shortcut icon\" href=\"assets/images/favicon.ico\">\n\n    <!-- Bootstrap Css -->\n    <link href=\"assets/css/bootstrap.min.css\" id=\"bootstrap-style\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- Icons Css -->\n    <link href=\"assets/css/icons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- App Css-->\n    <link href=\"assets/css/app.min.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n    <link href=\"assets/css/custom.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n\n  </head>\n\n  <body @contextmenu.prevent>\n  <div class=\"account-pages   pt-sm-5 single-login-page d-flex justify-content-center align-items-center\">\n    <div class=\"container\">\n      <div class=\"row justify-content-center\">\n        <div class=\"col-md-8 col-lg-6 col-xl-5\">\n          <div class=\"card overflow-hidden\">\n            <div class=\" bg-backgroung-pri\">\n              <div class=\"row\">\n                <div class=\"col-8 z-index-3\">\n                  <div class=\"text-primary p-4\">\n                    <h5 class=\"text-primary fw-bold text-uppercase text-white\">OTP</h5>\n                    <p class=\"text-white\">Enter the 4 digit code sent to your phone to login</p>\n                  </div>\n                </div>\n                <div class=\"col-5 align-self-end d-none\">\n                  <img src=\"assets/images/profile-img.png\" alt=\"\" class=\"img-fluid\">\n                </div>\n              </div>\n            </div>\n            <div class=\"card-body pt-0\">\n              <div class=\"auth-logo\">\n                <a href=\"index.html\" class=\"auth-logo-light\">\n                  <div class=\"avatar-md profile-user-wid mb-4\">\n                                            <span class=\"avatar-title rounded-circle bg-light\">\n                                                <img src=\"assets/images/logo-light.svg\" alt=\"\" class=\"rounded-circle\" height=\"34\">\n                                            </span>\n                  </div>\n                </a>\n\n                <a href=\"index.html\" class=\"auth-logo-dark\">\n                  <div class=\"avatar-md profile-user-wid mb-4\">\n                                            <span class=\"avatar-title rounded-circle bg-light\">\n                                                <img src=\"assets/images/logo.svg\" alt=\"\" class=\"rounded-circle\" height=\"34\">\n                                            </span>\n                  </div>\n                </a>\n              </div>\n              <div class=\"p-2 mt-4\">\n\n                <h4>Verify your Account</h4>\n                <p class=\"mb-5\">Please enter the 4 digit code sent to <span class=\"fw-semibold\">{{phoneNumber}}</span></p>\n\n                  <div class=\"row\">\n                    <div v-for=\"(code, index) in otpCodes\" :key=\"index\" class=\"col-3\">\n                      <div class=\"mb-3\">\n                        <label :for=\"'digit' + (index + 1) + '-input'\" class=\"visually-hidden\">{{ `Digit ${index + 1}` }}</label>\n                        <input\n                            v-model=\"otpCodes[index]\"\n                            :ref=\"'otpInput' + (index + 1)\"\n                            :id=\"'digit' + (index + 1) + '-input'\"\n                            @input=\"handleInput(index)\"\n                            type=\"text\"\n                            class=\"form-control form-control-lg text-center two-step\"\n                            maxlength=\"1\"\n                            :data-value=\"index + 1\"\n                        >\n                      </div>\n                    </div>\n                  </div>\n\n                <div v-if=\"message!=null\" class=\"alert alert-danger\" role=\"alert\">\n                  {{message}}\n                </div>\n\n\n                <div class=\"mt-4\">\n                  <a @click=\"verifyOTP()\" href=\"javascript: void(0);\" class=\"btn  btn-primary w-md btn-100 w-100 text-center\">Confirm</a>\n                </div>\n              </div>\n\n\n            </div>\n          </div>\n          <div class=\"mt-5 text-center\">\n\n            <div>\n\n              <p class=\"text-white\">Â©{{fullYear}}County Billing System <i class=\"mdi mdi-heart text-danger\"></i>  </p>\n            </div>\n          </div>\n\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- end account-pages -->\n\n  </body>\n\n\n</template>\n\n\n<script>\n/* eslint-disable */\n\nimport {authUrl, execute} from \"@/api\";\nimport router from \"@/router\";\n\n\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return{\n      phoneNumber:'',\n      otpCodes: ['', '', '', ''], // Initialize with empty values\n      fullYear:'',\n      rememberMe: false, // Initial value for the checkbox state\n      message:null,\n      selectedRoles: [\n        {\n          id:null,\n          type:null,\n          role:null\n        }\n      ],\n\n      alert:{\n        success: false,\n        info: false,\n        failed:false\n      },\n      contact: {\n        email: ''\n      },\n      password:'',\n      otp:''\n    }\n  },\n  mounted() {\n\n    this.otp = this.generateRandomValue()\n    this.sendOTPMessage()\n\n     this.phoneNumber =  sessionStorage.getItem(\"phoneNumber\")\n\n    const currentDate = new Date();\n    this.fullYear= currentDate.getFullYear();\n\n    this.rememberMe = sessionStorage.getItem(\"rememberMe\")\n    if(this.rememberMe){\n      this.contact.email = sessionStorage.getItem(\"email\")\n    }\n\n  },\n  methods: {\n    generateRandomValue() {\n      const min = 0;\n      const max = 9; // You can adjust the range based on your requirements\n      const numberOfDigits = 4;\n\n      // Generate four random digits and concatenate them into a single number\n      const generatedDigits = Array.from({ length: numberOfDigits }, () => Math.floor(Math.random() * (max - min + 1)) + min);\n      return parseInt(generatedDigits.join(''), 10);\n    },\n    handleInput(index) {\n      this.message =null\n      const nextIndex = index + 1;\n      if (nextIndex < this.otpCodes.length) {\n        this.$refs[`otpInput${nextIndex}`][0].focus();\n      } else {\n        // All digits entered, you can trigger verification here if needed\n\n      }\n    },\n    verifyOTP() {\n      // Implement your logic to verify the OTP code\n      const enteredOTP = this.otpCodes.join('');\n\n      if(enteredOTP == this.otp){\n        router.push('dashboard')\n      }else {\n        this.message =\"Invalid verification code\"\n      }\n    },\n    sendOTPMessage(){\n      const data = new FormData();\n      data.append(\"function\", \"sendOTPMessage\");\n      data.append(\"otp\",this.otp);\n      data.append(\"phoneNumber\",sessionStorage.getItem(\"phoneNumber\"));\n      execute(data,)\n      execute(data,authUrl)\n          .then((res) =>{\n            this.alert.info = false\n            if (res.data.success) {\n\n            }\n            else{\n\n            }\n          })\n          .catch((e) => {\n            //alert(e.message);\n            this.message =e.message\n          });\n    },\n  },\n\n}\n\n</script>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}