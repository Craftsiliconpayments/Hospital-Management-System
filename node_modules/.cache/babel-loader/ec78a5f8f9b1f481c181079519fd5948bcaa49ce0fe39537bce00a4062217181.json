{"ast":null,"code":"import { execute, biller } from \"@/api\";\nimport dayjs from 'dayjs';\nexport default {\n  name: \"PrintBill\",\n  data() {\n    return {\n      sessionNames: \"\",\n      date: null,\n      link: '',\n      county: {\n        id: null,\n        countyID: null,\n        countyName: null,\n        tagline: null,\n        smsusername: null,\n        smspassword: null,\n        contact: null,\n        center: null,\n        address: null,\n        email: null,\n        headline: null,\n        tagline2: null,\n        ussd: null,\n        logo: null,\n        bank: null,\n        powered: null,\n        stateLogo: null,\n        QRLink: null,\n        poweredByLogo: null\n      },\n      customer: {\n        id: 1,\n        names: null,\n        phoneNumber: null,\n        email: null,\n        createdBy: null,\n        dateCreated: null\n      },\n      bank: {\n        id: null,\n        bankID: null,\n        bank: null,\n        payBill: null\n      },\n      payBill: {\n        id: null,\n        stream: null,\n        shortCode: null\n      },\n      billDetails: {\n        id: null,\n        billNo: null,\n        incomeTypeID: null,\n        incomeTypeDescription: null,\n        costCenterNo: null,\n        accountNo: null,\n        description: null,\n        feeID: null,\n        feeDescription: null,\n        detailAmount: null,\n        receiptAmount: null,\n        billBalance: null,\n        wardID: null,\n        subCountyID: null,\n        subCountyName: null,\n        wardName: null,\n        status: null,\n        dateCreated: null,\n        zone: null,\n        departmentID: null,\n        department: null,\n        idNo: null,\n        phoneNumber: null,\n        names: null,\n        customerPhoneNumber: null,\n        category: null,\n        incomeTypePrefix: null\n      },\n      billInfo: [{\n        id: null,\n        billNo: null,\n        feeID: null,\n        feeDescription: null,\n        fiscalYear: null,\n        paymentCode: null,\n        customer: null,\n        description: null,\n        periodID: null,\n        wardID: null,\n        subCountyID: null,\n        subCountyName: null,\n        wardName: null,\n        createdBy: null,\n        billTotal: null,\n        receiptAmount: null,\n        billBalance: null,\n        status: null,\n        dateCreated: null,\n        zone: null,\n        departmentID: null,\n        department: null,\n        idNo: null,\n        phoneNumber: null,\n        names: null,\n        customerPhoneNumber: null,\n        category: null,\n        incomeTypePrefix: null\n      }],\n      upn: '',\n      blockNo: '',\n      plotNumber: '',\n      name: '',\n      address: ''\n    };\n  },\n  mounted() {\n    // Get the hash from the URL\n    const hash = window.location.hash;\n    const numberFromURL = hash.split('/')[3];\n\n    // If number is passed in the URL\n    if (numberFromURL) {\n      console.log('Number from URL:', numberFromURL);\n      this.getBill(numberFromURL);\n    } else {\n      // Number is not passed in the URL, check localStorage\n      this.sessionNames = sessionStorage.getItem(\"sessionNames\");\n      let params = {};\n      try {\n        params = JSON.parse(localStorage['params']);\n        console.log('####' + params.billNo);\n        this.getBill(params.billNo);\n      } catch (error) {\n        // ignore\n      }\n    }\n    this.menuAccess();\n  },\n  methods: {\n    getYear(dateCreated) {\n      const date = new Date(dateCreated);\n      return date.getFullYear();\n    },\n    menuAccess() {\n      const data = new FormData();\n      data.append(\"function\", \"menuAccess\");\n      data.append(\"menu\", \"Bills\");\n      data.append(\"sessionNames\", sessionStorage.getItem(\"sessionNames\"));\n      data.append(\"sessionIdNo\", sessionStorage.getItem(\"sessionIdNo\"));\n      execute(data, biller).then(() => {\n        // alert(res.data.message);\n      }).catch(() => {\n        // alert(e.message);\n      });\n    },\n    getCurrentDateTime() {\n      // Create a new Date object with the current date and time\n      const now = new Date();\n      // Format the date and time as DD MMM YYYY hh:mm:ss\n      const formattedDateTime = now.toLocaleString('en-US', {\n        day: 'numeric',\n        month: 'short',\n        year: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: false\n      });\n      // Return the formatted date and time\n      return formattedDateTime;\n    },\n    numberFormat(num) {\n      const britishNumberFormatter = new Intl.NumberFormat(\"en-GB\");\n      return britishNumberFormatter.format(num);\n    },\n    formatDate(dateString) {\n      // Parse the date string with the original format\n      const date = dayjs(dateString, 'YYYY-MM-DD HH:mm:ss');\n      // Format the date with the desired format\n      return date.format('DD MMM YYYY [AT] hh:mm A');\n    },\n    showDate() {\n      const dateObj = new Date();\n      const currentDate = dateObj.getDate() + \"/\" + dateObj.getMonth() + \"/\" + dateObj.getFullYear();\n      return currentDate;\n    },\n    formatPrice(value) {\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    getBill(billNo) {\n      const data = new FormData();\n      data.append(\"function\", \"getBill\");\n      data.append(\"billNo\", billNo);\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.county = res.data.data.county;\n          this.payBill = res.data.data.payBill;\n          if (res.data.data.customer !== null) this.customer = res.data.data.customer;\n          this.billDetails = res.data.data.billDetails;\n          this.billInfo = res.data.data.billInfo;\n          this.bank = res.data.data.bank;\n\n          // eslint-disable-next-line\n          const regex = /UPN NO\\.\\:\\s*(.*?)\\s*\\|\\s*Block No\\.\\s*:\\s*(.*?)\\s*\\|\\s*Plot No\\.\\:\\s*(.*?)\\s*\\|\\s*Address\\.\\:\\s*(.*?)\\s*\\|\\s*Name\\.\\:\\s*(.*?)(?:\\s*\\|.*|$)/;\n          const match = this.billDetails.description.match(regex);\n          //UPN NO.: undefined | Block No. :  | Plot No.: KISUMU/MUNICIPALITY/BLOC 4/300 | Address.: BLOCK 4\n          if (match) {\n            this.upn = match[1].trim() !== 'undefined' && match[1].trim() !== '' ? match[1].trim() : 'Not Provided';\n            this.blockNo = match[2].trim() || 'Not Provided';\n            this.plotNumber = match[3].trim() || 'Not Provided';\n            this.address = match[4].trim() || 'Not Provided';\n            this.name = match[5].trim() || 'Not Provided';\n          } else {\n            // Handle the case where the string doesn't match the pattern\n            this.upn = 'Not Provided';\n            this.blockNo = 'Not Provided';\n            this.plotNumber = 'Not Provided';\n            this.address = 'Not Provided';\n            this.name = 'Not Provided';\n          }\n          this.link = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=PaybillNo: ${this.bank.payBill} | AccNo: ${this.billDetails.billNo} | Amount: ${this.billDetails.billBalance} `;\n\n          /*     this.link = \"https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=BillNo: \"+this.billDetails.billNo+\" |\\n \"\n                   +this.customer.names+\" | Date: \"+ this.billDetails.dateCreated+\" | Amount:\"+this.billDetails.detailAmount;\n               */\n        } else {\n          alert(res.data.data.message);\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    }\n  }\n};","map":{"version":3,"names":["execute","biller","dayjs","name","data","sessionNames","date","link","county","id","countyID","countyName","tagline","smsusername","smspassword","contact","center","address","email","headline","tagline2","ussd","logo","bank","powered","stateLogo","QRLink","poweredByLogo","customer","names","phoneNumber","createdBy","dateCreated","bankID","payBill","stream","shortCode","billDetails","billNo","incomeTypeID","incomeTypeDescription","costCenterNo","accountNo","description","feeID","feeDescription","detailAmount","receiptAmount","billBalance","wardID","subCountyID","subCountyName","wardName","status","zone","departmentID","department","idNo","customerPhoneNumber","category","incomeTypePrefix","billInfo","fiscalYear","paymentCode","periodID","billTotal","upn","blockNo","plotNumber","mounted","hash","window","location","numberFromURL","split","console","log","getBill","sessionStorage","getItem","params","JSON","parse","localStorage","error","menuAccess","methods","getYear","Date","getFullYear","FormData","append","then","catch","getCurrentDateTime","now","formattedDateTime","toLocaleString","day","month","year","hour","minute","second","hour12","numberFormat","num","britishNumberFormatter","Intl","NumberFormat","format","formatDate","dateString","showDate","dateObj","currentDate","getDate","getMonth","formatPrice","value","val","toFixed","replace","toString","res","success","regex","match","trim","alert","message","e"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/HMIS/hospital-management/public/PrintDocs/notice/DemandNotice.vue"],"sourcesContent":["<template>\n\n\n  <head>\n    <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>County Bill</title>\n    <link rel=\"shortcut icon\" href=\"images/favicon.png\" type=\"image/x-icon\">\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\" rel=\"stylesheet\">\n    <link rel=\"preconnect\" href=\"https://fonts.googleapis.com\">\n    <link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin>\n    <link href=\"https://fonts.googleapis.com/css2?family=Yellowtail&display=swap\" rel=\"stylesheet\">\n\n\n  </head>\n\n  <body @contextmenu.prevent style=\"padding: 0px; margin: 0px; font-family: 'Montserrat', sans-serif; background-color: #a2a2a21c;box-sizing: border-box;\">\n\n  <button class=\"print-btn\" onclick=\"window.print()\"><img src=\"assets/printer.svg\" alt=\"Printer Icon\"></button>\n\n  <button class=\"print-btn email-doc\" title=\"send On Email\"><img src=\"assets/email-icon.png\" alt=\"Printer Icon \"></button>\n\n\n  <page class=\"page\" style=\"width: 210mm; height:297mm; display: flex; position: relative; flex-flow: column; background-color: white;\">\n    <!-- main content -->\n    <div style=\"padding: 8.5mm;\">\n\n      <header style=\"display: flex; height: 47mm; align-items: center; position: relative; width: 100%; justify-content: space-between;\">\n        <div>\n          <img :src=\"county.stateLogo\" style=\"height: 36mm; margin-right: 0mm;\">\n        </div>\n        <div style=\"text-align: center; margin-right: 8.5mm; margin-left: 8.5mm;\">\n          <h2 style=\"\n                        margin-top: 0px;\n                        font-size: 26px;\n                        text-transform: uppercase;\n                        color: #4ca82c;\n                        font-weight: 700;\n                        margin-bottom: 1.2mm;\n                        padding-bottom: 0px;\n\n                    \">\n            County Government <br> {{county.countyName}}\n          </h2>\n\n          <h4 style=\"padding: 0px;\n                    margin: 0px;\n                    font-size: 18px;\n                    font-weight: bold; text-transform: uppercase; margin-bottom: 0;\">\n            Demand Notice\n          </h4>\n\n          <h4 style=\"padding: 0px;\n                    margin: 0px;\n                    font-size: 13px;\n                    font-weight: 400; font-style: italic; font-family: 'Times New Roman', Times, serif; margin-top: 0mm; margin-bottom: 4.5mm;\">\n            <span style=\"font-style: italic; font-family: 'Times New Roman', Times, serif; margin-right: 3mm;\">The Rating Act (CAP 267)</span>\n\n          </h4>\n\n          <h4 style=\"padding: 0px;\n                    margin: 0px;\n                    font-size: 14px;\n                    font-weight: 400;\">\n            {{county.address}} <br>\n            Email: {{county.email}}\n          </h4>\n\n          <h4 style=\"padding: 0px;\n                    margin: 0px;\n                    font-size: 13px;\n                    font-weight: 400; font-style: italic; font-family: 'Times New Roman', Times, serif; margin-top: 2mm;\">\n            <span style=\"font-style: italic; font-family: 'Times New Roman', Times, serif; margin-right: 3mm;\">{{county.tagline}}</span>\n            <span style=\"font-style: italic; font-family: 'Times New Roman', Times, serif;\">#{{county.tagline2}}</span>\n          </h4>\n\n        </div>\n        <div>\n          <img :src=\"county.logo\" style=\"height: 36mm; margin-right: 0mm;\">\n        </div>\n\n      </header>\n      <div>\n        <img src=\"./assets/red-line.png\" style=\"width: 100%;\">\n      </div>\n\n      <!-- contact information and QR code -->\n\n      <!-- the table -->\n      <div style=\"display: flex; justify-content: space-between;\">\n\n        <!-- contact information -->\n        <div style=\"font-size: 12px; margin-top: 1.5mm;\">\n          <p style=\"padding: 0px; margin: 0px; padding-top: 0mm; padding-bottom: 1.5mm; margin-top:0.05mm;\">Printed By <strong style=\"text-transform:uppercase;\">{{sessionNames}}</strong></p>\n\n          <p style=\"padding: 0px; margin: 0px; padding-top: 0mm; padding-bottom: 1.5mm; margin-top:1.5mm;\">Date Printed <strong style=\"text-transform:uppercase;\">{{formatDate(showDate())}}</strong></p>\n        </div>\n\n\n      </div>\n      <!-- the table contents -->\n      <table style=\"margin-top:6.3mm; border-spacing: initial; width: 100%;\">\n        <thead class=\"\" style=\"text-transform: uppercase;\n                font-weight: 700;\n                font-size: 12px;\n                background: #9e9e9e2e;\n                padding: 2.5mm;\">\n        <tr>\n          <td colspan=\"3\" style=\"padding: 2.5mm;\">Issued On: {{formatDate(billDetails.dateCreated)}}</td>\n        </tr>\n\n        </thead>\n        <tbody style=\"font-size: 12px; text-transform: uppercase; text-wrap: nowrap;\">\n        <tr>\n          <td>\n            <span>UPN NO.: </span>\n            <strong>{{upn}}</strong>\n          </td>\n\n\n          <td>\n            <span>Block No.: </span>\n            <strong>{{blockNo}}</strong>\n          </td>\n\n          <td>\n            <span>Plot No.: </span>\n            <strong>{{plotNumber}}</strong>\n          </td>\n\n        </tr>\n\n        <tr>\n          <td>\n            <span>Sub County: </span>\n            <strong>{{billDetails.subCountyName}}</strong>\n          </td>\n\n\n          <td>\n            <span>Ward: </span>\n            <strong>{{billDetails.wardName}}</strong>\n          </td>\n\n          <td>\n            <span>Zone/Market: </span>\n            <strong>{{billDetails.zone}}</strong>\n          </td>\n\n        </tr>\n\n        <tr>\n          <td colspan=\"3\">\n            <span>Payer: </span>\n            <strong>{{name}}</strong>\n          </td>\n        </tr>\n\n        <tr>\n          <td colspan=\"3\">\n            <span>Address: </span>\n            <strong>{{address}}</strong>\n          </td>\n        </tr>\n\n        </tbody>\n      </table>\n\n      <div>\n        <img src=\"./assets/red-line.png\" style=\"width: 100%; margin-bottom: 0mm;\">\n      </div>\n\n      <!-- billing details and summary -->\n\n      <div class=\"\" style=\"display:flex; text-transform: uppercase; justify-content:space-between;\">\n\n        <div style=\"height: 25.3mm; margin-top: 3.3mm;; width: 25.3mm; display: flex; justify-content: center; align-items: center;\">\n          <img src=\"./assets/demand-notice-stamp.png\" style=\"height: 36mm;\n                    margin-left: 20mm;\n                    transform: rotate(45deg);\n                    opacity: 1.6;\n                    margin-top: 20mm;\">\n        </div>\n\n\n        <div>\n\n\n          <table style=\" margin-top:3.3mm; border-spacing: inherit; text-transform: capitalize; font-size: 14px;\">\n            <thead class=\"\" style=\"text-transform: uppercase;\n                            font-weight: 700;\n                            font-size: 12px;\n                            background: #9e9e9e2e;\n                            padding: 2.5mm;\">\n            <tr>\n              <td colspan=\"2\" style=\"padding: 2.5mm;\">Details Of Charges</td>\n            </tr>\n\n            </thead>\n            <tbody>\n            <tr>\n              <td style=\"padding: 2.5mm; border-bottom: 1px solid #d9d9d9;\">Last Billed For Year</td>\n              <td style=\"text-align: right; padding: 2.5mm; border-bottom: 1px solid #d9d9d9;\"><strong>{{getYear(billDetails.dateCreated)}}</strong></td>\n            </tr>\n\n            <tr>\n              <td style=\"padding: 2.5mm; border-bottom: 1px solid #d9d9d9;\">Annual Charges</td>\n              <td style=\"text-align: right; padding: 2.5mm; border-bottom: 1px solid #d9d9d9;\"><strong>KES {{billDetails.detailAmount}}</strong></td>\n            </tr>\n\n            <tr>\n              <td style=\"padding: 2.5mm;\">Current Balance:</td>\n              <td style=\"text-align: right; padding: 2.5mm; color: #ff1414;\"> <strong>KES {{billDetails.billBalance}}</strong></td>\n            </tr>\n            </tbody>\n          </table>\n\n        </div>\n\n      </div>\n    </div>\n\n    <!-- the footer starts here -->\n    <div style=\"padding: 8.5mm;width: 100%;background-color: #9e9e9e2e;flex-grow: 1;margin-top: 0mm;display: flex;flex-flow: column;align-items: baseline;justify-content: space-between;\">\n      <div style=\"display: flex;justify-content: space-between;width: 100%;\">\n\n        <div style=\"font-size: 12px;padding-top:3.3mm;\">\n          <h2 style=\"\n                        margin-top: 0px;\n                        font-size: 18px;\n                        text-transform: uppercase;\n                        color: #0045a1;\n                        font-weight: 700;\n                        margin-bottom: 3.3mm;\n                        padding-bottom: 0px;\n                        text-transform: uppercase;\n\n                    \">\n            Please note that the outstanding amount is\n          </h2>\n          <ol class=\"\">\n            <li style=\"margin-bottom: 2.5mm;\">Payable at the county cash office or by other electronic means clearly outlined by the county</li>\n            <li style=\"margin-bottom: 2.5mm;\"> The total amount will continue to accrue a late payment penalty at the stipulated rate.</li>\n          </ol>\n\n          <p><strong>Please contact the customer service at county offices for any queries.</strong></p>\n\n        </div>\n\n        <!-- android logo -->\n        <div style=\"padding-top:3.3mm;padding-left: 17.3mm;\">\n          <div style=\"display: flex; margin-bottom: 4mm; justify-content: flex-end; align-items: center;\">\n            <img src=\"assets/android-logo.svg\" style=\"\n                        margin-right: 3.3mm;\n                        height: 11mm;\n                        display: none;\n                    \">\n            <span style=\"font-family: 'Yellowtail', cursive;  color: #4ca82c; line-height: 0.9; font-size: 27px; text-align: right; transform: rotate(37deg);\">Scan to Pay  <br>Instantly!</span>\n          </div>\n\n          <div style=\"position: relative; display: flex;\">\n            <img :src=\"link\" style=\"height: 25.6mm; margin: 1.25mm;\">\n            <img src=\"assets/camera-frame.svg\" style=\"\n                        position: absolute;\n                        left: 0;\n                        height: 27.6mm;\n\n\n                    \">\n\n            <img src=\"assets/curved-arrow.svg\" style=\"\n                        height: 13mm;\n                        margin-left: 0mm;\n                        margin-top: 15px;\n                    \">\n          </div>\n\n        </div>\n\n      </div>\n\n      <footer style=\"position: relative; width: 100%;\">\n        <div style=\"position: absolute; bottom: 0mm;\">\n\n          <div style=\"display: flex; flex-flow: column;\">\n            <span style=\"font-family: 'Yellowtail', cursive;  color: #0045a1; line-height: 0.9; font-size: 20px; text-align: right;\">Thank You!</span>\n            <img src=\"assets/blue-line.png\" style=\"width: 100%;\">\n          </div>\n          <div style=\"display: flex; align-items: center; justify-content: space-between; margin-top: 2mm;\">\n            <p style=\"padding-bottom: 10px;margin-bottom:0px;font-size: 12px;margin-top: 0mm;\">Prepared By <strong>{{billDetails.names}}</strong></p>\n            <p style=\"padding-bottom:10px; margin-bottom:0px;font-size: 12px;margin-top: 0mm; text-transform: uppercase;\"><strong>Notice Ref NO. {{billDetails.billNo}}</strong></p>\n            <div style=\"position: absolut; display: flex; align-items: center; justify-content: center; font-size: 12px; margin-left: 8.5mm;\">\n              <p style=\"font-weight: bold;\">Powered By</p>\n              <img :src=\"county.poweredByLogo\" style=\"height: 10mm; padding-left: 2.5mm;\">\n            </div>\n\n            <div style=\"display: flex; bottom: 18mm; right: 0px; position: absolute; display: Notice Ref Number; align-items: center; justify-content: center; font-size: 12px; margin-left: 8.5mm;\">\n              <img src=\"./assets/unpaid.svg\" style=\"height: 18mm; padding-left: 2.5mm; display: none;\">\n            </div>\n          </div>\n        </div>\n      </footer>\n\n\n\n    </div>\n  </page>\n  </body>\n\n\n</template>\n\n<script>\n\nimport { execute,biller } from \"@/api\";\nimport dayjs from 'dayjs';\n\nexport default {\n  name: \"PrintBill\",\n  data() {\n    return {\n      sessionNames:\"\",\n      date: null,\n      link:'',\n      county: {\n        id: null,\n        countyID: null,\n        countyName: null,\n        tagline: null,\n        smsusername: null,\n        smspassword:null,\n        contact: null,\n        center: null,\n        address: null,\n        email: null,\n        headline: null,\n        tagline2: null,\n        ussd: null,\n        logo: null,\n        bank: null,\n        powered: null,\n        stateLogo: null,\n        QRLink:null,\n        poweredByLogo:null,\n      },\n      customer: {\n        id: 1,\n        names: null,\n        phoneNumber: null,\n        email: null,\n        createdBy: null,\n        dateCreated: null\n      },\n      bank: {\n        id: null,\n        bankID:  null,\n        bank:  null,\n        payBill:  null\n      },\n      payBill: {\n        id: null,\n        stream: null,\n        shortCode: null\n      },\n      billDetails: {\n        id: null,\n        billNo: null,\n        incomeTypeID: null,\n        incomeTypeDescription:null,\n        costCenterNo: null,\n        accountNo:null ,\n        description: null,\n        feeID: null,\n        feeDescription: null,\n        detailAmount: null,\n        receiptAmount: null,\n        billBalance: null,\n        wardID: null,\n        subCountyID: null,\n        subCountyName: null,\n        wardName: null,\n        status: null,\n        dateCreated: null,\n        zone: null,\n        departmentID: null,\n        department: null,\n        idNo: null,\n        phoneNumber: null,\n        names: null,\n        customerPhoneNumber: null,\n        category:null,\n        incomeTypePrefix: null\n      },\n      billInfo: [\n        {\n          id: null,\n          billNo: null,\n          feeID: null,\n          feeDescription: null,\n          fiscalYear: null,\n          paymentCode: null,\n          customer: null,\n          description: null,\n          periodID: null,\n          wardID: null,\n          subCountyID: null,\n          subCountyName: null,\n          wardName: null,\n          createdBy: null,\n          billTotal: null,\n          receiptAmount: null,\n          billBalance: null,\n          status: null,\n          dateCreated:null,\n          zone: null,\n          departmentID: null,\n          department: null,\n          idNo: null,\n          phoneNumber: null,\n          names: null,\n          customerPhoneNumber: null,\n          category: null,\n          incomeTypePrefix: null\n        }\n      ],\n      upn:'',\n      blockNo:'',\n      plotNumber:'',\n      name:'',\n      address:''\n    };\n  },\n  mounted() {\n\n\n    // Get the hash from the URL\n    const hash = window.location.hash;\n\n    const numberFromURL = hash.split('/')[3];\n\n\n    // If number is passed in the URL\n    if (numberFromURL) {\n      console.log('Number from URL:', numberFromURL);\n      this.getBill(numberFromURL);\n    } else {\n      // Number is not passed in the URL, check localStorage\n      this.sessionNames =  sessionStorage.getItem(\"sessionNames\")\n      let params = {}\n      try {\n        params = JSON.parse(localStorage['params'])\n        console.log('####'+ params.billNo)\n        this.getBill(params.billNo);\n      } catch (error) {\n        // ignore\n      }\n    }\n\n\n\n\n\n    this.menuAccess()\n\n  },\n  methods: {\n    getYear(dateCreated) {\n      const date = new Date(dateCreated);\n      return date.getFullYear();\n    },\n    menuAccess(){\n\n      const data = new FormData();\n      data.append(\"function\", \"menuAccess\");\n      data.append(\"menu\", \"Bills\");\n      data.append(\"sessionNames\", sessionStorage.getItem(\"sessionNames\"));\n      data.append(\"sessionIdNo\",  sessionStorage.getItem(\"sessionIdNo\"));\n      execute(data,biller)\n          .then(() => {\n            // alert(res.data.message);\n          })\n          .catch(() => {\n            // alert(e.message);\n          });\n\n    },\n    getCurrentDateTime() {\n// Create a new Date object with the current date and time\n      const now = new Date();\n// Format the date and time as DD MMM YYYY hh:mm:ss\n      const formattedDateTime = now.toLocaleString('en-US', {\n        day: 'numeric',\n        month: 'short',\n        year: 'numeric',\n        hour: 'numeric',\n        minute: 'numeric',\n        second: 'numeric',\n        hour12: false\n      });\n// Return the formatted date and time\n      return formattedDateTime;\n    },\n    numberFormat(num) {\n      const britishNumberFormatter = new Intl.NumberFormat(\"en-GB\");\n      return britishNumberFormatter.format(num)\n    },\n    formatDate(dateString) {\n// Parse the date string with the original format\n      const date = dayjs(dateString, 'YYYY-MM-DD HH:mm:ss');\n// Format the date with the desired format\n      return date.format('DD MMM YYYY [AT] hh:mm A');\n    },\n    showDate() {\n      const dateObj = new Date();\n      const currentDate =\n          dateObj.getDate() +\n          \"/\" +\n          dateObj.getMonth() +\n          \"/\" +\n          dateObj.getFullYear();\n      return currentDate;\n    },\n    formatPrice(value) {\n      let val = (value / 1).toFixed(2).replace(\".\", \",\");\n      return val.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \".\");\n    },\n    getBill(billNo) {\n      const data = new FormData();\n      data.append(\"function\", \"getBill\");\n      data.append(\"billNo\", billNo);\n\n      execute(data, biller)\n          .then((res) => {\n            if (res.data.success) {\n              this.county = res.data.data.county\n              this.payBill = res.data.data.payBill\n              if(res.data.data.customer!==null)\n                this.customer = res.data.data.customer\n              this.billDetails = res.data.data.billDetails;\n              this.billInfo = res.data.data.billInfo;\n              this.bank = res.data.data.bank\n\n              // eslint-disable-next-line\n              const regex = /UPN NO\\.\\:\\s*(.*?)\\s*\\|\\s*Block No\\.\\s*:\\s*(.*?)\\s*\\|\\s*Plot No\\.\\:\\s*(.*?)\\s*\\|\\s*Address\\.\\:\\s*(.*?)\\s*\\|\\s*Name\\.\\:\\s*(.*?)(?:\\s*\\|.*|$)/;\n\n              const match = this.billDetails.description.match(regex);\n              //UPN NO.: undefined | Block No. :  | Plot No.: KISUMU/MUNICIPALITY/BLOC 4/300 | Address.: BLOCK 4\n              if (match) {\n                this.upn = match[1].trim() !== 'undefined' && match[1].trim() !== '' ? match[1].trim() : 'Not Provided';\n                this.blockNo = match[2].trim() || 'Not Provided';\n                this.plotNumber = match[3].trim() || 'Not Provided';\n                this.address = match[4].trim() || 'Not Provided';\n                this.name = match[5].trim() || 'Not Provided';\n              } else {\n                // Handle the case where the string doesn't match the pattern\n                this.upn = 'Not Provided';\n                this.blockNo = 'Not Provided';\n                this.plotNumber = 'Not Provided';\n                this.address = 'Not Provided';\n                this.name = 'Not Provided';\n              }\n\n              this.link = `https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=PaybillNo: ${this.bank.payBill} | AccNo: ${this.billDetails.billNo} | Amount: ${this.billDetails.billBalance} `;\n\n\n              /*     this.link = \"https://chart.googleapis.com/chart?chs=300x300&cht=qr&chl=BillNo: \"+this.billDetails.billNo+\" |\\n \"\n                       +this.customer.names+\" | Date: \"+ this.billDetails.dateCreated+\" | Amount:\"+this.billDetails.detailAmount;\n                   */\n\n            } else {\n              alert(res.data.data.message);\n            }\n          })\n          .catch((e) => {\n            alert(e.message);\n          });\n    },\n  },\n};\n</script>\n\n\n<style scoped>\n* {\n  box-sizing: border-box;\n  font-family: 'Montserrat', sans-serif;\n  -webkit-print-color-adjust: exact !important;\n  /* Chrome, Safari */\n  color-adjust: exact !important;\n  /*Firefox*/\n}\n\n.print-btn {\n  display: flex;\n  z-index: 1000000000;\n  position: fixed;\n  background: #4aaa23;\n  color: white;\n  top: 30px;\n  right: 30px;\n  border-radius: 50%;\n  padding: 1rem;\n  margin: 0px;\n  border: none;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  box-shadow: 1px 0px 20px 4px rgb(136 136 136 / 65%);\n  cursor: pointer;\n  transition: 0.4s;\n}\n.email-doc{\n  top: 130px;\n  background: #0063c0;\n}\n\n.print-btn img {\n  height: 35px;\n}\n\n@media print {\n  .print-btn {\n    display: none;\n  }\n  body {\n    margin: 0px !important;\n    padding: 0px !important;\n    background-color: white;\n  }\n  @page {\n    /* size: auto; */\n    /* auto is the initial value */\n    /* this affects the margin in the printer settings */\n    /* width: 210mm;*/\n    /* height: 297mm; */\n    size: A4 portrait;\n    margin: 0px;\n    margin-bottom: 0px;\n    margin: 0px;\n  }\n}\n\n@page {\n  /* size: auto; */\n  /* auto is the initial value */\n  /* this affects the margin in the printer settings */\n  /* width: 210mm;\n      height: 297mm; */\n  size: A4 portrait;\n  margin: 0px;\n  margin-bottom: 0px;\n  margin: 0px;\n}\n\ntd{\n  padding: 15px;\n  border: 1px solid #00000014;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}