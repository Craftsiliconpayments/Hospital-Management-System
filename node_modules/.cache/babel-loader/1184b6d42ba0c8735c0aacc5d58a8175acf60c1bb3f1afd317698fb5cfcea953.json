{"ast":null,"code":"import NavigationBar from \"@/components/Navigation\";\nimport { biller, execute, getRight, parking, rent, trade } from \"@/api\";\nexport default {\n  name: \"ReceiptsNew\",\n  components: {\n    NavigationBar\n  },\n  data() {\n    return {\n      confirmCash: false,\n      phoneNumber: '',\n      transactionCompleted: false,\n      transactionSummary: false,\n      paymentPanel: true,\n      paymentMethod: false,\n      paymentData: {\n        eCitizenReceiptNo: null,\n        bankReceiptNo: null,\n        accNo: null,\n        payBillNo: null,\n        amount: null,\n        phoneNumber: null,\n        success: false,\n        paymentMode: null,\n        sessionIdNo: null,\n        sessionPhoneNumber: null,\n        sessionNames: null\n      },\n      billNo: '',\n      billDetails: {\n        id: \"\",\n        billNo: \"\",\n        incomeTypeID: \"\",\n        incomeTypeDescription: \"\",\n        costCenterNo: \"\",\n        accountNo: \",\",\n        description: \"\",\n        feeID: \"\",\n        detailAmount: \"\",\n        receiptAmount: \"\",\n        billBalance: \"\",\n        wardID: \"\",\n        subCountyID: \"\",\n        status: \"\",\n        dateCreated: \"\"\n      },\n      billInfo: [],\n      message: null\n    };\n  },\n  mounted() {\n    this.menuAccess();\n  },\n  methods: {\n    menuAccess() {\n      const data = new FormData();\n      data.append(\"function\", \"menuAccess\");\n      data.append(\"menu\", \"Receipts New\");\n      data.append(\"sessionNames\", sessionStorage.getItem(\"sessionNames\"));\n      data.append(\"sessionIdNo\", sessionStorage.getItem(\"sessionIdNo\"));\n      execute(data, biller).then(() => {\n        // alert(res.data.message);\n      }).catch(() => {\n        // alert(e.message);\n      });\n    },\n    getRight(type) {\n      return getRight(type);\n    },\n    formatPrice(value) {\n      var formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'KES',\n        minimumFractionDigits: 2\n      });\n      return formatter.format(value);\n    },\n    getBill() {\n      if (this.billNo === '') {\n        alert('Please Enter Bill No');\n      } else {\n        const data = new FormData();\n        data.append(\"function\", \"getBill\");\n        data.append(\"billNo\", this.billNo);\n        execute(data, biller).then(res => {\n          if (res.data.success) {\n            this.billDetails = res.data.data.billDetails;\n            this.billInfo = res.data.data.billInfo;\n            this.paymentData.amount = res.data.data.billDetails.billBalance;\n            this.paymentData.accNo = res.data.data.billDetails.billNo;\n            this.paymentData.sessionNames = sessionStorage.getItem(\"sessionNames\");\n            this.paymentData.sessionIdNo = sessionStorage.getItem(\"sessionIdNo\");\n            this.paymentData.sessionPhoneNumber = sessionStorage.getItem(\"sessionPhoneNumber\");\n          } else {\n            this.message = res.data.message;\n          }\n        }).catch(e => {\n          //alert(e.message);\n          this.message = e.message;\n        });\n      }\n    },\n    showPaymentMethod() {\n      this.paymentMethod = true;\n      this.paymentPanel = false;\n      this.transactionSummary = false;\n      this.transactionCompleted = false;\n    },\n    printBill() {\n      localStorage['params'] = JSON.stringify({\n        billNo: this.billDetails.billNo\n      });\n      const routeData = this.$router.resolve({\n        name: 'bill'\n      });\n      window.open(routeData.href, '_blank');\n    },\n    printReceipt() {\n      if (this.receiptDetails.receiptNo == null) {\n        alert(\"Try again later\");\n      } else {\n        //  this.$refs.closeReceived.click();\n        localStorage['params'] = JSON.stringify({\n          receiptNo: this.receiptDetails.receiptNo\n        });\n        const routeData = this.$router.resolve({\n          name: 'receipt'\n        });\n        window.open(routeData.href, '_blank');\n      }\n    },\n    showTransactionSummary(paymentMode) {\n      this.paymentData.paymentMode = paymentMode;\n      if (paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if (paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      if (paymentMode === \"E-CITIZEN\") {\n        if (this.paymentData.eCitizenReceiptNo == null) {\n          alert(\"Enter E-CITIZEN Receipt No\");\n          return;\n        }\n      }\n      this.paymentMethod = false;\n      this.paymentPanel = false;\n      this.transactionSummary = true;\n      this.transactionCompleted = false;\n    },\n    makePayment() {\n      if (this.paymentData.paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if (this.paymentData.paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      if (this.paymentData.paymentMode === \"E-CITIZEN\") {\n        if (this.paymentData.eCitizenReceiptNo == null) {\n          alert(\"Enter E-CITIZEN Receipt No\");\n          return;\n        }\n      }\n      this.message = \"Payment Request sent\";\n      this.paymentData.phoneNumber = this.phoneNumber;\n      const data = new FormData();\n      data.append(\"function\", \"makePayment\");\n      data.append(\"paymentData\", JSON.stringify(this.paymentData));\n      let stream = null;\n      if (this.paymentData.accNo.startsWith(\"SBP\")) {\n        stream = trade;\n      }\n      if (this.paymentData.accNo.startsWith(\"PKN\")) {\n        stream = parking;\n      }\n      if (this.paymentData.accNo.startsWith(\"RNT\")) {\n        stream = rent;\n      }\n      if (this.paymentData.accNo.startsWith(\"BLL\")) {\n        stream = biller;\n      }\n      execute(data, stream).then(res => {\n        if (res.data.success) {\n          this.paymentMethod = false;\n          this.paymentPanel = false;\n          //start checking payment\n          this.timer = setInterval(() => {\n            this.checkPayment();\n          }, 3000);\n        } else {\n          this.rate = null;\n          alert(res.data.message);\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    },\n    checkPayment() {\n      this.randomNumber = Math.floor(Math.random() * 3) + 1;\n      if (this.randomNumber === 1) {\n        this.message = \"Waiting for payment.\";\n      }\n      if (this.randomNumber === 2) {\n        this.message = \"Waiting for payment..\";\n      }\n      if (this.randomNumber === 3) {\n        this.message = \"Waiting for payment...\";\n      }\n      const data = new FormData();\n      data.append(\"function\", \"checkPayment\");\n      data.append(\"accountRef\", this.paymentData.accNo);\n      let stream = null;\n      if (this.paymentData.accNo.startsWith(\"SBP\")) {\n        stream = trade;\n      }\n      if (this.paymentData.accNo.startsWith(\"PKN\")) {\n        stream = parking;\n      }\n      if (this.paymentData.accNo.startsWith(\"RNT\")) {\n        stream = rent;\n      }\n      if (this.paymentData.accNo.startsWith(\"BLL\")) {\n        stream = biller;\n      }\n      execute(data, stream).then(res => {\n        if (res.data.success) {\n          clearInterval(this.timer);\n          this.receipt = true;\n          this.paymentData.success = false;\n          this.transaction = res.data.data.transaction;\n          this.receiptDetails = res.data.data.receipt.receiptDetails;\n          //Close the modal\n          this.transactionSummary = false;\n          this.transactionCompleted = true;\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    }\n  }\n};","map":{"version":3,"names":["NavigationBar","biller","execute","getRight","parking","rent","trade","name","components","data","confirmCash","phoneNumber","transactionCompleted","transactionSummary","paymentPanel","paymentMethod","paymentData","eCitizenReceiptNo","bankReceiptNo","accNo","payBillNo","amount","success","paymentMode","sessionIdNo","sessionPhoneNumber","sessionNames","billNo","billDetails","id","incomeTypeID","incomeTypeDescription","costCenterNo","accountNo","description","feeID","detailAmount","receiptAmount","billBalance","wardID","subCountyID","status","dateCreated","billInfo","message","mounted","menuAccess","methods","FormData","append","sessionStorage","getItem","then","catch","type","formatPrice","value","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","format","getBill","alert","res","e","showPaymentMethod","printBill","localStorage","JSON","stringify","routeData","$router","resolve","window","open","href","printReceipt","receiptDetails","receiptNo","showTransactionSummary","makePayment","stream","startsWith","timer","setInterval","checkPayment","rate","randomNumber","Math","floor","random","clearInterval","receipt","transaction"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/HMIS/hospital-management/src/components/ReceiptsNew.vue"],"sourcesContent":["<template>\n    <div>\n        <head>\n            <meta charset=\"utf-8\" />\n            <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n            <meta content=\"Rental management system by Nouveta LTD\" name=\"description\" />\n            <meta content=\"Kelvin Njuguna\" name=\"author\" />\n            <!-- App favicon -->\n            <link rel=\"shortcut icon\" href=\"assets/images/favicon.png\">\n\n            <link href=\"assets/libs/select2/css/select2.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n\n            <link href=\"assets/libs/bootstrap-datepicker/css/bootstrap-datepicker.min.css\" rel=\"stylesheet\" type=\"text/css\">\n            <link href=\"assets/libs/spectrum-colorpicker2/spectrum.min.css\" rel=\"stylesheet\" type=\"text/css\">\n            <link href=\"assets/libs/bootstrap-timepicker/css/bootstrap-timepicker.min.css\" rel=\"stylesheet\" type=\"text/css\">\n            <link href=\"assets/libs/bootstrap-touchspin/jquery.bootstrap-touchspin.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n            <link rel=\"stylesheet\" href=\"assets/libs/%40chenfengyuan/datepicker/datepicker.min.css\">\n\n\n\n            <!-- Bootstrap Css -->\n            <link href=\"assets/css/bootstrap.min.css\" id=\"bootstrap-style\" rel=\"stylesheet\" type=\"text/css\" />\n            <!-- Bootstrap select styling -->\n            <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css\">\n            <!-- Icons Css -->\n            <link href=\"assets/css/icons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n            <!-- App Css-->\n            <link href=\"assets/css/app.min.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n            <!-- custom Css-->\n            <link href=\"assets/css/custom.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n        </head>\n\n        <body @contextmenu.prevent data-sidebar=\"dark\">\n\n        <NavigationBar/>\n\n        <!-- Search for bill -->\n        <div class=\"modal fade \" id=\"searchBillModal\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1 \" role=\"dialog \" aria-labelledby=\"staticBackdropLabel \" aria-hidden=\"true \">\n            <div class=\"modal-dialog modal-dialog-centered \">\n                <div class=\"modal-content \">\n                    <div class=\"modal-header border-bottom-0 \">\n                        <button type=\"button \" class=\"btn-close d-none\" data-dismiss=\"modal\"  aria-label=\"Close \"></button>\n                    </div>\n                    <div class=\"modal-body \">\n                        <div class=\"text-center mb-4 \">\n                            <div class=\"avatar-md mx-auto mb-4 \">\n                                <div class=\"avatar-title bg-light rounded-circle text-success h1 \">\n                                    <i class=\"bx bx-receipt \"></i>\n                                </div>\n                            </div>\n\n                            <div class=\"row justify-content-center \">\n                                <div class=\"col-xl-10 \">\n                                    <h4 class=\"text-primary \">Enter Bill Number To continue\n\n                                    </h4>\n                                    <p class=\"text-muted font-size-14 mb-4 \">\n                                        Enter bill No to continue.\n                                    </p>\n\n                                    <form>\n                                        <div class=\"row \">\n                                            <div class=\"col-12 \">\n                                                <div class=\"mb-3 \">\n                                                    <label for=\"digit1-input\" class=\"visually-hidden \">Bill No.</label>\n                                                    <input  v-model=\"billNo\" type=\"text\" class=\"form-control form-control-lg text-center two-step \" placeholder=\"Search for Bill\">\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <button data-dismiss=\"modal\" @click=\"getBill()\" type=\"button\" class=\"btn btn-success btn-block w-100 \">\n                                            <i class=\"bx bx-search-alt-2 font-size-16 align-middle me-2 \"></i>\n                                            Search\n                                        </button>\n                                    </form>\n\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!-- Search for bill -->\n\n        <!-- ============================================================== -->\n        <!-- Start right Content here -->\n        <!-- ============================================================== -->\n         <div id=\"content\" class=\"content-minimize\">\n\n            <div class=\"page-content\">\n                <div class=\"container-fluid\">\n\n                    <!-- start page title -->\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <div class=\"page-title-box d-sm-flex align-items-center justify-content-between\">\n                                <h4 class=\"mb-sm-0 font-size-18 text-capitalize\">New Bill</h4>\n\n                                <div class=\"page-title-right\">\n                                    <ol class=\"breadcrumb m-0\">\n                                        <li class=\"breadcrumb-item\"><a href=\"index.html\">Home</a></li>\n                                        <li class=\"breadcrumb-item active\">Receipt Bill</li>\n                                    </ol>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n                    <!-- end page title -->\n\n                    <!-- eTransactions table -->\n\n                    <div class=\"row\">\n                        <div class=\"col-12\">\n                            <div class=\"row d-flex justify-content-center align-items-center\">\n                                <div class=\"col-12\">\n                                    <div class=\"card\">\n                                        <div class=\"card-body\">\n                                            <div class=\"row\">\n                                                <div class=\"col-12\">\n                                                    <div class=\"p-3 bg-success bg-soft mb-4\">\n                                                        <h4 class=\"p-0 m-0\">Bill No.{{billDetails.billNo}}</h4>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-3 mb-4\">\n                                                    <div class=\"d-flex\">\n\n                                                        <div class=\"flex-grow-1\">\n                                                            <p class=\"text-muted mb-0\">Billed Amount</p>\n                                                            <h5 class=\"mb-0 font-14px\">{{formatPrice(billDetails.detailAmount)}}</h5>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                                <div class=\"col-3 mb-4\">\n                                                    <div class=\"d-flex\">\n                                                        <div class=\"flex-grow-1\">\n                                                            <p class=\"text-muted mb-0\">Paid Amount</p>\n                                                            <h5 class=\"mb-0 font-14px\">{{formatPrice(billDetails.receiptAmount)}}</h5>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                                <div class=\"col-3 mb-4\">\n                                                    <div class=\"d-flex\">\n                                                        <div class=\"flex-grow-1\">\n                                                            <p class=\"text-muted mb-0\">Balance</p>\n                                                            <h5 class=\"mb-0 font-14px text-uppercase\">{{formatPrice(billDetails.billBalance)}}</h5>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                                <div class=\"col-3 mb-4\">\n                                                    <div class=\"d-flex\">\n                                                        <div class=\"flex-grow-1\">\n                                                            <p class=\"text-muted mb-0\">Status</p>\n                                                            <span v-if=\"billDetails.status==='PAID'\" class=\"badge badge-soft-success text-uppercase\">{{billDetails.status}}</span>\n                                                            <span v-if=\"billDetails.status ==='UNPAID'\" class=\"badge badge-soft-danger text-uppercase\">{{billDetails.status}}</span>\n                                                        </div>\n                                                    </div>\n                                                </div>\n\n                                            </div>\n\n                                            <div class=\"col-12\">\n                                                <div class=\"table-responsive border-1\">\n                                                    <table class=\"table table-nowrap vertical-align-middle\">\n                                                        <thead class=\"bg-light\">\n                                                        <tr>\n                                                            <th style=\"width: 70px;\">No.</th>\n                                                            <th>Description</th>\n                                                            <th class=\"text-end\">Amount</th>\n\n                                                        </tr>\n                                                        </thead>\n                                                        <tfoot class=\"bg-light\">\n                                                        <tr>\n                                                            <td colspan=\"2\" class=\"border-0 text-end text-right\">\n                                                                <strong>Total</strong>\n                                                            </td>\n                                                            <td class=\"border-0 text-end text-right\">\n                                                                <h5 class=\"m-0 text-uppercase fw-bold\">{{formatPrice(billDetails.detailAmount)}}</h5>\n                                                            </td>\n\n                                                        </tr>\n                                                        </tfoot>\n                                                        <tbody>\n                                                        <tr v-for=\"(item, index) in billInfo\" :value=\"item\" :key=\"index\">\n                                                            <td>{{index+1}}</td>\n                                                            <td>\n                                                                <p class=\"mb-0 p-0 m-0\">{{item.description}}</p>\n                                                            </td>\n                                                            <td class=\"text-end text-right\">{{formatPrice(item.billTotal)}}</td>\n\n                                                        </tr>\n                                                        </tbody>\n                                                    </table>\n                                                </div>\n                                            </div>\n                                        </div>\n                                        <div class=\"card-footer bg-white py-4\">\n                                            <div class=\"col-auto\">\n                                                <button  v-if=\"getRight('RECEIVE PAYMENT')\" type=\"submit\" data-toggle=\"modal\" data-target=\"#payment-modal\" class=\"btn btn-primary chat-send w-md waves-effect waves-light\"><span class=\"d-none d-sm-inline-block me-2\">Receive Payment</span> <i class=\"mdi mdi-send\"></i></button>\n                                                <button data-toggle=\"modal\" data-target=\"#searchBillModal\" style=\"margin-left: 10px\" ref=\"Close\"  type=\"button\" class=\"btn btn-success btn-block w-md \">\n                                                    <i class=\"bx bx-search-alt-2 font-size-16 align-middle me-2 \"></i>\n                                                    Search\n                                                </button>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                        <!-- end col -->\n                    </div>\n\n                    <!-- end row -->\n                </div>\n                <!-- container-fluid -->\n            </div>\n            <!-- End Page-content -->\n\n            <!-- payment modal -->\n            <div class=\"modal fade\" id=\"payment-modal\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" role=\"dialog\" aria-bs-labelledby=\"exampleModalCenterTitle\" aria-bs-hidden=\"true\" data-bs-keyboard=\"false\" data-bs-backdrop=\"static\">\n                <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header d-none\">\n                            <span class=\"badge badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n                            <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle close-modal\" data-dismiss=\"modal\"  aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n                            </button>\n\n                        </div>\n                        <div class=\"modal-body\">\n                            <div class=\"d-flex justify-content-between align-items-center\">\n                                <span class=\"badge  badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n                                <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle pull-right close-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n                                </button>\n                            </div>\n\n                            <div class=\"payment-panel-parent\">\n\n                                <div v-if=\"paymentPanel\" class=\"text-center payment-active-panel d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n                                    <div class=\"success-image mb-4 pb-4 pt-4\">\n                                        <img src=\"assets/images/bills.svg\" height=\"200\" alt=\"\">\n                                    </div>\n                                    <h4 class=\"text-black fw-bold\">{{message}}</h4>\n                                    <p class=\"text-muted mb-4\">Print the bill or receive payment for this bill.</p>\n                                    <div class=\"d-flex w-100 pb-2\">\n                                        <button @click=\"showPaymentMethod()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                            <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                            Proceed to Receive Payment\n                                        </button>\n                                        <a @click=\"printBill()\" target=\"_blank\" data-dismiss=\"\" type=\"button\" class=\"btn btn-outline-secondary waves-effect dismin-modal\">Print Bill</a>\n                                    </div>\n                                </div>\n\n                                <div v-if=\"paymentMethod\" class=\"send-method payment-panel \">\n                                    <label for=\"\" class=\"mb-0 pb-0\">Payment Method</label>\n                                    <p><small class=\"text-muted\">How would you like to send this money?</small></p>\n\n                                    <div>\n                                        <div class=\"accordion\" id=\"accordionExample\">\n                                            <!--MPESA-->\n                                            <div class=\"accordion-item\" v-if=\"getRight('MPESA')\">\n                                                <h2 class=\"accordion-header\" id=\"headingOne\">\n                                                    <button class=\"accordion-button fw-medium\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\n                                                        <div class=\"flex-shrink-0 me-3\">\n                                                            <img class=\"rounded-circle\" src=\"assets/images/users/mpesa.jpg\" alt=\"Mobile Money\" height=\"65\">\n                                                        </div>\n                                                        <div class=\"d-flex flex-column\">\n                                                            <p class=\"m-0 p-0 text-uppercase fw-semibold\">MPESA</p>\n                                                            <p class=\"mb-0 p-0\"> <small>A payment request will be sent directly to the customer</small></p>\n                                                        </div>\n                                                    </button>\n                                                </h2>\n                                                <div id=\"collapseOne\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\n                                                    <div class=\"accordion-body\">\n                                                        <div>\n                                                            <p>\n                                                                A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to the MPESA number you enter below.\n                                                            </p>\n                                                        </div>\n                                                        <div class=\"form-group\">\n                                                            <label for=\"\">MPESA Number</label>\n                                                            <div class=\"form-floating mb-3\">\n                                                                <input v-model=\"phoneNumber\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\n                                                                <label for=\"floatingnameInput\">Phone No.</label>\n                                                            </div>\n\n                                                            <button @click=\"showTransactionSummary('MPESA')\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                                                <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                                                Send Payment Request\n                                                            </button>\n\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                            <!--BANK-->\n                                            <div class=\"accordion-item\" v-if=\"getRight('BANK')\">\n                                                <h2 class=\"accordion-header\" id=\"headingThree\">\n                                                    <button class=\"accordion-button fw-medium collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                                                        <div class=\"flex-shrink-0 me-3\">\n                                                            <img class=\"rounded-circle\" src=\"assets/images/users/money.jpg\" alt=\"Mobile Money\" height=\"65\">\n                                                        </div>\n                                                        <div class=\"d-flex flex-column\">\n                                                            <p class=\"m-0 p-0 text-uppercase fw-semibold\">bank Receipting</p>\n                                                            <p class=\"mb-0 p-0\"> <small>Enter the receipt number here to confirm payment for this transaction.</small></p>\n\n                                                        </div>\n                                                    </button>\n                                                </h2>\n                                                <div id=\"collapseTwo\" class=\"accordion-collapse collapse\" aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample\">\n                                                    <div class=\"accordion-body\">\n                                                        <div class=\"form-group\">\n                                                            <label for=\"\">Enter The Bank's Receipt Number</label>\n                                                            <div class=\"form-floating mb-3\">\n                                                                <input v-model=\"paymentData.bankReceiptNo\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\n                                                                <label for=\"floatingnameInput\">Bank Ref No.</label>\n                                                            </div>\n\n                                                            <button @click=\"showTransactionSummary('BANK')\" class=\"btn w-100 btn-warning mt-3 btn-bank\">\n                                                                Continue\n                                                            </button>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n\n\n                                            <!--CASH-->\n                                           <!-- <div class=\"accordion-item\">\n                                                <h2 class=\"accordion-header\" id=\"headingTwo\">\n                                                    <button class=\"accordion-button fw-medium collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                                                        <div class=\"flex-shrink-0 me-3\">\n                                                            <img class=\"rounded-circle\" src=\"assets/images/users/money.jpg\" alt=\"Mobile Money\" height=\"65\">\n                                                        </div>\n                                                        <div class=\"d-flex flex-column\">\n                                                            <p class=\"m-0 p-0 text-uppercase fw-semibold\">Cash</p>\n                                                            <p class=\"mb-0 p-0\"> <small>By selecting this option you confirm that you have received the payment inform of cash</small></p>\n\n                                                        </div>\n                                                    </button>\n                                                </h2>\n                                                <div id=\"collapseTwo\" class=\"accordion-collapse collapse\" aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample\">\n                                                    <div class=\"accordion-body\">\n\n                                                        <div class=\"form-check form-check-primary mb-3\">\n                                                            <input v-model=\"confirmCash\" class=\"form-check-input\" type=\"checkbox\" id=\"confirm-cash\">\n                                                            <label class=\"form-check-label\" for=\"confirm-cash\">\n                                                                Confirm having received <strong>KES {{billDetails.billBalance}}</strong>\n                                                            </label>\n                                                        </div>\n\n                                                        {{message}}\n                                                        <br/>\n                                                        <button v-if=\"confirmCash\" @click=\"showTransactionSummary('CASH')\"  type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                                            <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                                            Receive Cash Payment\n                                                        </button>\n\n                                                    </div>\n                                                </div>\n                                            </div>-->\n\n\n                                          <!--E-CITIZEN-->\n                                          <div class=\"accordion-item\"   v-if=\"getRight('E-CITIZEN')\" >\n                                            <h2 class=\"accordion-header\" id=\"headingFour\">\n                                              <button class=\"accordion-button fw-medium collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseFour\" aria-expanded=\"false\" aria-controls=\"collapseFour\">\n                                                <div class=\"flex-shrink-0 me-3\">\n                                                  <img class=\"rounded-circle\" src=\"assets/images/users/money.jpg\" alt=\"Mobile Money\" height=\"65\">\n                                                </div>\n                                                <div class=\"d-flex flex-column\">\n                                                  <p class=\"m-0 p-0 text-uppercase fw-semibold\">E-CITIZEN Receipting</p>\n                                                  <p class=\"mb-0 p-0\"> <small>Enter the receipt number here to confirm payment for this transaction.</small></p>\n\n                                                </div>\n                                              </button>\n                                            </h2>\n                                            <div id=\"collapseFour\" class=\"accordion-collapse collapse\" aria-labelledby=\"headingFour\" data-bs-parent=\"#accordionExample\">\n                                              <div class=\"accordion-body\">\n                                                <div class=\"form-group\">\n                                                  <label for=\"\">Enter The Bank's Receipt Number</label>\n                                                  <div class=\"form-floating mb-3\">\n                                                    <input v-model=\"paymentData.eCitizenReceiptNo\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\n                                                    <label for=\"floatingnameInput\">E-CITIZEN Ref No.</label>\n                                                  </div>\n\n                                                  <button @click=\"showTransactionSummary('E-CITIZEN')\" class=\"btn w-100 btn-warning mt-3 btn-bank\">\n                                                    Continue\n                                                  </button>\n                                                </div>\n                                              </div>\n                                            </div>\n                                          </div>\n\n                                        </div>\n                                    </div>\n                                </div>\n\n                                <div v-if=\"transactionSummary\" class=\"transaction-summary payment-panel\">\n                                    <label for=\"\">Transaction Breakdown</label>\n                                    <div class=\"border p-4 rounded \">\n                                        <div class=\"row\">\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted \">\n                                                    BillO NO.\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    {{billDetails.billNo}}\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted mt-2\">\n                                                    Bill For\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    {{billDetails.incomeTypeDescription}}\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted mt-2\">\n                                                    Payment Method\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    {{paymentData.paymentMode}}\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted mt-2\">\n                                                    Transaction Amount\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    KES {{billDetails.billBalance}}\n                                                </div>\n                                            </div>\n\n\n                                            <div class=\"col-12 text-black\"><hr class=\"mb-0 pb-0\"></div>\n\n                                            <div class=\"col-lg-6 text-uppercase\">\n                                                <div class=\"text-muted mt-2 font-21\">\n                                                    Total\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end text-uppercase\">\n                                                <div class=\" text-right text-black font-21 fw-bold\">\n                                                    KES {{billDetails.billBalance}}\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div class=\"mpesa-confirmation \">\n                                            <div v-if=\"paymentData.paymentMode=='MPESA'\">\n                                                <p class=\"text-muted mt-2\">A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to <strong class=\"text-black\"> phone number ({{ phoneNumber }})</strong> soon after you click the <strong class=\"text-black text-capitalize\">Send Request</strong> button bellow.\n                                                    <br>\n                                                    <br>\n                                                    Remember to <strong class=\"text-black\">Check your phone</strong> to confirm payment by entering your Mpesa pin.</p>\n                                            </div>\n\n                                            <div>{{message}}  </div>\n                                            <br>\n                                            <button @click=\"makePayment()\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect btn-send waves-light text-center w-100\">\n                                                <div class=\"d-flex justify-content-center align-items-center\">\n                                                    <div class=\"stk-timer-container d-none justify-content-center align-items-center\">\n                                                        <span class=\"mdi mdi-timer-outline font-16px\"></span>\n                                                        <span class=\"stk-timer px-2\"></span>\n                                                    </div>\n                                                    <div class=\"justify-content-center align-items-center d-flex\">\n                                                        <span class=\"px-2\">Send Request</span>\n                                                        <div class=\"flip-x\"><i class=\"mdi mdi-reply ms-3 font-16px\"></i></div>\n                                                    </div>\n                                                </div>\n                                            </button>\n                                        </div>\n\n\n                                    </div>\n                                </div>\n\n                                <div v-if=\"transactionCompleted\" class=\"text-center d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n                                    <div class=\"success-image mb-4\">\n                                        <img src=\"assets/images/payment-confirmation-images/sent.svg\" height=\"200\" alt=\"\">\n                                    </div>\n                                    <h4 class=\"text-blink-primary fw-bold\">Transaction Complete</h4>\n                                    <p class=\"text-muted mb-4\"><strong class=\"text-black\">KES {{receiptDetails.receiptAmount}}</strong> has been received for <strong class=\"text-black\">Bill No. {{receiptDetails.billNo}}</strong></p>\n                                    <button @click=\"printReceipt()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                        <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                        Print Receipt\n                                    </button>\n                                </div>\n\n\n\n                            </div>\n                        </div>\n                        <div class=\"modal-footer d-flex d-none bill-modal-footer\">\n                            <button href=\"javascript: void(0);\" disabled class=\"btn btn-outline-light waves-effect waves-light payment-prev\"> <i class=\"mdi mdi-arrow-left ms-1\"></i>Previouse</button>\n                            <button href=\"javascript: void(0);\" class=\"btn btn-primary waves-effect waves-light payment-next\">Next <i class=\"mdi mdi-arrow-right ms-1\"></i></button>\n                            <button href=\"javascript: void(0);\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect waves-light text-center d-none\">\n                                <div class=\"d-flex justify-content-center align-items-center\"> <span>Send Money</span> <div class=\"flip-x\"><i class=\"mdi mdi-reply flip-x ms-3 font-16px\"></i></div></div>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <!-- end of payment modal-->\n            <footer class=\"footer \">\n                <div class=\"container-fluid \">\n                    <div class=\"row \">\n                        <div class=\"col-sm-6 \">\n                           © County\n                        </div>\n                        <div class=\"col-sm-6 \">\n                            <div class=\"text-sm-end d-sm-block\">\n                                A product of County\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </footer>\n        </div>\n\n        </body>\n\n\n    </div>\n</template>\n\n<script>\n    import NavigationBar from \"@/components/Navigation\";\n    import {biller, execute, getRight, parking, rent, trade} from \"@/api\";\n    export default {\n        name: \"ReceiptsNew\",\n        components: {NavigationBar},\n        data(){\n            return{\n                confirmCash: false,\n                phoneNumber:'',\n                transactionCompleted: false,\n                transactionSummary: false,\n                paymentPanel: true,\n                paymentMethod: false,\n                paymentData: {\n                  eCitizenReceiptNo: null,\n                    bankReceiptNo: null,\n                    accNo: null,\n                    payBillNo: null,\n                    amount: null,\n                    phoneNumber: null,\n                    success: false,\n                    paymentMode:null,\n                  sessionIdNo:null,\n                  sessionPhoneNumber:null,\n                  sessionNames:null\n                },\n                billNo:'',\n                billDetails:{\n                    id: \"\",\n                    billNo: \"\",\n                    incomeTypeID: \"\",\n                    incomeTypeDescription: \"\",\n                    costCenterNo: \"\",\n                    accountNo: \",\",\n                    description: \"\",\n                    feeID: \"\",\n                    detailAmount: \"\",\n                    receiptAmount: \"\",\n                    billBalance: \"\",\n                    wardID: \"\",\n                    subCountyID: \"\",\n                    status: \"\",\n                    dateCreated: \"\"\n                },\n                billInfo:[],\n                message:null\n            }\n        },\n        mounted() {\n          this.menuAccess()\n        },\n        methods:{\n             menuAccess(){\n\n            const data = new FormData();\n            data.append(\"function\", \"menuAccess\");\n            data.append(\"menu\", \"Receipts New\");\n            data.append(\"sessionNames\", sessionStorage.getItem(\"sessionNames\"));\n            data.append(\"sessionIdNo\",  sessionStorage.getItem(\"sessionIdNo\"));\n            execute(data,biller)\n                .then(() => {\n                  // alert(res.data.message);\n                })\n                .catch(() => {\n                  // alert(e.message);\n                });\n\n          },\n            getRight(type){\n                return getRight(type)\n            },\n            formatPrice(value) {\n                var formatter = new Intl.NumberFormat('en-US', {\n                    style: 'currency',\n                    currency: 'KES',\n                    minimumFractionDigits: 2\n                });\n                return formatter.format(value);\n            },\n            getBill(){\n                if(this.billNo === ''){\n                    alert('Please Enter Bill No')\n                }else {\n                    const data = new FormData();\n                    data.append(\"function\", \"getBill\");\n                    data.append(\"billNo\", this.billNo);\n                    execute(data,biller)\n                        .then((res) =>{\n                            if (res.data.success) {\n\n                                this.billDetails = res.data.data.billDetails\n                                this.billInfo = res.data.data.billInfo\n                                this.paymentData.amount = res.data.data.billDetails.billBalance\n                                this.paymentData.accNo = res.data.data.billDetails.billNo\n                                this.paymentData.sessionNames = sessionStorage.getItem(\"sessionNames\")\n                                this.paymentData.sessionIdNo = sessionStorage.getItem(\"sessionIdNo\")\n                                this.paymentData.sessionPhoneNumber = sessionStorage.getItem(\"sessionPhoneNumber\")\n\n\n                            }else{\n                                this.message =res.data.message\n                            }\n                        })\n                        .catch((e) => {\n                            //alert(e.message);\n                            this.message =e.message\n                        });\n                }\n\n            },\n            showPaymentMethod(){\n                this.paymentMethod = true;\n                this.paymentPanel = false;\n                this.transactionSummary = false;\n                this.transactionCompleted = false\n            },\n            printBill(){\n                localStorage['params'] = JSON.stringify({\n                    billNo: this.billDetails.billNo\n                })\n                const routeData = this.$router.resolve({name: 'bill'});\n                window.open(routeData.href, '_blank');\n            },\n            printReceipt() {\n                if (this.receiptDetails.receiptNo == null) {\n                    alert(\"Try again later\");\n                } else {\n                    //  this.$refs.closeReceived.click();\n                    localStorage['params'] = JSON.stringify({\n                        receiptNo: this.receiptDetails.receiptNo\n                    })\n                    const routeData = this.$router.resolve({name: 'receipt'});\n                    window.open(routeData.href, '_blank');\n                }\n            },\n            showTransactionSummary(paymentMode){\n\n                this.paymentData.paymentMode = paymentMode\n\n                if(paymentMode === \"MPESA\") {\n                    if (this.phoneNumber == null) {\n                        alert(\"Enter phone number\");\n                        return;\n                    }\n                }\n\n                if(paymentMode === \"BANK\") {\n                    if (this.paymentData.bankReceiptNo == null) {\n                        alert(\"Enter Bank Receipt No\");\n                        return;\n                    }\n                }\n\n                if(paymentMode === \"E-CITIZEN\") {\n                    if (this.paymentData.eCitizenReceiptNo == null) {\n                        alert(\"Enter E-CITIZEN Receipt No\");\n                        return;\n                    }\n                }\n\n                this.paymentMethod = false;\n                this.paymentPanel = false;\n                this.transactionSummary = true;\n                this.transactionCompleted = false\n            },\n            makePayment() {\n                if(this.paymentData.paymentMode === \"MPESA\") {\n                    if (this.phoneNumber == null) {\n                        alert(\"Enter phone number\");\n                        return;\n                    }\n                }\n\n                if(this.paymentData.paymentMode === \"BANK\") {\n                    if (this.paymentData.bankReceiptNo == null) {\n                        alert(\"Enter Bank Receipt No\");\n                        return;\n                    }\n                }\n\n                if(this.paymentData.paymentMode === \"E-CITIZEN\") {\n                if (this.paymentData.eCitizenReceiptNo == null) {\n                  alert(\"Enter E-CITIZEN Receipt No\");\n                  return;\n                }\n              }\n\n                this.message = \"Payment Request sent\";\n                this.paymentData.phoneNumber = this.phoneNumber\n\n                const data = new FormData();\n                data.append(\"function\", \"makePayment\");\n                data.append(\"paymentData\", JSON.stringify(this.paymentData));\n\n                let stream = null;\n                if (this.paymentData.accNo.startsWith(\"SBP\")) {\n                    stream = trade;\n                }\n                if (this.paymentData.accNo.startsWith(\"PKN\")) {\n                    stream = parking;\n                }\n\n                if (this.paymentData.accNo.startsWith(\"RNT\")) {\n                    stream = rent;\n                }\n\n                if (this.paymentData.accNo.startsWith(\"BLL\")) {\n                    stream = biller;\n                }\n\n                execute(data, stream)\n                    .then((res) => {\n                        if (res.data.success) {\n                            this.paymentMethod = false;\n                            this.paymentPanel = false;\n                            //start checking payment\n                            this.timer = setInterval(() => {\n\n                                this.checkPayment();\n                            }, 3000);\n                        } else {\n                            this.rate = null;\n                            alert(res.data.message);\n                        }\n                    })\n                    .catch((e) => {\n                        alert(e.message);\n                    });\n            },\n            checkPayment() {\n                this.randomNumber = Math.floor(Math.random() * 3) + 1\n                if(this.randomNumber === 1){\n                    this.message = \"Waiting for payment.\";\n                }\n                if(this.randomNumber === 2){\n                    this.message = \"Waiting for payment..\";\n                }\n                if(this.randomNumber ===3){\n                    this.message = \"Waiting for payment...\";\n                }\n                const data = new FormData();\n                data.append(\"function\", \"checkPayment\");\n                data.append(\"accountRef\", this.paymentData.accNo);\n\n                let stream = null;\n                if (this.paymentData.accNo.startsWith(\"SBP\")) {\n                    stream = trade;\n                }\n                if (this.paymentData.accNo.startsWith(\"PKN\")) {\n                    stream = parking;\n                }\n                if (this.paymentData.accNo.startsWith(\"RNT\")) {\n                    stream = rent;\n                }\n                if (this.paymentData.accNo.startsWith(\"BLL\")) {\n                    stream = biller;\n                }\n                execute(data, stream)\n                    .then((res) => {\n                        if (res.data.success) {\n                            clearInterval(this.timer);\n                            this.receipt = true;\n                            this.paymentData.success = false;\n                            this.transaction = res.data.data.transaction;\n                            this.receiptDetails = res.data.data.receipt.receiptDetails\n                            //Close the modal\n                            this.transactionSummary = false\n                            this.transactionCompleted = true\n                        }\n                    })\n                    .catch((e) => {\n                        alert(e.message);\n                    });\n            },\n\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}