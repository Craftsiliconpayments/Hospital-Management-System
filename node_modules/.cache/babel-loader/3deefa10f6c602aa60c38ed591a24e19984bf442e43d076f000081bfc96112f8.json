{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.unshift.js\";\n/* eslint-disable */\nimport { biller, execute, executeDownload, getRight, rent } from \"@/api\";\nimport NavigationBar from \"@/components/Navigation.vue\";\nimport router from \"@/router\";\nimport ToolBarHousing from \"@/components/housing/ToolBarHousing.vue\";\nexport default {\n  name: \"HousingDetails\",\n  components: {\n    ToolBarHousing,\n    NavigationBar\n  },\n  data() {\n    return {\n      amount: 0,\n      search: '',\n      download: 'Download Report',\n      loading: true,\n      // set the initial current page as 1\n      currentPage: 1,\n      // set the total number of pages as 10 (you can change this according to your data source)\n      totalPages: 0,\n      // set the number of items per page as 5 (you can change this according to your preference)\n      pageSize: 10,\n      summary: {\n        count: 0,\n        total: 0\n      },\n      category: '',\n      unitStatus: '',\n      unitCategories: [{\n        id: null,\n        category: null,\n        count: null\n      }],\n      unitCategory: {\n        id: null,\n        category: null,\n        count: null\n      },\n      totalMonthyly: 0,\n      totalArreas: 0,\n      totalAmount: 0,\n      message: null,\n      message1: null,\n      message2: null,\n      otpMessage1: null,\n      otpMessage2: null,\n      otp1: 0,\n      otp2: 0,\n      description: '',\n      effectiveFrom: '',\n      reason: '',\n      units: [{\n        id: null,\n        propertyID: null,\n        property: null,\n        unitNo: null,\n        category: null,\n        occupants: null,\n        monthlyRent: null,\n        arrears: null,\n        phoneNumber: null,\n        idNo: null,\n        updated: null,\n        lastPaymentDate: null,\n        nextPaymentDate: null\n      }],\n      unit: {\n        id: null,\n        propertyID: null,\n        property: null,\n        unitNo: null,\n        category: null,\n        occupants: null,\n        monthlyRent: null,\n        arrears: null,\n        phoneNumber: null,\n        idNo: null,\n        updated: null,\n        lastPaymentDate: null,\n        nextPaymentDate: null\n      },\n      vacateReasons: [{\n        id: null,\n        reason: null\n      }],\n      selectedUnits: [{\n        id: null,\n        propertyID: null,\n        property: null,\n        unitNo: null,\n        category: null,\n        occupants: null,\n        monthlyRent: null,\n        arrears: null,\n        phoneNumber: null,\n        idNo: null,\n        updated: null,\n        lastPaymentDate: null,\n        nextPaymentDate: null\n      }],\n      billingModule: {\n        incomeType: {\n          incomeTypeId: null,\n          incomeTypeDescription: null,\n          incomeTypePrefix: null,\n          fundDescription: null,\n          status: null\n        },\n        incomeTypes: [{\n          incomeTypeId: null,\n          incomeTypeDescription: null,\n          incomeTypePrefix: null,\n          fundDescription: null,\n          status: null\n        }]\n      },\n      feesAndCharges: [{\n        feeId: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc: null,\n        costCenterNo: null,\n        zone: null,\n        typeDescription: null\n      }],\n      feesAndChargeItems: [{\n        feeId: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc: null,\n        costCenterNo: null,\n        zone: null,\n        typeDescription: null,\n        customer: null\n      }],\n      billItem: [],\n      billDetails: {\n        id: '',\n        billNo: '',\n        incomeTypeID: '',\n        incomeTypeDescription: '',\n        costCenterNo: '',\n        accountNo: '',\n        feeID: '',\n        detailAmount: '',\n        receiptAmount: '',\n        billBalance: '',\n        wardID: '',\n        subCountyID: '',\n        status: '',\n        dateCreated: ''\n      },\n      billInfo: [],\n      paymentData: {\n        bankReceiptNo: null,\n        accNo: null,\n        payBillNo: null,\n        amount: null,\n        phoneNumber: null,\n        success: false,\n        paymentMode: null,\n        sessionNames: null,\n        sessionIdNo: null,\n        sessionPhoneNumber: null\n      },\n      alert: {\n        success: false,\n        info: false,\n        failed: false\n      },\n      transactionCompleted: false,\n      transactionSummary: false,\n      paymentPanel: true,\n      paymentMethod: false,\n      unitStatuses: [{\n        status: null,\n        count: null\n      }],\n      property: {\n        id: null,\n        propertyID: null,\n        property: null,\n        subCountyName: null,\n        subCountyID: null,\n        wardName: null,\n        wardID: null,\n        zone: null\n      }\n    };\n  },\n  watch: {\n    pageSize(newPageSize) {\n      this.getUnits();\n      // get the total number of items from your data source (you can change this according to your logic)\n      const totalItems = this.summary.count;\n      // calculate the new total pages by dividing the total items by the new page size and rounding up\n      const newTotalPages = Math.ceil(totalItems / newPageSize);\n      // update the totalPages data property with the new value\n      this.totalPages = newTotalPages;\n      // reset the current page to 1\n      this.currentPage = 1;\n    },\n    otpMessage1: function () {\n      if (this.otpMessage1.length > 3) {\n        if (this.otpMessage1 == this.otp1) {\n          this.message1 = null;\n        } else {\n          this.message1 = \"Invalid OTP\";\n        }\n      } else {\n        this.message1 = null;\n      }\n    },\n    otpMessage2: function () {\n      if (this.otpMessage2.length > 3) {\n        if (this.otpMessage2 == this.otp2) {\n          this.message2 = null;\n        } else {\n          this.message2 = \"Invalid OTP\";\n        }\n      } else {\n        this.message2 = null;\n      }\n    },\n    category: function () {\n      this.getUnits();\n    },\n    unitStatus: function () {\n      this.getUnits();\n    },\n    search: function () {\n      this.getUnits();\n    }\n  },\n  mounted() {\n    this.getProperty();\n    this.getUnits();\n    this.getVacateReasons();\n    this.getIncomeTypes();\n    this.getUnitStatus();\n    this.menuAccess();\n  },\n  methods: {\n    getRight,\n    menuAccess() {\n      const data = new FormData();\n      data.append(\"function\", \"menuAccess\");\n      data.append(\"menu\", \"Housing Details\");\n      data.append(\"sessionNames\", sessionStorage.getItem(\"sessionNames\"));\n      data.append(\"sessionIdNo\", sessionStorage.getItem(\"sessionIdNo\"));\n      execute(data, biller).then(res => {\n        // alert(res.data.message);\n      }).catch(e => {\n        // alert(e.message);\n      });\n    },\n    //pagination code\n    pagination(currentPage, totalPages, maxVisibleButtons) {\n      //initialize an empty array for the pages\n      let pages = [];\n      //calculate the start and end indices of the visible buttons\n      let start = currentPage - Math.floor(maxVisibleButtons / 2);\n      let end = currentPage + Math.floor(maxVisibleButtons / 2);\n      //adjust the start and end indices if they are out of bounds\n      if (start < 1) {\n        start = 1;\n        end = start + maxVisibleButtons - 1;\n        if (end > totalPages) {\n          end = totalPages;\n        }\n      }\n      if (end > totalPages) {\n        end = totalPages;\n        start = end - maxVisibleButtons + 1;\n        if (start < 1) {\n          start = 1;\n        }\n      }\n      //loop through the start and end indices and push the pages to the array\n      for (let i = start; i <= end; i++) {\n        pages.push(i);\n      }\n      //add an ellipsis at the beginning if there are more pages before the start index\n      if (start > 1) {\n        pages.unshift(\"...\");\n      }\n      //add an ellipsis at the end if there are more pages after the end index\n      if (end < totalPages) {\n        pages.push(\"...\");\n      }\n      // return the array of pages\n      return pages;\n    },\n    // define a method to go to the previous page\n    prevPage() {\n      // check if the current page is not the first page\n      if (this.currentPage > 1) {\n        // decrement the current page by 1\n        this.currentPage--;\n        this.getUnits();\n      }\n    },\n    // define a method to go to the next page\n    nextPage() {\n      // check if the current page is not the last page\n      if (this.currentPage < this.totalPages) {\n        // increment the current page by 1\n        this.currentPage++;\n        this.getUnits();\n      }\n    },\n    // define a method to go to a specific page\n    goToPage(page) {\n      // check if the page is valid and not equal to the current page\n      if (page > 0 && page <= this.totalPages && page !== this.currentPage) {\n        // set the current page to the given page\n        this.currentPage = page;\n        this.getUnits();\n      }\n    },\n    downloadUnits() {\n      this.download = \"Please wait..\";\n      let str = this.category;\n      let cleanedStr = str.replace(/\\(\\d+\\)/, '').trim();\n      let str2 = this.unitStatus;\n      let cleanedStr2 = str2.replace(/\\(\\d+\\)/, '').trim();\n      const data = new FormData();\n      data.append(\"function\", \"downloadUnits\");\n      data.append(\"propertyID\", sessionStorage.getItem(\"propertyID\"));\n      data.append(\"category\", cleanedStr);\n      data.append(\"unitStatus\", cleanedStr2);\n      executeDownload(data, rent).then(response => {\n        this.download = \"Download Report\";\n        const link = document.createElement('a');\n        link.href = URL.createObjectURL(response.data);\n        link.download = \"Report.csv\";\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      });\n    },\n    getProperty() {\n      const data = new FormData();\n      data.append(\"function\", \"getProperty\");\n      data.append(\"propertyID\", sessionStorage.getItem(\"propertyID\"));\n      execute(data, rent).then(res => {\n        if (res.data.success) {\n          this.property = res.data.data.property;\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    getUnitCategory() {\n      this.unitCategories.splice(0);\n      const data = new FormData();\n      data.append(\"function\", \"getUnitCategory\");\n      execute(data, rent).then(res => {\n        if (res.data.success) {\n          this.unitCategories = res.data.data.unitCategories;\n\n          //preselections\n          this.unitCategories.forEach((value, index) => {\n            if (this.unit.category === value.category) {\n              this.unitCategory = this.unitCategories[index];\n            }\n          });\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    getUnitStatus() {\n      this.unitStatuses.splice(0);\n      const data = new FormData();\n      data.append(\"function\", \"getUnitStatus\");\n      execute(data, rent).then(res => {\n        if (res.data.success) {\n          this.unitStatuses = res.data.data.unitStatuses;\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    sumNumbers(a, b) {\n      // Convert strings to numbers if they are strings\n      if (typeof a === 'string') {\n        a = parseFloat(a);\n      }\n      if (typeof b === 'string') {\n        b = parseFloat(b);\n      }\n\n      // Check if both parameters are valid numbers\n      if (isNaN(a) || isNaN(b)) {\n        return \"Both parameters must be valid numbers\";\n      }\n      return a + b;\n    },\n    numberFormat(num) {\n      const britishNumberFormatter = new Intl.NumberFormat(\"en-GB\");\n      return britishNumberFormatter.format(num);\n    },\n    selectedUnit(item) {\n      this.unit = item;\n      this.selectedUnits.splice(0);\n      this.selectedUnits.push(item);\n      this.amount = this.unit.monthlyRent;\n      this.getUnitCategory();\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return \"Invalid Date\";\n      const date = new Date(dateStr);\n      if (isNaN(date.getTime())) return \"Invalid Date\";\n      const options = {\n        year: 'numeric',\n        month: 'short',\n        day: '2-digit',\n        hour: 'numeric',\n        minute: '2-digit',\n        hour12: true\n      };\n      const formattedDate = date.toLocaleDateString('en-US', options);\n      const formattedTime = date.toLocaleTimeString('en-US', options);\n      return formattedDate.replace(',', '') + ' ' + formattedTime;\n    },\n    getUnits() {\n      this.loading = true;\n      this.units.splice(0);\n      let str = this.category;\n      let cleanedStr = str.replace(/\\(\\d+\\)/, '').trim();\n      let str2 = this.unitStatus;\n      let cleanedStr2 = str2.replace(/\\(\\d+\\)/, '').trim();\n      const data = new FormData();\n      data.append(\"function\", \"getUnits\");\n      data.append(\"propertyID\", sessionStorage.getItem(\"propertyID\"));\n      data.append(\"category\", cleanedStr);\n      data.append(\"unitStatus\", cleanedStr2);\n      data.append(\"keyword\", this.search);\n      data.append(\"page\", this.currentPage);\n      data.append(\"rows_per_page\", this.pageSize);\n      execute(data, rent).then(res => {\n        this.loading = false;\n        if (res.data.success) {\n          this.units = res.data.data.units;\n          this.totalMonthyly = this.units.reduce((acc, cur) => {\n            let receiptAmount = Number(cur.monthlyRent);\n            return acc + receiptAmount;\n          }, 0);\n          this.totalArreas = this.units.reduce((acc, cur) => {\n            let receiptAmount = Number(cur.arrears);\n            return acc + receiptAmount;\n          }, 0);\n          this.totalAmount = this.totalMonthyly + this.totalArreas;\n          this.summary.count = res.data.data.summary.count;\n          //  this.summary.total = res.data.data.summary.totalReceiptAmount\n          this.totalPages = Math.ceil(this.summary.count / this.pageSize);\n        } else {}\n      }).catch(e => {\n        //alert(e.message);\n        this.message = e.message;\n      });\n    },\n    getVacateReasons() {\n      const data = new FormData();\n      data.append(\"function\", \"getVacateReasons\");\n      execute(data, rent).then(res => {\n        if (res.data.success) {\n          this.vacateReasons = res.data.data.vacateReasons;\n        } else {}\n      }).catch(e => {\n        //alert(e.message);\n        this.message = e.message;\n      });\n    },\n    updateUnits() {\n      const data = new FormData();\n      data.append(\"function\", \"updateUnits\");\n      data.append(\"unit\", JSON.stringify(this.unit));\n      data.append(\"sessionNames\", sessionStorage.getItem(\"sessionNames\"));\n      data.append(\"sessionIdNo\", sessionStorage.getItem(\"sessionIdNo\"));\n      execute(data, rent).then(res => {\n        if (res.data.success) {\n          this.getProperty();\n        } else {}\n      }).catch(e => {\n        //alert(e.message);\n        this.message = e.message;\n      });\n    },\n    vacateUnit() {\n      //check if OTP Matches\n      if (this.otpMessage1 == this.otp1 && this.otpMessage2 == this.otp2) {\n        const data = new FormData();\n        data.append(\"function\", \"vacateUnit\");\n        data.append(\"effectiveFrom\", this.effectiveFrom);\n        data.append(\"id\", this.unit.id);\n        execute(data, rent).then(res => {\n          if (res.data.success) {\n            alert(res.data.message);\n            this.getUnits();\n          } else {\n            alert(res.data.message);\n          }\n        }).catch(e => {\n          //alert(e.message);\n          this.message = e.message;\n        });\n      } else {\n        alert(\"One or more invalid OTP\");\n      }\n    },\n    sendVacateOTP() {\n      this.otp1 = Math.floor(1000 + Math.random() * 9000);\n      this.otp2 = Math.floor(1000 + Math.random() * 9000);\n      const data = new FormData();\n      data.append(\"function\", \"sendVacateOTP\");\n      data.append(\"description\", this.unit.unitNo + ' ' + this.unit.category + ' ' + this.unit.occupants + ' ' + this.unit.phoneNumber + ' ' + this.unit.property);\n      data.append(\"otp1\", this.otp1);\n      data.append(\"otp2\", this.otp2);\n      execute(data, rent).then(res => {\n        if (res.data.success) {} else {}\n      }).catch(e => {\n        //alert(e.message);\n        this.message = e.message;\n      });\n    },\n    selectedIncomeType(event) {\n      const value = event.target.value;\n      const result = JSON.parse(value);\n      this.getFeesAndChargesBilling(result.incomeTypeId);\n    },\n    getIncomeTypes() {\n      this.message = null;\n      this.billingModule.incomeTypes.splice(0);\n      this.feesAndCharges.splice(0);\n      const data = new FormData();\n      data.append(\"function\", \"getIncomeTypes\");\n      data.append(\"incomeTypePrefix\", \"HSRENT\");\n      data.append(\"keyword\", \"Housing\");\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.billingModule.incomeTypes = res.data.data.incomeTypes;\n          this.getFeesAndChargesBilling(this.billingModule.incomeTypes[0].incomeTypeId);\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    getFeesAndChargesBilling(incomeTypeId) {\n      this.message = null;\n      this.feesAndCharges.splice(0);\n      const data = new FormData();\n      data.append(\"function\", \"getFeesAndCharges\");\n      data.append(\"incomeTypeId\", incomeTypeId);\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.feesAndCharges = res.data.data.feesAndCharges;\n          this.selectedFeeAndChargeFirstOne();\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    selectedFeeAndCharge(event) {\n      const data = JSON.parse(event.target.value);\n      // this.amount = data.unitFeeAmount\n      this.feeID = data.feeId;\n      this.unitFeeAmount = data.unitFeeAmount;\n      this.feesAndChargeItems = [];\n      this.feesAndChargeItems.splice(0);\n      this.feesAndChargeItems.push(data);\n    },\n    selectedFeeAndChargeFirstOne() {\n      const data = this.feesAndCharges[0];\n      // this.amount = data.unitFeeAmount\n      this.feeID = data.feeId;\n      this.unitFeeAmount = data.unitFeeAmount;\n      this.feesAndChargeItems = [];\n      this.feesAndChargeItems.splice(0);\n      this.feesAndChargeItems.push(data);\n    },\n    generateFeeAndChargesItem() {\n      // Loop through the selectedVehicles array\n      for (let item of this.selectedUnits) {\n        // Create a new object with the mapped values\n        let newItem = {\n          feeId: this.feeID,\n          // Map feeID to feeId\n          unitFeeAmount: this.amount,\n          // Map amount to unitFeeAmount\n          customer: item.unitNo + \"|\" + item.idNo + \"|\" + item.id //unitNo | idNo | id\n        };\n        // Push the new object to the feesAndChargeItems array\n        this.feesAndChargeItems.splice(0);\n        this.feesAndChargeItems.push(newItem);\n      }\n      this.addToBill();\n    },\n    addToBill() {\n      for (const {\n        typeDescription,\n        feeId,\n        feeDescription,\n        unitFeeAmount,\n        accountNo,\n        costCenterNo,\n        incomeTypeId,\n        customer\n      } of this.feesAndChargeItems) {\n        this.totalAmount += parseFloat(unitFeeAmount);\n        this.billItem.push({\n          typeDescription,\n          feeDescription,\n          unitFeeAmount: unitFeeAmount,\n          accountNo,\n          costCenterNo,\n          incomeTypeId,\n          revenueStreamItem: this.unit.unitNo,\n          feeId,\n          amount: unitFeeAmount,\n          customer: customer,\n          zone: this.unit.zone,\n          subCountyID: this.unit.subCountyID,\n          subCountyName: this.unit.subCountyName,\n          wardID: this.unit.wardID,\n          wardName: this.unit.wardName,\n          idNo: sessionStorage.getItem(\"sessionIdNo\"),\n          phoneNumber: sessionStorage.getItem(\"sessionPhoneNumber\"),\n          names: sessionStorage.getItem(\"sessionNames\"),\n          customerPhoneNumber: this.unit.phoneNumber,\n          description: this.unit.unitNo\n        });\n      }\n    },\n    generateBill() {\n      this.generateFeeAndChargesItem();\n      this.paymentMethod = false;\n      this.paymentPanel = true;\n      this.transactionSummary = false;\n      this.transactionCompleted = false;\n      this.message = \"Generating Bill...please wait... \";\n      const data = new FormData();\n      data.append(\"function\", \"generateBill3\");\n      data.append(\"billItem\", JSON.stringify(this.billItem));\n      execute(data, biller).then(res => {\n        this.message = res.data.message;\n        if (res.data.success) {\n          this.billDetails = res.data.data.bill.billDetails;\n          this.billInfo = res.data.data.bill.billInfo;\n          this.paymentData.amount = res.data.data.bill.billDetails.billBalance;\n          this.paymentData.accNo = res.data.data.bill.billDetails.billNo;\n          this.paymentData.payBillNo = res.data.data.billGenerated.payBillNo;\n          this.paymentData.sessionNames = sessionStorage.getItem(\"sessionNames\");\n          this.paymentData.sessionIdNo = sessionStorage.getItem(\"sessionIdNo\");\n          this.paymentData.sessionPhoneNumber = sessionStorage.getItem(\"sessionPhoneNumber\");\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    printBill() {\n      localStorage['params'] = JSON.stringify({\n        billNo: this.billDetails.billNo\n      });\n      const routeData = this.$router.resolve({\n        name: 'bill'\n      });\n      window.open(routeData.href, '_blank');\n    },\n    printReceipt() {\n      if (this.receiptDetails.receiptNo == null) {\n        alert(\"Try again later\");\n      } else {\n        //  this.$refs.closeReceived.click();\n        localStorage['params'] = JSON.stringify({\n          receiptNo: this.receiptDetails.receiptNo\n        });\n        const routeData = this.$router.resolve({\n          name: 'receipt'\n        });\n        window.open(routeData.href, '_blank');\n      }\n    },\n    showPaymentMethod() {\n      this.paymentMethod = true;\n      this.paymentPanel = false;\n      this.transactionSummary = false;\n      this.transactionCompleted = false;\n    },\n    showTransactionSummary(paymentMode) {\n      this.paymentData.paymentMode = paymentMode;\n      if (paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if (paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      this.paymentMethod = false;\n      this.paymentPanel = false;\n      this.transactionSummary = true;\n      this.transactionCompleted = false;\n    },\n    makePayment() {\n      if (this.paymentData.paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if (this.paymentData.paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      this.message = \"Payment Request sent\";\n      this.paymentData.phoneNumber = this.phoneNumber;\n      const data = new FormData();\n      data.append(\"function\", \"makePayment\");\n      data.append(\"paymentData\", JSON.stringify(this.paymentData));\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.paymentMethod = false;\n          this.paymentPanel = false;\n          //start checking payment\n          this.timer = setInterval(() => {\n            this.checkPayment();\n          }, 3000);\n        } else {\n          this.rate = null;\n          alert(res.data.message);\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    },\n    checkPayment() {\n      this.randomNumber = Math.floor(Math.random() * 3) + 1;\n      if (this.randomNumber === 1) {\n        this.message = \"Waiting for payment.\";\n      }\n      if (this.randomNumber === 2) {\n        this.message = \"Waiting for payment..\";\n      }\n      if (this.randomNumber === 3) {\n        this.message = \"Waiting for payment...\";\n      }\n      const data = new FormData();\n      data.append(\"function\", \"checkPayment\");\n      data.append(\"accountRef\", this.paymentData.accNo);\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.message = null;\n          clearInterval(this.timer);\n          this.receipt = true;\n          this.paymentData.success = false;\n          this.transaction = res.data.data.transaction;\n          this.receiptDetails = res.data.data.receipt.receiptDetails;\n          //Close the modal\n          this.transactionSummary = false;\n          this.transactionCompleted = true;\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    },\n    formatPrice(value) {\n      var formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'KES',\n        minimumFractionDigits: 2\n      });\n      return formatter.format(value);\n    },\n    gotTo(route) {\n      router.push(route);\n    }\n  }\n};","map":{"version":3,"names":["biller","execute","executeDownload","getRight","rent","NavigationBar","router","ToolBarHousing","name","components","data","amount","search","download","loading","currentPage","totalPages","pageSize","summary","count","total","category","unitStatus","unitCategories","id","unitCategory","totalMonthyly","totalArreas","totalAmount","message","message1","message2","otpMessage1","otpMessage2","otp1","otp2","description","effectiveFrom","reason","units","propertyID","property","unitNo","occupants","monthlyRent","arrears","phoneNumber","idNo","updated","lastPaymentDate","nextPaymentDate","unit","vacateReasons","selectedUnits","billingModule","incomeType","incomeTypeId","incomeTypeDescription","incomeTypePrefix","fundDescription","status","incomeTypes","feesAndCharges","feeId","feeDescription","unitOfMeasure","unitFeeAmount","accountNo","feeType","accountDesc","costCenterNo","zone","typeDescription","feesAndChargeItems","customer","billItem","billDetails","billNo","incomeTypeID","feeID","detailAmount","receiptAmount","billBalance","wardID","subCountyID","dateCreated","billInfo","paymentData","bankReceiptNo","accNo","payBillNo","success","paymentMode","sessionNames","sessionIdNo","sessionPhoneNumber","alert","info","failed","transactionCompleted","transactionSummary","paymentPanel","paymentMethod","unitStatuses","subCountyName","wardName","watch","newPageSize","getUnits","totalItems","newTotalPages","Math","ceil","length","mounted","getProperty","getVacateReasons","getIncomeTypes","getUnitStatus","menuAccess","methods","FormData","append","sessionStorage","getItem","then","res","catch","e","pagination","maxVisibleButtons","pages","start","floor","end","i","push","unshift","prevPage","nextPage","goToPage","page","downloadUnits","str","cleanedStr","replace","trim","str2","cleanedStr2","response","link","document","createElement","href","URL","createObjectURL","body","appendChild","click","removeChild","getUnitCategory","splice","forEach","value","index","sumNumbers","a","b","parseFloat","isNaN","numberFormat","num","britishNumberFormatter","Intl","NumberFormat","format","selectedUnit","item","formatDate","dateStr","date","Date","getTime","options","year","month","day","hour","minute","hour12","formattedDate","toLocaleDateString","formattedTime","toLocaleTimeString","reduce","acc","cur","Number","updateUnits","JSON","stringify","vacateUnit","sendVacateOTP","random","selectedIncomeType","event","target","result","parse","getFeesAndChargesBilling","selectedFeeAndChargeFirstOne","selectedFeeAndCharge","generateFeeAndChargesItem","newItem","addToBill","revenueStreamItem","names","customerPhoneNumber","generateBill","bill","billGenerated","printBill","localStorage","routeData","$router","resolve","window","open","printReceipt","receiptDetails","receiptNo","showPaymentMethod","showTransactionSummary","makePayment","timer","setInterval","checkPayment","rate","randomNumber","clearInterval","receipt","transaction","formatPrice","formatter","style","currency","minimumFractionDigits","gotTo","route"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/HMIS/hospital-management/src/components/housing/HousingDetail.vue"],"sourcesContent":["<template>\n\n  <head>\n\n    <meta charset=\"utf-8\" />\n    <title>Hotline Transporters Sacco | All invoices</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta content=\"Rental management system by Nouveta LTD\" name=\"description\" />\n    <meta content=\"Kelvin Njuguna\" name=\"author\" />\n    <!-- App favicon -->\n    <link rel=\"shortcut icon\" href=\"assets/images/favicon.svg\">\n    <!-- droping file -->\n    <link href=\"assets/libs/dropzone/min/dropzone.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n\n    <!-- DataTables -->\n    <link href=\"assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <link href=\"assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n\n    <!-- Bootstrap Css -->\n    <link href=\"assets/css/bootstrap.min.css\" id=\"bootstrap-style\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- Bootstrap select styling -->\n    <link rel=\"stylesheet\" href=\"https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css\">\n    <!-- Icons Css -->\n    <link href=\"assets/css/icons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- App Css-->\n    <link href=\"assets/css/app.min.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- custom Css-->\n    <link href=\"assets/css/custom.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n\n  </head>\n\n  <body @contextmenu.prevent data-sidebar=\"dark\">\n\n  <!-- Begin page -->\n  <div id=\"layout-wrapper\">\n\n\n    <NavigationBar/>\n\n    <!-- ============================================================== -->\n    <!-- Start right Content here -->\n    <!-- ============================================================== -->\n    <div class=\"content-minimize\">\n\n      <div class=\"page-content\">\n        <div class=\"container-fluid\">\n\n          <!-- start page title -->\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <div class=\"page-title-box d-sm-flex align-items-center justify-content-between\">\n                <h4 class=\"mb-sm-0 font-size-18\">Rentings for Modern Market</h4>\n\n                <div class=\"page-title-right\">\n                  <ol class=\"breadcrumb m-0\">\n                    <li class=\"breadcrumb-item\"><a href=\"index.html\">Dashboards</a></li>\n                    <li class=\"breadcrumb-item\"><a href=\"housing-quick-stat.html\">Housing</a></li>\n                    <li class=\"breadcrumb-item\"><a href=\"housing-register.html\">Rentals Register</a></li>\n                    <li class=\"breadcrumb-item active\"><a href=\"#\">Modern Market</a></li>\n                  </ol>\n                </div>\n\n              </div>\n            </div>\n          </div>\n          <!-- end page title -->\n\n          <!-- tool bar -->\n          <ToolBarHousing/>\n          <!-- end page title -->\n          <div class=\"row\">\n            <div class=\"col-12\">\n              <div class=\"card\">\n                <div class=\"card-header bg-white  w-100 border-bottom d-flex justify-content-between align-items-center\">\n                  <h4 class=\"card-title text-uppercase\">\n                    {{property.property}}\n                  </h4>\n                  <div class=\"d-flex\">\n\n                    <a @click=\"gotTo('housing-new-unit')\" type=\"button\" class=\"btn btn-success text-uppercase dropdown-toggle option-selector me-3\">\n                      <i class=\"bx bx-plus font-size-16\"></i> <span class=\"pl-1 d-md-inline\">Add Unit</span>\n                    </a>\n\n\n\n                  </div>\n                </div>\n                <div class=\"card-header bg-white pt-0 pr-0 p-0 d-flex justify-content-between align-items-center w-100 border-bottom\">\n\n\n                  <div class=\"btn-toolbar p-3 d-flex justify-content-between align-items-center w-100\" role=\"toolbar\">\n                    <div class=\"flex-grow-1\">\n                      <div class=\"search-box mb-0 me-3\">\n                        <div class=\"position-relative\">\n                          <input v-model=\"search\" type=\"text\" class=\"form-control bg-light border-light rounded\" placeholder=\"Search...\" fdprocessedid=\"husj3l\">\n                          <i class=\"bx bx-search-alt search-icon\"></i>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div>\n                      <div class=\"input-group  fw-semibold text-uppercase me-3\">\n                        <label class=\"input-group-text text-uppercase\">Unit type {{category}}</label>\n\n\n                        <select class=\"form-select\"  v-model=\"category\">\n                          <option value=\"\" selected=\"\">All Unit Types (n)</option>\n                          <option v-for=\"(item, index) in unitCategories\" :key=\"`${index}`\">{{item.category}} ({{numberFormat(item.count)}})</option>\n\n                        </select>\n\n                      </div>\n                    </div>\n\n                    <div>\n\n                      <div class=\"input-group  fw-semibold text-uppercase me-3\">\n                        <label class=\"input-group-text text-uppercase\">Unit Status</label>\n                        <select class=\"form-select\" value=\"unitStatus\" v-model=\"unitStatus\">\n                          <option value=\"\" selected=\"\">All Units (n)</option>\n                          <option v-for=\"(item, index) in unitStatuses\" :key=\"`${index}`\">{{item.status}} ({{numberFormat(item.count)}})</option>\n                        </select>\n\n                      </div>\n                    </div>\n\n                    <div class=\"d-flex\">\n                      <div class=\"d-fle align-items-center me-3 pe-3 d-none\">\n                        <span class=\"pr-3 fw-semibold\">From:</span>\n                        <input class=\"form-control\" placeholder=\"Start date\" type=\"date\">\n                        <span class=\"px-3 fw-semibold\">TO:</span>\n                        <input class=\"form-control\" placeholder=\"Start date\" type=\"date\">\n                      </div>\n                      <!--                      <button  data-bs-toggle=\"modal\" data-bs-target=\".download-modal\" type=\"button\" class=\"btn btn-primary dropdown-toggle option-selector me-3 text-capitalize\">\n                                              <i class=\"bx bxs-download  font-size-16\"></i> <span class=\"pl-1 d-md-inline\">Download Report</span>\n                                            </button>\n                                            -->\n                      <button @click=\"downloadUnits()\" type=\"button\" class=\"btn btn-primary dropdown-toggle option-selector me-3 text-capitalize\">\n                        <i class=\"bx bxs-download  font-size-16\"></i> <span class=\"pl-1 d-md-inline\">Download Report</span>\n                      </button>\n\n                    </div>\n\n\n                  </div>\n\n\n                  <div class=\"btn-toolbar p-3 align-items-center d-none animated delete-tool-bar\" role=\"toolbar\">\n                    <button type=\"button\"  data-bs-toggle=\"modal\" data-bs-target=\".download-modal\" class=\"btn btn-primary waves-effect btn-label waves-light me-3\"><i class=\"mdi mdi-printer label-icon\"></i> Print Selected Invoices</button>\n                  </div>\n                </div>\n                <div class=\"card-body\">\n                  <div class=\"table-responsive overflow-visible\">\n\n                    <table class=\"table align-middle table-hover  contacts-table table-striped \" id=\"\">\n                      <thead class=\"table-light\">\n                      <tr class=\"table-dark\">\n                        <th>Stall No./Name</th>\n                        <th>Stall Type</th>\n                        <th scope=\"col\">Tenant</th>\n                        <th scope=\"col\">Status</th>\n                        <th>Last Payment Date</th>\n                        <th>Next Date</th>\n                        <th>Months in Arreas</th>\n                        <th class=\"text-right\">Monthly Rent</th>\n                        <th class=\"text-right\">Arrears</th>\n                        <th class=\"text-right\">Total</th>\n                        <td></td>\n                      </tr>\n                      </thead>\n                      <tbody>\n                      <tr :key=\"index\" :value=\"item\" v-for=\"(item, index) in units\">\n                        <th>{{item.unitNo}}</th>\n                        <th>{{item.category}}</th>\n                        <td><a href=\"javascript: void(0)\">{{item.occupants}}</a></td>\n                        <td>{{item.status}}</td>\n                        <td>{{formatDate(item.lastPaymentDate)}}</td>\n                        <td>{{formatDate(item.nextPaymentDate)}}</td>\n                        <td>{{numberFormat(item.arrears)}}</td>\n                        <th class=\"table-info text-right text-black\">{{numberFormat(item.monthlyRent)}}</th>\n                        <th class=\"table-danger text-right text-black\">{{numberFormat(item.arrears)}}</th>\n                        <th class=\"table-success text-right text-black\">{{sumNumbers(item.monthlyRent,item.arrears)}}</th>\n                        <td class=\"text-uppercase fw-bold text-right\">\n\n                          <div class=\"dropdown\">\n                            <button  role=\"button\" data-bs-toggle=\"dropdown\" aria-haspopup=\"true\" class=\"btn btn-sm btn-warning text-black waves-effect btn-label waves-light text-uppercase\"><i class=\"mdi mdi-arrow-down-drop-circle label-icon\"></i> More Options</button>\n\n                            <div class=\"dropdown-menu dropdown-menu-end\">\n                              <a @click=\"selectedUnit(item)\" class=\"dropdown-item\" href=\"javascript: void(0)\" data-toggle=\"modal\" data-target=\".vaccate-modal\"><i class=\"font-size-15 mdi mdi-eye-plus-outline me-3\"></i>Vacate Unit</a>\n                              <a @click=\"selectedUnit(item)\" class=\"dropdown-item\" href=\"javascript: void(0)\" data-toggle=\"modal\" data-target=\"#bill-client\" ><i class=\"font-size-15 mdi mdi mdi-receipt me-3\"></i>Bill Client</a>\n                              <a @click=\"selectedUnit(item)\" class=\"dropdown-item\" href=\"javascript: void(0)\"><i class=\"font-size-15 mdi mdi-microsoft-excel me-3\"></i>Statements</a>\n                              <a v-if=\"getRight('EDIT HOUSE RENT')\" @click=\"selectedUnit(item)\" class=\"dropdown-item\" href=\"javascript: void(0)\" data-toggle=\"modal\" data-target=\".edit-modal\"><i class=\"font-size-15 mdi mdi-file-document-edit me-3\"></i>Edit</a>\n                              <a @click=\"selectedUnit(item)\" class=\"dropdown-item\" href=\"javascript: void(0)\" data-toggle=\"modal\" data-target=\".send-sms-modal\"><i class=\"font-size-15 mdi mdi-chat-processing me-3\"></i>Tenancy History</a>\n\n                            </div>\n                          </div>\n\n\n                          <!-- <button class=\"btn btn-danger btn-sm text-uppercase\" data-toggle=\"modal\" data-target=\".vaccate-modal\">Vacate Stall</button>\n                          <button class=\"btn btn-info btn-sm text-uppercase\" data-toggle=\"modal\" data-target=\".edit-modal\">Edit</button>\n                          <button class=\"btn btn-info btn-sm text-uppercase\" data-toggle=\"modal\" data-target=\".edit-modal\">Receive Payment</button>\n                          <a href=\"housing-marlet-details-rental-statements.html\" class=\"btn btn-primary btn-sm text-uppercase\" >Statements</a>\n                          <a href=\"housing-market-details-history.html\" class=\"btn btn-dark btn-sm text-uppercase\" >Tenancy History</a> -->\n                        </td>\n                      </tr>\n                      </tbody>\n                      <tfoot class=\"table-dark\">\n                      <tr>\n                        <th colspan=\"1\">\n                          {{numberFormat(units.length)}} Units\n                        </th>\n                        <th colspan=\"4\">\n\n                        </th>\n\n                        <th></th>\n                        <th></th>\n                        <th class=\"text-right text-info text-uppercase\">{{numberFormat(totalMonthyly)}}</th>\n\n                        <th class=\"text-right text-danger text-uppercase\">{{numberFormat(totalArreas)}}</th>\n\n\n                        <th class=\"text-right text-success text-uppercase\">{{numberFormat(totalAmount)}}</th>\n                        <th></th>\n\n\n                      </tr>\n\n                      </tfoot>\n                    </table>\n\n                    <div v-if=\"loading\" class=\"card-body px-5 d-flex flex-column justify-items-center align-items-center text-center d-flex justify-content-center\">\n                      <div class=\"p-5 py-0 pt-3\">\n                        <div class=\"p-5\">\n                          <div class=\"spinner-border text-info m-1\" role=\"status\">\n                            <span class=\"sr-only text-uppercase\">Loading...</span>\n                          </div>\n                        </div>\n                      </div>\n                      <h4 class=\"text-uppercase\">Loading Data</h4>\n                      <div class=\"col-sm-12 col-md-8 col-lg-5\">\n                        <p>We are fetching the data for you. It will be ready soon. Please wait and have fun. Thank you for your interest.</p>\n\n                      </div>\n                    </div>\n                    <div v-if=\"units.length<1 & loading === false\" class=\"card-body d-sm-none d-md-block px-5 d-flex flex-column justify-items-center align-items-center text-center\">\n                      <div class=\"p-5 py-0 pt-3\">\n                        <img :src=\"'./assets/images/no-results.png'\" class=\"img mb-4\"  alt=\"No search results\"/>\n                      </div>\n                      <h4>No Results To Show</h4>\n                      <p>Sorry, we could not find any results that match your search or filter criteria. Please try using different keywords or filters.</p>\n                    </div>\n\n                  </div>\n\n                </div>\n\n                <div class=\"card-footer bg-white\">\n                  <nav aria-label=\"Page navigation example \"\n                       class=\"d-flex align-items-center justify-content-between\">\n\n                    <div class=\"d-flex align-items-center\">\n                                            <span class=\"pr-3 pb-0 mb-0 font-13px\">\n                                                <span>Rows Per Page</span>\n                                            </span>\n                      <select class=\"form-select w-auto font-13px \" v-model=\"pageSize\">\n                        <option value=\"10\">10 Rows</option>\n                        <option value=\"25\">25 Rows</option>\n                        <option value=\"50\">50 Rows</option>\n                        <option value=\"100\">100 Rows</option>\n                        <option value=\"150\">150 Rows</option>\n                        <option value=\"200\">200 Rows</option>\n                        <option value=\"5000\">500 Rows</option>\n                        <option value=\"10000\">10000 Rows</option>\n                        <option value=\"20000\">20000 Rows</option>\n                        <option value=\"10000000000\">All Rows</option>\n                      </select>\n                    </div>\n\n                    <ul class=\"pagination\">\n                      <!-- add a class of disabled and an attribute of disabled when the current page is the first page -->\n                      <li class=\"page-item\" :class=\"{ disabled: currentPage === 1 }\">\n                        <a class=\"page-link\" tabindex=\"-1\" @click=\"prevPage\" :disabled=\"currentPage === 1\">Previous</a>\n                      </li>\n                      <!-- replace the v-for directive with the pagination function call -->\n                      <li v-for=\"page in pagination(currentPage, totalPages, 3)\" :key=\"page\" class=\"page-item\" :class=\"{ active: currentPage === page }\">\n                        <!-- check if the page is an ellipsis and display it as plain text -->\n                        <span v-if=\"page === '...'\" class=\"page-link\">{{ page }}</span>\n                        <!-- otherwise, display it as a clickable link -->\n                        <a v-else class=\"page-link\" @click=\"goToPage(page)\">{{ page }}</a>\n                      </li>\n                      <!-- add a class of disabled and an attribute of disabled when the current page is the last page -->\n                      <li class=\"page-item\" :class=\"{ disabled: currentPage === totalPages }\">\n                        <a class=\"page-link\"  @click=\"nextPage\" :disabled=\"currentPage === totalPages\">Next</a>\n                      </li>\n                    </ul>\n\n                  </nav>\n                </div>\n              </div>\n            </div>\n            <!-- end col -->\n          </div>\n\n          <!-- end row -->\n        </div>\n        <!-- container-fluid -->\n      </div>\n      <!-- End Page-content -->\n\n      <!-- receipting modal -->\n      <div class=\"modal fade download-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myLargeModalLabel\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-md modal-dialog-centered\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"myLargeModalLabel\">Download Report</h5>\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"row\">\n                <div class=\"col-12\">\n                  <address>\n                    <strong class=\"text-capitalize\">Report Title</strong><br>\n                    Revenue Collections By Subcounties in Homabay County\n                  </address>\n                </div>\n\n                <div class=\"col-12\">\n                  <label><strong>Report Date Range</strong></label>\n                </div>\n                <div class=\"col-12\">\n                  <div class=\"row\">\n                    <div class=\"col-xl-6 col-sm-6\">\n                      <div class=\"mb-3\">\n                        <label class=\"form-label\">Date From</label>\n                        <input class=\"form-control\" placeholder=\"Start date\" type=\"date\">\n                      </div>\n                    </div>\n\n                    <div class=\"col-xl-6 col-sm-6\">\n                      <div class=\"mb-3\">\n                        <label class=\"form-label\">Date To</label>\n                        <input class=\"form-control\" placeholder=\"Start date\" type=\"date\">\n                      </div>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <label><strong>Select File Type</strong></label>\n                  <select class=\"form-select\">\n                    <option>Select Document Type</option>\n                    <option>PDF file</option>\n                    <option>Excel File</option>\n                  </select>\n                </div>\n\n                <div class=\"col-12\">\n                  <button  type=\"button\" class=\"btn btn-primary dropdown-toggle option-selector text-capitalize w-100 mt-5\">\n                    <i class=\"bx bxs-download  font-size-16\"></i> <span class=\"pl-1 d-md-inline\">Download Report</span>\n                  </button>\n                </div>\n\n              </div>\n\n            </div>\n\n          </div>\n          <!-- /.modal-content -->\n        </div>\n        <!-- /.modal-dialog -->\n      </div>\n      <!-- end of receipting modal -->\n\n      <!-- vaccating modal -->\n      <div class=\"modal fade vaccate-modal\" id=\"new-business\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered modal-md\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title text-capitalize\" id=\"exampleModalLongTitle\">{{this.unit.unitNo +' '+ this.unit.category  +' '+ this.unit.occupants  +' '+ this.unit.phoneNumber  +' '+ this.unit.property}}</h5>\n              <button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body steps-container\">\n              <div class=\"row the-step biz-info active\">\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Reason for Vacating the stall</label>\n\n                  <select class=\"form-select\" v-model=\"reason\" >\n\n                    <option selected=\"\" value=\"\">Select Options</option>\n                    <option v-for=\"(item, index) in vacateReasons\" :key=\"`${index}`\"><a class=\"dropdown-item\" href=\"#\">{{item.reason}}</a></option>\n\n                  </select>\n\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Effective from</label>\n                  <input v-model=\"effectiveFrom\" class=\"form-control\" type=\"date\" placeholder=\"Select date\" id=\"example-date-input\">\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">More Details</label>\n                  <textarea v-model=\"description\" rows=\"\" cols=\"\" class=\"form-control\" placeholder=\"Start typing ...\"></textarea>\n                </div>\n              </div>\n\n              <div class=\"row the-step biz-additional-info d-none\">\n                <div class=\"col-12\">\n                  <div class=\"alert alert-warning\" role=\"alert\">\n                    You are changing something that needs two OTPs, which I sent to the first and second approver. You need to get the OTPs from them and enter them in order, because if you enter them wrong, you can't continue. You also need to enter them exactly as they are, without any spaces or punctuation marks. Thank you for your cooperation.\n                  </div>\n                </div>\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">First Approver</label>\n                  <input v-model=\"otpMessage1\" class=\"form-control \" placeholder=\"Enter OTP\">\n                  <p style=\"color: red\">{{message1}}</p>\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Second Approver</label>\n                  <input v-model=\"otpMessage2\" class=\"form-control \" placeholder=\"Enter OTP\">\n                  <p style=\"color: red\">{{message2}}</p>\n                </div>\n\n              </div>\n\n\n            </div>\n            <div class=\"modal-footer\">\n              <div class=\"d-flex modal-next-prev-container\">\n                <button type=\"button\" class=\"btn btn-outline-secondary btn-prev waves-effect waves-effect waves-light me-3\">\n                  <i class=\"bx bx-left-arrow-alt font-size-16 align-middle me-2\"></i> Previous\n                </button>\n\n                <button @click=\"sendVacateOTP()\" type=\"button\" class=\"btn btn-primary waves-effect waves-effect waves-light btn-next\">\n                  Next <i class=\"bx bx-right-arrow-alt font-size-16 align-middle me-2\"></i>\n                </button>\n\n                <button data-dismiss=\"modal\"  @click=\"vacateUnit()\" type=\"button\" class=\"btn btn-submit btn-success d-none ml-3 ms-3 waves-effect waves-effect waves-light btn-next\">\n                  <i class=\"bx bx-check-double font-size-16 align-middle me-2\"></i> Finish\n                </button>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- end of vacating modal -->\n\n\n      <!-- billing on the spot -->\n      <div class=\"modal fade\" id=\"bill-client\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" role=\"dialog\" aria-bs-labelledby=\"exampleModalCenterTitle\" aria-bs-hidden=\"true\" data-bs-keyboard=\"false\" data-bs-backdrop=\"static\">\n        <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header d-none\">\n              <span class=\"badge badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n              <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle close-modal\" data-dismiss=\"modal\"  aria-label=\"Close\">\n                            <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                                <i class=\"bx bx-x\"></i>\n                            </span>\n              </button>\n\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"d-flex justify-content-between align-items-center\">\n                <span class=\"badge  badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n                <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle pull-right close-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\n                            <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                                <i class=\"bx bx-x\"></i>\n                            </span>\n                </button>\n              </div>\n\n              <div class=\"payment-panel-parent\">\n\n                <div class=\"payment-active-panel d-flex flex-column justify-content-around align-items-center sent-success d-non payment-panel\">\n                  <div class=\"success-image mb-4 pb-4 pt-4\">\n                    <img src=\"assets/images/bills.svg\" height=\"100\" alt=\"\">\n                  </div>\n\n\n                  <h4 class=\"text-black fw-bold\">Create Bill</h4>\n\n\n                  <div class=\"border-1 invoice-form p-4\">\n\n                    <div class=\"form-group mb-4\">\n\n                      <div class=\"row\">\n                        <div class=\"col-6\">\n                          <label for=\"\" class=\"text-uppercase\">Unit Number:</label>\n                        </div>\n                        <div class=\"col-6\">\n                          <p class=\"text-black fw-bold\">{{ unit.unitNo }}</p>\n                        </div>\n                      </div>\n                      <div class=\"row\">\n                        <div class=\"col-6\">\n                          <label for=\"\" class=\"text-uppercase\">Onwer:</label>\n                        </div>\n                        <div class=\"col-6\">\n                          <p class=\"text-black fw-bold\">{{ unit.occupants }}</p>\n                        </div>\n                      </div>\n                      <div class=\"row\">\n                        <div class=\"col-6\">\n                          <label for=\"\" class=\"text-uppercase\">Monthly Rent:</label>\n                        </div>\n                        <div class=\"col-6\">\n                          <p class=\"text-black fw-bold\">{{ unit.monthlyRent }}</p>\n                        </div>\n                      </div>\n                      <div class=\"row\">\n                        <div class=\"col-6\">\n                          <label for=\"\" class=\"text-uppercase\">Arreas:</label>\n                        </div>\n                        <div class=\"col-6\">\n                          <p class=\"text-black fw-bold\">KES {{ unit.arrears }}</p>\n                        </div>\n                      </div>\n                    </div>\n\n                    <p class=\"text-muted mb-4\">Please input the desired payment amount based on the outstanding arreas or what the client wishes to pay</p>\n\n                    <div class=\"col-12\">\n\n                      <div class=\"mb-3\">\n                        <label for=\"formrow-firstname-input\" class=\"form-label\">Income Type</label>\n\n                        <select @change=\"selectedIncomeType($event)\"  class=\"form-control show-tick\" data-live-search=\"true\" >\n                          <option v-for=\"(item, index) in billingModule.incomeTypes\" :value=\"JSON.stringify(item)\" :key=\"index\">\n                            {{ item.incomeTypeDescription }}\n                          </option>\n                        </select>\n\n                      </div>\n\n                    </div>\n                    <div class=\"col-12\">\n                      <div class=\"mb-3\">\n                        <label for=\"formrow-firstname-input\" class=\"form-label\">Fee type</label>\n                        <select @change=\"selectedFeeAndCharge($event)\" class=\"form-control bg-white\" title=\"Select Traffic offence\" data-live-search=\"true\" >\n                          <option v-for=\"(item, index) in feesAndCharges\" :value=\"JSON.stringify(item)\" :key=\"index\">\n                            {{ item.feeDescription }}\n                          </option>\n                        </select>\n                      </div>\n                    </div>\n\n                    <div class=\"col-12\">\n                      <div class=\"row\">\n                        <div class=\"col-12\">\n                          <label for=\"formrow-quantity-input\" class=\"form-label\">Amount to Invoice</label>\n                          <input v-model=\"amount\" type=\"text\" class=\"form-control\" id=\"formrow-quantity-input\" placeholder=\"Amount\">\n                        </div>\n                        <!--                        <div class=\"col-6\" d-done >\n                                                  <label for=\"formrow-amount-input\" class=\"form-label\">Amount</label>\n                                                  <input v-model=\"amount\" type=\"text\" class=\"form-control\" id=\"formrow-amount-input\" placeholder=\"Bill Item amount\" readonly>\n                                                </div>-->\n                      </div>\n                    </div>\n                  </div>\n\n\n                  <div class=\"d-flex w-100 pb-2\" style=\"margin-top: 20px\">\n\n                    <button @click=\"generateBill()\" data-toggle=\"modal\" data-target=\"#payment-modal\" data-dismiss=\"modal\"  type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1 print-bill-btn\">\n                      <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                      Create Invoice\n                    </button>\n\n\n                  </div>\n                </div>\n\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- billing on the spot -->\n\n      <!-- payment modal -->\n      <div class=\"modal fade\" id=\"payment-modal\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" role=\"dialog\" aria-bs-labelledby=\"exampleModalCenterTitle\" aria-bs-hidden=\"true\" data-bs-keyboard=\"false\" data-bs-backdrop=\"static\">\n        <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header d-none\">\n              <span class=\"badge badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n              <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle close-modal\" data-dismiss=\"modal\"  aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n              </button>\n\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"d-flex justify-content-between align-items-center\">\n                <span class=\"badge  badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n                <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle pull-right close-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n                </button>\n              </div>\n\n              <div>\n\n                <div v-if=\"paymentPanel\" class=\"text-center payment-active-panel d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n                  <div class=\"success-image mb-4 pb-4 pt-4\">\n                    <img src=\"assets/images/bills.svg\" height=\"200\" alt=\"\">\n                  </div>\n                  <h4 class=\"text-black fw-bold\">{{message}}</h4>\n                  <p class=\"text-muted mb-4\">The bill has been created Successfully, you can print the bill or opt to receive payment for this bill.</p>\n                  <div class=\"d-flex w-100 pb-2\">\n                    <button @click=\"showPaymentMethod()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                      <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                      Receive Payment\n                    </button>\n                    <a @click=\"printBill()\" target=\"_blank\" data-dismiss=\"\" type=\"button\" class=\"btn btn-outline-secondary waves-effect dismin-modal\">Print Bill</a>\n                  </div>\n                </div>\n\n                <div v-if=\"paymentMethod\" class=\"send-method payment-panel \">\n                  <label for=\"\" class=\"mb-0 pb-0\">Payment Method</label>\n                  <p><small class=\"text-muted\">How would you like to send this money?</small></p>\n\n                  <div>\n                    <div class=\"accordion\" id=\"accordionExample\">\n                      <div class=\"accordion-item\">\n                        <h2 class=\"accordion-header\" id=\"headingOne\">\n                          <button class=\"accordion-button fw-medium\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\n                            <div class=\"flex-shrink-0 me-3\">\n                              <img class=\"rounded-circle\" src=\"assets/images/users/mpesa.jpg\" alt=\"Mobile Money\" height=\"65\">\n                            </div>\n                            <div class=\"d-flex flex-column\">\n                              <p class=\"m-0 p-0 text-uppercase fw-semibold\">MPESA</p>\n                              <p class=\"mb-0 p-0\"> <small>A payment request will be sent directly to the customer</small></p>\n                            </div>\n                          </button>\n                        </h2>\n                        <div id=\"collapseOne\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\n                          <div class=\"accordion-body\">\n                            <div>\n                              <p>\n                                A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to the MPESA number you enter below.\n                              </p>\n                            </div>\n                            <div class=\"form-group\">\n                              <label for=\"\">MPESA Number</label>\n                              <div class=\"form-floating mb-3\">\n                                <input v-model=\"phoneNumber\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\n                                <label for=\"floatingnameInput\">Phone No.</label>\n                              </div>\n\n                              <button @click=\"showTransactionSummary('MPESA')\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                Send Payment Request\n                              </button>\n\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                      <div class=\"accordion-item\">\n                        <h2 class=\"accordion-header\" id=\"headingThree\">\n                          <button class=\"accordion-button fw-medium collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                            <div class=\"flex-shrink-0 me-3\">\n                              <img class=\"rounded-circle\" src=\"assets/images/users/money.jpg\" alt=\"Mobile Money\" height=\"65\">\n                            </div>\n                            <div class=\"d-flex flex-column\">\n                              <p class=\"m-0 p-0 text-uppercase fw-semibold\">bank Receipting</p>\n                              <p class=\"mb-0 p-0\"> <small>Enter the receipt number here to confirm payment for this transaction.</small></p>\n\n                            </div>\n                          </button>\n                        </h2>\n                        <div id=\"collapseTwo\" class=\"accordion-collapse collapse\" aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample\">\n                          <div class=\"accordion-body\">\n                            <div class=\"form-group\">\n                              <label for=\"\">Enter The Bank's Receipt Number</label>\n                              <div class=\"form-floating mb-3\">\n                                <input v-model=\"paymentData.bankReceiptNo\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\n                                <label for=\"floatingnameInput\">Bank Ref No.</label>\n                              </div>\n\n                              <button @click=\"showTransactionSummary('BANK')\" class=\"btn w-100 btn-warning mt-3 btn-bank\">\n                                Continue\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n\n                    </div>\n\n                  </div>\n                </div>\n\n                <div v-if=\"transactionSummary\" class=\"transaction-summary payment-panel\">\n                  <label for=\"\">Transaction Breakdown</label>\n                  <div class=\"border p-4 rounded \">\n                    <div class=\"row\">\n                      <div class=\"col-lg-6\">\n                        <div class=\"text-muted \">\n                          BillO NO.\n                        </div>\n                      </div>\n\n                      <div class=\"col-lg-6 align-self-end\">\n                        <div class=\" text-right text-black\">\n                          {{billDetails.billNo}}\n                        </div>\n                      </div>\n\n                      <div class=\"col-lg-6\">\n                        <div class=\"text-muted mt-2\">\n                          Bill For\n                        </div>\n                      </div>\n\n                      <div class=\"col-lg-6 align-self-end\">\n                        <div class=\" text-right text-black\">\n                          {{billDetails.incomeTypeDescription}}\n                        </div>\n                      </div>\n\n                      <div class=\"col-lg-6\">\n                        <div class=\"text-muted mt-2\">\n                          Payment Method\n                        </div>\n                      </div>\n\n                      <div class=\"col-lg-6 align-self-end\">\n                        <div class=\" text-right text-black\">\n                          {{paymentData.paymentMode}}\n                        </div>\n                      </div>\n\n                      <div class=\"col-lg-6\">\n                        <div class=\"text-muted mt-2\">\n                          Transaction Amount\n                        </div>\n                      </div>\n\n                      <div class=\"col-lg-6 align-self-end\">\n                        <div class=\" text-right text-black\">\n                          KES {{billDetails.billBalance}}\n                        </div>\n                      </div>\n\n\n                      <div class=\"col-12 text-black\"><hr class=\"mb-0 pb-0\"></div>\n\n                      <div class=\"col-lg-6 text-uppercase\">\n                        <div class=\"text-muted mt-2 font-21\">\n                          Total\n                        </div>\n                      </div>\n\n                      <div class=\"col-lg-6 align-self-end text-uppercase\">\n                        <div class=\" text-right text-black font-21 fw-bold\">\n                          KES {{billDetails.billBalance}}\n                        </div>\n                      </div>\n                    </div>\n\n                    <div class=\"mpesa-confirmation\">\n                      <div v-if=\"paymentData.paymentMode === 'MPESA'\">\n                        <p class=\"text-muted mt-2\">A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to <strong class=\"text-black\"> phone number ({{ phoneNumber }})</strong> soon after you click the <strong class=\"text-black text-capitalize\">Send Request</strong> button bellow.\n                          <br>\n                          <br>\n                          Remember to <strong class=\"text-black\">Check your phone</strong> to confirm payment by entering your Mpesa pin.</p>\n                      </div>\n\n                      <div>{{message}}  </div>\n                      <br>\n                      <button @click=\"makePayment()\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect btn-send waves-light text-center w-100\">\n                        <div class=\"d-flex justify-content-center align-items-center\">\n                          <div class=\"stk-timer-container d-none justify-content-center align-items-center\">\n                            <span class=\"mdi mdi-timer-outline font-16px\"></span>\n                            <span class=\"stk-timer px-2\"></span>\n                          </div>\n                          <div class=\"justify-content-center align-items-center d-flex\">\n                            <span class=\"px-2\">Send Request</span>\n                            <div class=\"flip-x\"><i class=\"mdi mdi-reply ms-3 font-16px\"></i></div>\n                          </div>\n                        </div>\n                      </button>\n                    </div>\n\n\n                  </div>\n                </div>\n\n                <div v-if=\"transactionCompleted\" class=\"text-center d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n                  <div class=\"success-image mb-4\">\n                    <img src=\"assets/images/payment-confirmation-images/sent.svg\" height=\"200\" alt=\"\">\n                  </div>\n                  <h4 class=\"text-blink-primary fw-bold\">Transaction Complete</h4>\n                  <p class=\"text-muted mb-4\"><strong class=\"text-black\">KES {{receiptDetails.receiptAmount}}</strong> has been received for <strong class=\"text-black\">Bill No. {{receiptDetails.billNo}}</strong></p>\n                  <button @click=\"printReceipt()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                    <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                    Print Receipt\n                  </button>\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- end of payment modal -->\n\n\n\n      <!-- add plot modal -->\n      <div class=\"modal fade add-plot-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myLargeModalLabel\"\n           aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-md modal-dialog-centered \">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title text-uppercase\" id=\"myLargeModalLabel\">Add New Unit</h5>\n\n              <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body\">\n              <div class=\"row\">\n\n                <div class=\"col-12\">\n                  <p class=\"fw-bold text-black text-uppercase\">Plot Details:</p>\n                </div>\n\n\n                <div class=\"col-12\">\n                  <div class=\"form-group mb-3\">\n                    <label for=\"\">Unit Number</label>\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Enter the Plot Number\">\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <div class=\"form-group mb-3\">\n                    <label for=\"\">Unit Type</label>\n                    <select class=\"form-select  font-13px  form-control\">\n\n                      <option value=\"25\">Resturant</option>\n                      <option value=\"50\">Single Stall</option>\n\n                    </select>\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <div class=\"form-group mb-3\">\n                    <label for=\"\">Monthly Rent</label>\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Enter the Plot Number\">\n                  </div>\n                </div>\n\n\n\n              </div>\n\n            </div>\n            <div class=\"modal-footer\">\n\n              <a href=\"#\" target=\"_blank\" type=\"button\"\n                 class=\"btn btn-primary waves-effect waves-light w-100\">\n                <i class=\"bx bx-check font-size-16 align-middle me-2\"></i> Submit\n              </a>\n            </div>\n          </div>\n          <!-- /.modal-content -->\n        </div>\n        <!-- /.modal-dialog -->\n      </div>\n      <!-- end of add plot modal -->\n\n      <!-- adsigning new tenan modal -->\n      <div class=\"modal fade new-tenant-modal\" id=\"new-business\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered modal-md\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title text-capitalize\" id=\"exampleModalLongTitle\">129/4775/009 New tenant</h5>\n              <button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body steps-container\">\n              <div class=\"row the-step biz-info active\">\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Tenat's Full Names</label>\n                  <input type=\"text\" class=\"form-control\" placeholder=\"Enter Full Names\">\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">ID/PPT Number</label>\n                  <input type=\"text\" class=\"form-control\" placeholder=\"Enter ID/PPT Number\">\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Phone Number</label>\n                  <input type=\"text\" class=\"form-control\" placeholder=\"Enter Phone\">\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Email Address</label>\n                  <input type=\"text\" class=\"form-control\" placeholder=\"Enter Phone\">\n                </div>\n\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Effective from</label>\n                  <input class=\"form-control\" type=\"date\" placeholder=\"Select date\" id=\"example-date-input\">\n                </div>\n\n\n              </div>\n\n              <div class=\"row the-step biz-additional-info d-none\">\n                <div class=\"col-12\">\n                  <div class=\"alert alert-warning\" role=\"alert\">\n                    You are changing something that needs two OTPs, which I sent to the first and second approver. You need to get the OTPs from them and enter them in order, because if you enter them wrong, you can't continue. You also need to enter them exactly as they are, without any spaces or punctuation marks. Thank you for your cooperation.\n                  </div>\n                </div>\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">First Approver</label>\n                  <input class=\"form-control \" placeholder=\"Enter OTP\">\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Second Approver</label>\n                  <input class=\"form-control \" placeholder=\"Enter OTP\">\n                </div>\n\n              </div>\n\n\n            </div>\n            <div class=\"modal-footer\">\n              <div class=\"d-flex modal-next-prev-container\">\n                <button type=\"button\" class=\"btn btn-outline-secondary btn-prev waves-effect waves-effect waves-light me-3\">\n                  <i class=\"bx bx-left-arrow-alt font-size-16 align-middle me-2\"></i> Previouse\n                </button>\n\n                <button type=\"button\" class=\"btn btn-primary waves-effect waves-effect waves-light btn-next\">\n                  Next <i class=\"bx bx-right-arrow-alt font-size-16 align-middle me-2\"></i>\n                </button>\n\n                <button type=\"button\" class=\"btn btn-submit btn-success d-none ml-3 ms-3 waves-effect waves-effect waves-light btn-next\">\n                  <i class=\"bx bx-check-double font-size-16 align-middle me-2\"></i> Finish\n                </button>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- assigning new tenant modal -->\n\n      <!-- editing modal -->\n      <div class=\"modal fade edit-modal\" id=\"new-business\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered modal-md\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title text-capitalize\" id=\"exampleModalLongTitle\">Edit stall detais for Stall {{unit.unitNo}}</h5>\n              <button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body steps-container\">\n              <div class=\"row the-step biz-info active\">\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Stall Number</label>\n                  <input readonly v-model=\"unit.unitNo\" type=\"text\" class=\"form-control\" placeholder=\"Stall Name\">\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Stall Type</label>\n                  <select class=\"form-select\"  v-model=\"unitCategory\">\n                    <option selected=\"\" value=\"\">Select Category</option>\n                    <option v-for=\"(item, index) in unitCategories\" :key=\"`${index}`\" :value=\"item\" ><a class=\"dropdown-item\" href=\"#\">{{item.category}}</a></option>\n                  </select>\n\n                </div>\n\n<!--                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Chargable per</label>\n                  <select class=\"form-select\">\n                    <option>Daily</option>\n                    <option>Weekly</option>\n                    <option value=\"\">Monthly</option>\n                  </select>\n                </div>-->\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Amount Chargable</label>\n                  <input v-model=\"unit.monthlyRent\" type=\"text\" class=\"form-control\" placeholder=\"Enter amount\">\n                </div>\n\n\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Occupants</label>\n                  <input v-model=\"unit.occupants\" type=\"text\" class=\"form-control\" placeholder=\"Occupants\">\n                </div>\n\n\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Occupants</label>\n                  <input v-model=\"unit.phoneNumber\" type=\"text\" class=\"form-control\" placeholder=\"phoneNumber\">\n                </div>\n\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">idNo</label>\n                  <input v-model=\"unit.idNo\" type=\"text\" class=\"form-control\" placeholder=\"idNo\">\n                </div>\n\n                <a @click=\"updateUnits()\" type=\"button\" class=\"btn btn-success text-uppercase dropdown-toggle option-selector me-3\">\n                  <i class=\"bx bx-plus font-size-16\"></i> <span class=\"pl-1 d-md-inline\">Save</span>\n                </a>\n\n\n              </div>\n\n<!--              <div class=\"row the-step biz-additional-info d-none\">\n                <div class=\"col-12\">\n                  <div class=\"alert alert-warning\" role=\"alert\">\n                    You are changing something that needs two OTPs, which I sent to the first and second approver. You need to get the OTPs from them and enter them in order, because if you enter them wrong, you can't continue. You also need to enter them exactly as they are, without any spaces or punctuation marks. Thank you for your cooperation.\n                  </div>\n                </div>\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">First Approver</label>\n                  <input class=\"form-control \" placeholder=\"Enter OTP\">\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Second Approver</label>\n                  <input class=\"form-control \" placeholder=\"Enter OTP\">\n                </div>\n\n              </div>-->\n\n\n            </div>\n<!--\n\n            <div class=\"modal-footer\">\n              <div class=\"d-flex modal-next-prev-container\">\n                <button type=\"button\" class=\"btn btn-outline-secondary btn-prev waves-effect waves-effect waves-light me-3\">\n                  <i class=\"bx bx-left-arrow-alt font-size-16 align-middle me-2\"></i> Previouse\n                </button>\n\n                <button type=\"button\" class=\"btn btn-primary waves-effect waves-effect waves-light btn-next\">\n                  Next <i class=\"bx bx-right-arrow-alt font-size-16 align-middle me-2\"></i>\n                </button>\n\n                <button type=\"button\" class=\"btn btn-submit btn-success d-none ml-3 ms-3 waves-effect waves-effect waves-light btn-next\">\n                  <i class=\"bx bx-check-double font-size-16 align-middle me-2\"></i> Finish\n                </button>\n\n              </div>\n            </div>\n-->\n\n          </div>\n        </div>\n      </div>\n      <!-- editing modal -->\n\n      <!-- assigning tenant modal -->\n      <div class=\"modal fade edit-modal\" id=\"tenant-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\n        <div class=\"modal-dialog modal-dialog-centered modal-md\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title text-capitalize\" id=\"exampleModalLongTitle\">Assign tenant for Unit Number {{unit.unitNo}}</h5>\n              <button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"Close\"></button>\n            </div>\n            <div class=\"modal-body steps-container\">\n              <div class=\"row the-step biz-info active\">\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Tenant's Full Names</label>\n                  <input type=\"text\" class=\"form-control\" placeholder=\"Enter Tenant's Full Names\">\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Tenant's ID Number</label>\n                  <input type=\"text\" class=\"form-control\" placeholder=\"Enter ID Number\">\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Phone Number</label>\n                  <input type=\"text\" class=\"form-control\" placeholder=\"Enter Phone Number\">\n                </div>\n\n              </div>\n\n              <div class=\"row the-step biz-additional-info d-none\">\n                <div class=\"col-12\">\n                  <div class=\"alert alert-warning\" role=\"alert\">\n                    You are changing something that needs two OTPs, which I sent to the first and second approver. You need to get the OTPs from them and enter them in order, because if you enter them wrong, you can't continue. You also need to enter them exactly as they are, without any spaces or punctuation marks. Thank you for your cooperation.\n                  </div>\n                </div>\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">First Approver</label>\n                  <input class=\"form-control \" placeholder=\"Enter OTP\">\n\n                </div>\n\n                <div class=\"col-12 mb-3\">\n                  <label for=\"\">Second Approver</label>\n                  <input class=\"form-control \" placeholder=\"Enter OTP\">\n                </div>\n\n              </div>\n\n\n            </div>\n            <div class=\"modal-footer\">\n              <div class=\"d-flex modal-next-prev-container\">\n                <button type=\"button\" class=\"btn btn-outline-secondary btn-prev waves-effect waves-effect waves-light me-3\">\n                  <i class=\"bx bx-left-arrow-alt font-size-16 align-middle me-2\"></i> Previouse\n                </button>\n\n                <button type=\"button\" class=\"btn btn-primary waves-effect waves-effect waves-light btn-next\">\n                  Next <i class=\"bx bx-right-arrow-alt font-size-16 align-middle me-2\"></i>\n                </button>\n\n                <button type=\"button\" class=\"btn btn-submit btn-success d-none ml-3 ms-3 waves-effect waves-effect waves-light btn-next\">\n                  <i class=\"bx bx-check-double font-size-16 align-middle me-2\"></i> Finish\n                </button>\n\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- end of assigning tenant modal -->\n\n      <footer class=\"footer \">\n        <div class=\"container-fluid \">\n          <div class=\"row \">\n            <div class=\"col-sm-6 \">\n            </div>\n            <div class=\"col-sm-6 \">\n              <div class=\"text-sm-end d-sm-block \">\n                Homa Bay County Government\n              </div>\n            </div>\n          </div>\n        </div>\n      </footer>\n    </div>\n    <!-- end main content-->\n\n  </div>\n  <!-- END layout-wrapper -->\n\n  <!-- Right bar overlay-->\n  <div class=\"rightbar-overlay \"></div>\n\n  </body>\n\n</template>\n\n<script>\n/* eslint-disable */\nimport {biller, execute, executeDownload, getRight, rent} from \"@/api\";\nimport NavigationBar from \"@/components/Navigation.vue\";\nimport router from \"@/router\";\nimport ToolBarHousing from \"@/components/housing/ToolBarHousing.vue\";\n\nexport default {\n  name: \"HousingDetails\",\n  components: {ToolBarHousing, NavigationBar},\n  data() {\n    return{\n      amount:0,\n      search:'',\n      download:'Download Report',\n      loading: true,\n      // set the initial current page as 1\n      currentPage: 1,\n      // set the total number of pages as 10 (you can change this according to your data source)\n      totalPages: 0,\n      // set the number of items per page as 5 (you can change this according to your preference)\n      pageSize: 10,\n      summary: {\n        count: 0,\n        total: 0\n      },\n\n      category:'',\n      unitStatus:'',\n      unitCategories:[{\n        id: null,\n        category: null,\n        count:null\n      }],\n      unitCategory: {\n        id: null,\n        category: null,\n        count: null,\n      },\n      totalMonthyly:0,\n      totalArreas:0,\n      totalAmount:0,\n      message:null,\n      message1:null,\n      message2:null,\n      otpMessage1: null,\n      otpMessage2: null,\n\n      otp1:0,\n      otp2:0,\n\n      description:'',\n      effectiveFrom:'',\n      reason:'',\n      units: [\n        {\n          id: null,\n          propertyID:  null,\n          property: null,\n          unitNo: null,\n          category:  null,\n          occupants: null,\n          monthlyRent:  null,\n          arrears:  null,\n          phoneNumber:  null,\n          idNo: null,\n          updated: null,\n          lastPaymentDate: null,\n          nextPaymentDate: null\n        }\n      ],\n      unit:{\n        id: null,\n        propertyID:  null,\n        property: null,\n        unitNo: null,\n        category:  null,\n        occupants: null,\n        monthlyRent:  null,\n        arrears:  null,\n        phoneNumber:  null,\n        idNo: null,\n        updated: null,\n        lastPaymentDate: null,\n        nextPaymentDate: null\n      },\n      vacateReasons: [\n        {\n          id: null,\n          reason:  null,\n        }],\n      selectedUnits:[\n        {\n          id: null,\n          propertyID:  null,\n          property: null,\n          unitNo: null,\n          category:  null,\n          occupants: null,\n          monthlyRent:  null,\n          arrears:  null,\n          phoneNumber:  null,\n          idNo: null,\n          updated: null,\n          lastPaymentDate: null,\n          nextPaymentDate: null\n        }\n\n      ],\n\n      billingModule:{\n        incomeType:{\n          incomeTypeId: null,\n          incomeTypeDescription:null,\n          incomeTypePrefix: null,\n          fundDescription: null,\n          status: null\n        },\n        incomeTypes:[{\n          incomeTypeId: null,\n          incomeTypeDescription:null,\n          incomeTypePrefix: null,\n          fundDescription: null,\n          status: null}]\n      },\n      feesAndCharges:[{\n        feeId: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc:null ,\n        costCenterNo:null,\n        zone: null,\n        typeDescription: null\n      }],\n      feesAndChargeItems:[{\n        feeId: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc:null ,\n        costCenterNo:null,\n        zone: null,\n        typeDescription: null,\n        customer: null\n      }],\n      billItem:[],\n      billDetails:{\n        id:'',\n        billNo:'',\n        incomeTypeID:'',\n        incomeTypeDescription:'',\n        costCenterNo:'',\n        accountNo:'',\n        feeID:'',\n        detailAmount:'',\n        receiptAmount:'',\n        billBalance:'',\n        wardID:'',\n        subCountyID:'',\n        status:'',\n        dateCreated:''\n      },\n      billInfo:[],\n      paymentData: {\n        bankReceiptNo: null,\n        accNo: null,\n        payBillNo: null,\n        amount: null,\n        phoneNumber: null,\n        success: false,\n        paymentMode:null,\n        sessionNames:null,\n        sessionIdNo:null,\n        sessionPhoneNumber:null\n      },\n      alert:{\n        success: false,\n        info: false,\n        failed:false\n      },\n\n      transactionCompleted: false,\n      transactionSummary: false,\n      paymentPanel: true,\n      paymentMethod: false,\n\n      unitStatuses: [{\n        status:null,\n        count: null\n      }],\n      property: {\n        id:null,\n        propertyID:null,\n        property: null,\n        subCountyName: null,\n        subCountyID: null,\n        wardName: null,\n        wardID: null,\n        zone: null\n      }\n    }\n  },\n  watch: {\n\n    pageSize(newPageSize) {\n      this.getUnits()\n      // get the total number of items from your data source (you can change this according to your logic)\n      const totalItems = this.summary.count;\n      // calculate the new total pages by dividing the total items by the new page size and rounding up\n      const newTotalPages = Math.ceil(totalItems / newPageSize);\n      // update the totalPages data property with the new value\n      this.totalPages = newTotalPages;\n      // reset the current page to 1\n      this.currentPage = 1;\n\n    },\n\n    otpMessage1: function () {\n      if(this.otpMessage1.length>3){\n        if(this.otpMessage1 == this.otp1){\n          this.message1 =null\n        }else {\n          this.message1 =\"Invalid OTP\"\n        }\n      }else {\n        this.message1 =null\n      }\n\n    } ,\n    otpMessage2: function () {\n      if(this.otpMessage2.length>3){\n        if(this.otpMessage2 == this.otp2){\n          this.message2 =null\n        }else {\n          this.message2 =\"Invalid OTP\"\n        }\n      }else {\n        this.message2 =null\n      }\n    },\n\n    category: function () {\n      this.getUnits()\n    },\n    unitStatus: function () {\n      this.getUnits()\n    },\n    search: function () {\n      this.getUnits()\n    },\n  },\n  mounted() {\n    this.getProperty()\n    this.getUnits()\n    this.getVacateReasons()\n    this.getIncomeTypes()\n    this.getUnitStatus()\n    this.menuAccess();\n\n\n  },\n  methods: {\n    getRight,\n\n    menuAccess(){\n\n      const data = new FormData();\n      data.append(\"function\", \"menuAccess\");\n      data.append(\"menu\", \"Housing Details\");\n      data.append(\"sessionNames\", sessionStorage.getItem(\"sessionNames\"));\n      data.append(\"sessionIdNo\",  sessionStorage.getItem(\"sessionIdNo\"));\n      execute(data,biller)\n          .then((res) => {\n            // alert(res.data.message);\n          })\n          .catch((e) => {\n            // alert(e.message);\n          });\n\n    },\n    //pagination code\n    pagination(currentPage, totalPages, maxVisibleButtons) {\n      //initialize an empty array for the pages\n      let pages = [];\n      //calculate the start and end indices of the visible buttons\n      let start = currentPage - Math.floor(maxVisibleButtons / 2);\n      let end = currentPage + Math.floor(maxVisibleButtons / 2);\n      //adjust the start and end indices if they are out of bounds\n      if (start < 1) {\n        start = 1;\n        end = start + maxVisibleButtons - 1;\n        if (end > totalPages) {\n          end = totalPages;\n        }\n      }\n      if (end > totalPages) {\n        end = totalPages;\n        start = end - maxVisibleButtons + 1;\n        if (start < 1) {\n          start = 1;\n        }\n      }\n      //loop through the start and end indices and push the pages to the array\n      for (let i = start; i <= end; i++) {\n        pages.push(i);\n      }\n      //add an ellipsis at the beginning if there are more pages before the start index\n      if (start > 1) {\n        pages.unshift(\"...\");\n      }\n      //add an ellipsis at the end if there are more pages after the end index\n      if (end < totalPages) {\n        pages.push(\"...\");\n      }\n// return the array of pages\n      return pages;\n    },\n    // define a method to go to the previous page\n    prevPage() {\n      // check if the current page is not the first page\n      if (this.currentPage > 1) {\n        // decrement the current page by 1\n        this.currentPage--;\n        this.getUnits()\n      }\n    },\n    // define a method to go to the next page\n    nextPage() {\n      // check if the current page is not the last page\n      if (this.currentPage < this.totalPages) {\n        // increment the current page by 1\n        this.currentPage++;\n        this.getUnits()\n      }\n    },\n    // define a method to go to a specific page\n    goToPage(page) {\n      // check if the page is valid and not equal to the current page\n      if (page > 0 && page <= this.totalPages && page !== this.currentPage) {\n        // set the current page to the given page\n        this.currentPage = page;\n        this.getUnits()\n      }\n    },\n\n    downloadUnits(){\n      this.download =\"Please wait..\"\n\n      let str = this.category\n      let cleanedStr = str.replace(/\\(\\d+\\)/, '').trim();\n\n      let str2 = this.unitStatus\n      let cleanedStr2 = str2.replace(/\\(\\d+\\)/, '').trim();\n\n      const data = new FormData();\n      data.append(\"function\", \"downloadUnits\");\n      data.append(\"propertyID\", sessionStorage.getItem(\"propertyID\"));\n      data.append(\"category\", cleanedStr);\n      data.append(\"unitStatus\", cleanedStr2);\n\n      executeDownload(data,rent).then(response => {\n        this.download =\"Download Report\"\n        const link = document.createElement('a');\n        link.href = URL.createObjectURL(response.data);\n        link.download = \"Report.csv\";\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n      });\n    },\n    getProperty(){\n      const data = new FormData();\n      data.append(\"function\", \"getProperty\");\n      data.append(\"propertyID\", sessionStorage.getItem(\"propertyID\"));\n      execute(data,rent)\n          .then((res) =>{\n            if (res.data.success) {\n              this.property = res.data.data.property;\n\n            }else{\n              this.message =res.data.message\n            }\n          })\n          .catch((e) => {\n            this.message =e.message\n          });\n    },\n    getUnitCategory(){\n      this.unitCategories.splice(0)\n      const data = new FormData();\n      data.append(\"function\", \"getUnitCategory\");\n      execute(data,rent)\n          .then((res) =>{\n            if (res.data.success) {\n              this.unitCategories =res.data.data.unitCategories\n\n              //preselections\n              this.unitCategories.forEach((value, index) => {\n                if (this.unit.category === value.category) {\n                   this.unitCategory = this.unitCategories[index];\n                }\n              });\n\n            }else{\n              this.message =res.data.message\n            }\n          })\n          .catch((e) => {\n            this.message =e.message\n          });\n    },\n    getUnitStatus(){\n      this.unitStatuses.splice(0)\n      const data = new FormData();\n      data.append(\"function\", \"getUnitStatus\");\n      execute(data,rent)\n          .then((res) =>{\n            if (res.data.success) {\n              this.unitStatuses =res.data.data.unitStatuses\n            }else{\n              this.message =res.data.message\n            }\n          })\n          .catch((e) => {\n            this.message =e.message\n          });\n    },\n    sumNumbers(a, b) {\n      // Convert strings to numbers if they are strings\n      if (typeof a === 'string') {\n        a = parseFloat(a);\n      }\n      if (typeof b === 'string') {\n        b = parseFloat(b);\n      }\n\n      // Check if both parameters are valid numbers\n      if (isNaN(a) || isNaN(b)) {\n        return \"Both parameters must be valid numbers\";\n      }\n\n      return a + b;\n    },\n    numberFormat(num) {\n      const britishNumberFormatter = new Intl.NumberFormat(\"en-GB\");\n      return britishNumberFormatter.format(num)\n    },\n    selectedUnit(item){\n      this.unit = item\n\n      this.selectedUnits.splice(0)\n      this.selectedUnits.push(item)\n      this.amount = this.unit.monthlyRent\n\n      this.getUnitCategory()\n\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return \"Invalid Date\";\n\n      const date = new Date(dateStr);\n\n      if (isNaN(date.getTime())) return \"Invalid Date\";\n\n      const options = {\n        year: 'numeric',\n        month: 'short',\n        day: '2-digit',\n        hour: 'numeric',\n        minute: '2-digit',\n        hour12: true\n      };\n\n      const formattedDate = date.toLocaleDateString('en-US', options);\n      const formattedTime = date.toLocaleTimeString('en-US', options);\n\n      return formattedDate.replace(',', '') + ' ' + formattedTime;\n    },\n    getUnits(){\n      this.loading = true\n      this.units.splice(0)\n\n      let str = this.category\n      let cleanedStr = str.replace(/\\(\\d+\\)/, '').trim();\n\n      let str2 = this.unitStatus\n      let cleanedStr2 = str2.replace(/\\(\\d+\\)/, '').trim();\n\n      const data = new FormData();\n      data.append(\"function\", \"getUnits\");\n      data.append(\"propertyID\", sessionStorage.getItem(\"propertyID\"));\n      data.append(\"category\", cleanedStr);\n      data.append(\"unitStatus\", cleanedStr2);\n      data.append(\"keyword\", this.search);\n      data.append(\"page\", this.currentPage);\n      data.append(\"rows_per_page\", this.pageSize);\n\n      execute(data,rent)\n          .then((res) =>{\n            this.loading = false\n            if (res.data.success) {\n              this.units = res.data.data.units\n              this.totalMonthyly = this.units.reduce((acc, cur) => {\n                let receiptAmount = Number(cur.monthlyRent);\n                return acc + receiptAmount;\n              }, 0);\n\n              this.totalArreas = this.units.reduce((acc, cur) => {\n                let receiptAmount = Number(cur.arrears);\n                return acc + receiptAmount;\n              }, 0);\n\n              this.totalAmount = this.totalMonthyly + this.totalArreas\n\n              this.summary.count = res.data.data.summary.count\n            //  this.summary.total = res.data.data.summary.totalReceiptAmount\n              this.totalPages =  Math.ceil(this.summary.count / this.pageSize);\n\n            }else{\n\n            }\n          })\n          .catch((e) => {\n            //alert(e.message);\n            this.message =e.message\n          });\n    },\n    getVacateReasons(){\n      const data = new FormData();\n      data.append(\"function\", \"getVacateReasons\");\n      execute(data,rent)\n          .then((res) =>{\n            if (res.data.success) {\n              this.vacateReasons = res.data.data.vacateReasons\n            }else{\n\n            }\n          })\n          .catch((e) => {\n            //alert(e.message);\n            this.message =e.message\n          });\n    },\n    updateUnits(){\n      const data = new FormData();\n      data.append(\"function\", \"updateUnits\");\n      data.append(\"unit\", JSON.stringify(this.unit));\n      data.append(\"sessionNames\", sessionStorage.getItem(\"sessionNames\"));\n      data.append(\"sessionIdNo\", sessionStorage.getItem(\"sessionIdNo\"));\n\n      execute(data,rent)\n          .then((res) =>{\n            if (res.data.success) {\n             this.getProperty()\n            }else{\n\n            }\n          })\n          .catch((e) => {\n            //alert(e.message);\n            this.message =e.message\n          });\n    },\n    vacateUnit(){\n      //check if OTP Matches\n      if(this.otpMessage1 == this.otp1 && this.otpMessage2 == this.otp2){\n\n        const data = new FormData();\n        data.append(\"function\", \"vacateUnit\");\n        data.append(\"effectiveFrom\", this.effectiveFrom);\n        data.append(\"id\", this.unit.id);\n        execute(data,rent)\n            .then((res) =>{\n              if (res.data.success) {\n                alert(res.data.message)\n                this.getUnits();\n              }else{\n                alert(res.data.message)\n              }\n            })\n            .catch((e) => {\n              //alert(e.message);\n              this.message =e.message\n            });\n\n      }else {\n\n        alert(\"One or more invalid OTP\")\n      }\n\n    },\n    sendVacateOTP(){\n\n      this.otp1 =  Math.floor(1000 + Math.random() * 9000);\n      this.otp2 =  Math.floor(1000 + Math.random() * 9000);\n\n      const data = new FormData();\n      data.append(\"function\", \"sendVacateOTP\");\n      data.append(\"description\", this.unit.unitNo +' '+ this.unit.category  +' '+ this.unit.occupants  +' '+ this.unit.phoneNumber  +' '+ this.unit.property);\n      data.append(\"otp1\", this.otp1);\n      data.append(\"otp2\", this.otp2);\n      execute(data,rent)\n          .then((res) =>{\n            if (res.data.success) {\n\n            }else{\n\n            }\n          })\n          .catch((e) => {\n            //alert(e.message);\n            this.message =e.message\n          });\n    },\n\n    selectedIncomeType(event){\n      const value = event.target.value\n      const result = JSON.parse(value);\n      this.getFeesAndChargesBilling(result.incomeTypeId)\n    },\n    getIncomeTypes(){\n      this.message =null\n      this.billingModule.incomeTypes.splice(0)\n      this.feesAndCharges.splice(0)\n      const data = new FormData();\n      data.append(\"function\", \"getIncomeTypes\");\n      data.append(\"incomeTypePrefix\", \"HSRENT\");\n      data.append(\"keyword\", \"Housing\");\n      execute(data,biller)\n          .then((res) =>{\n            if (res.data.success) {\n              this.billingModule.incomeTypes =res.data.data.incomeTypes\n              this.getFeesAndChargesBilling(this.billingModule.incomeTypes[0].incomeTypeId)\n            }else{\n              this.message =res.data.message\n            }\n          })\n          .catch((e) => {\n            this.message =e.message\n          });\n    },\n    getFeesAndChargesBilling(incomeTypeId){\n      this.message =null\n      this.feesAndCharges.splice(0)\n      const data = new FormData();\n      data.append(\"function\", \"getFeesAndCharges\");\n      data.append(\"incomeTypeId\",incomeTypeId);\n      execute(data,biller)\n          .then((res) =>{\n            if (res.data.success) {\n              this.feesAndCharges = res.data.data.feesAndCharges\n              this.selectedFeeAndChargeFirstOne()\n            }else{\n              this.message =res.data.message\n            }\n          })\n          .catch((e) => {\n            this.message =e.message\n          });\n    },\n    selectedFeeAndCharge(event){\n      const data = JSON.parse(event.target.value)\n      // this.amount = data.unitFeeAmount\n      this.feeID = data.feeId\n      this.unitFeeAmount = data.unitFeeAmount\n      this.feesAndChargeItems = []\n      this.feesAndChargeItems.splice(0)\n      this.feesAndChargeItems.push(data)\n\n    },\n    selectedFeeAndChargeFirstOne(){\n      const data = this.feesAndCharges[0]\n      // this.amount = data.unitFeeAmount\n      this.feeID = data.feeId\n      this.unitFeeAmount = data.unitFeeAmount\n      this.feesAndChargeItems = []\n      this.feesAndChargeItems.splice(0)\n      this.feesAndChargeItems.push(data)\n\n    },\n    generateFeeAndChargesItem() {\n      // Loop through the selectedVehicles array\n      for (let item of this.selectedUnits) {\n        // Create a new object with the mapped values\n        let newItem = {\n          feeId: this.feeID, // Map feeID to feeId\n          unitFeeAmount: this.amount, // Map amount to unitFeeAmount\n          customer: item.unitNo+\"|\"+item.idNo+\"|\"+item.id, //unitNo | idNo | id\n        };\n        // Push the new object to the feesAndChargeItems array\n        this.feesAndChargeItems.splice(0)\n        this.feesAndChargeItems.push(newItem);\n      }\n      this.addToBill()\n    },\n    addToBill(){\n      for (const { typeDescription,feeId, feeDescription, unitFeeAmount, accountNo, costCenterNo, incomeTypeId,customer} of this.feesAndChargeItems) {\n        this.totalAmount += parseFloat(unitFeeAmount);\n        this.billItem.push({\n          typeDescription,\n          feeDescription,\n          unitFeeAmount: unitFeeAmount,\n          accountNo,\n          costCenterNo,\n          incomeTypeId,\n          revenueStreamItem: this.unit.unitNo,\n          feeId,\n          amount:  unitFeeAmount,\n          customer: customer,\n          zone: this.unit.zone,\n          subCountyID: this.unit.subCountyID,\n          subCountyName:this.unit.subCountyName,\n          wardID: this.unit.wardID,\n          wardName: this.unit.wardName,\n          idNo: sessionStorage.getItem(\"sessionIdNo\"),\n          phoneNumber: sessionStorage.getItem(\"sessionPhoneNumber\"),\n          names: sessionStorage.getItem(\"sessionNames\"),\n          customerPhoneNumber: this.unit.phoneNumber,\n          description:  this.unit.unitNo,\n        });\n      }\n    },\n    generateBill(){\n      this.generateFeeAndChargesItem()\n\n      this.paymentMethod = false;\n      this.paymentPanel = true;\n      this.transactionSummary = false ;\n      this.transactionCompleted = false\n      this.message =\"Generating Bill...please wait... \"\n      const data = new FormData();\n      data.append(\"function\", \"generateBill3\");\n      data.append(\"billItem\", JSON.stringify(this.billItem));\n      execute(data,biller)\n          .then((res) =>{\n            this.message =res.data.message\n            if (res.data.success) {\n              this.billDetails = res.data.data.bill.billDetails\n              this.billInfo = res.data.data.bill.billInfo\n              this.paymentData.amount = res.data.data.bill.billDetails.billBalance\n              this.paymentData.accNo = res.data.data.bill.billDetails.billNo\n              this.paymentData.payBillNo = res.data.data.billGenerated.payBillNo\n\n              this.paymentData.sessionNames =sessionStorage.getItem(\"sessionNames\")\n              this.paymentData.sessionIdNo =sessionStorage.getItem(\"sessionIdNo\")\n              this.paymentData.sessionPhoneNumber = sessionStorage.getItem(\"sessionPhoneNumber\")\n\n\n\n            }else{\n              this.message =res.data.message\n            }\n          })\n          .catch((e) => {\n            this.message =e.message\n          });\n    },\n    printBill() {\n      localStorage['params'] = JSON.stringify({\n        billNo: this.billDetails.billNo\n      })\n      const routeData = this.$router.resolve({name: 'bill'});\n      window.open(routeData.href, '_blank');\n    },\n    printReceipt() {\n      if (this.receiptDetails.receiptNo == null) {\n        alert(\"Try again later\");\n      } else {\n        //  this.$refs.closeReceived.click();\n        localStorage['params'] = JSON.stringify({\n          receiptNo: this.receiptDetails.receiptNo\n        })\n        const routeData = this.$router.resolve({name: 'receipt'});\n        window.open(routeData.href, '_blank');\n      }\n    },\n    showPaymentMethod(){\n      this.paymentMethod = true;\n      this.paymentPanel = false;\n      this.transactionSummary = false;\n      this.transactionCompleted = false\n    },\n    showTransactionSummary(paymentMode){\n\n      this.paymentData.paymentMode = paymentMode\n\n      if(paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if(paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n\n      this.paymentMethod = false;\n      this.paymentPanel = false;\n      this.transactionSummary = true;\n      this.transactionCompleted = false\n    },\n    makePayment() {\n      if(this.paymentData.paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if(this.paymentData.paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      this.message = \"Payment Request sent\";\n      this.paymentData.phoneNumber = this.phoneNumber\n\n      const data = new FormData();\n      data.append(\"function\", \"makePayment\");\n      data.append(\"paymentData\", JSON.stringify(this.paymentData));\n\n\n      execute(data, biller)\n          .then((res) => {\n            if (res.data.success) {\n              this.paymentMethod = false;\n              this.paymentPanel = false;\n              //start checking payment\n              this.timer = setInterval(() => {\n\n                this.checkPayment();\n              }, 3000);\n            } else {\n              this.rate = null;\n              alert(res.data.message);\n            }\n          })\n          .catch((e) => {\n            alert(e.message);\n          });\n    },\n    checkPayment() {\n      this.randomNumber = Math.floor(Math.random() * 3) + 1\n      if(this.randomNumber === 1){\n        this.message = \"Waiting for payment.\";\n      }\n      if(this.randomNumber === 2){\n        this.message = \"Waiting for payment..\";\n      }\n      if(this.randomNumber ===3){\n        this.message = \"Waiting for payment...\";\n      }\n      const data = new FormData();\n      data.append(\"function\", \"checkPayment\");\n      data.append(\"accountRef\", this.paymentData.accNo);\n\n      execute(data, biller)\n          .then((res) => {\n            if (res.data.success) {\n              this.message = null;\n              clearInterval(this.timer);\n              this.receipt = true;\n              this.paymentData.success = false;\n              this.transaction = res.data.data.transaction;\n              this.receiptDetails = res.data.data.receipt.receiptDetails\n              //Close the modal\n              this.transactionSummary = false\n              this.transactionCompleted = true\n            }\n          })\n          .catch((e) => {\n            alert(e.message);\n          });\n    },\n    formatPrice(value) {\n      var formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'KES',\n        minimumFractionDigits: 2\n      });\n      return formatter.format(value);\n    },\n    gotTo(route){\n      router.push(route)\n    },\n\n  }\n}\n\n</script>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}