{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport NavigationBar from \"@/components/Navigation\";\nimport { biller, execute, parking, rent, trade } from \"@/api\";\nimport router from \"@/router\";\nexport default {\n  name: \"ParkingFleetPayment\",\n  components: {\n    NavigationBar\n  },\n  data() {\n    return {\n      uncompliantVehicles: 0,\n      compliantVehicles: 0,\n      registeredVehicles: 0,\n      sacco: {\n        id: null,\n        saccoID: null,\n        saccoName: null,\n        physicalAddress: null,\n        fullNames: null,\n        role: null,\n        phoneNumber: null,\n        subCountyID: null,\n        subCountyName: null,\n        wardID: null,\n        wardName: null\n      },\n      totalAmount: 0,\n      feesAndChargeItems: [{\n        feeId: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc: null,\n        costCenterNo: null,\n        zone: null,\n        typeDescription: null,\n        customer: null\n      }],\n      billItem: [],\n      billDetails: {\n        id: '',\n        billNo: '',\n        incomeTypeID: '',\n        incomeTypeDescription: '',\n        costCenterNo: '',\n        accountNo: '',\n        feeID: '',\n        detailAmount: '',\n        receiptAmount: '',\n        billBalance: '',\n        wardID: '',\n        subCountyID: '',\n        status: '',\n        dateCreated: ''\n      },\n      billInfo: [],\n      paymentData: {\n        bankReceiptNo: null,\n        accNo: null,\n        payBillNo: null,\n        amount: null,\n        phoneNumber: null,\n        success: false,\n        paymentMode: null\n      },\n      alert: {\n        success: false,\n        info: false,\n        failed: false\n      },\n      vehicles: [{\n        id: null,\n        saccoID: null,\n        saccoName: null,\n        numberPlate: null,\n        category: null,\n        owner: null,\n        penalty: null,\n        phoneNumber: null,\n        feeID: null,\n        amount: null\n      }],\n      selectedVehicles: [{\n        id: null,\n        saccoID: null,\n        saccoName: null,\n        numberPlate: null,\n        category: null,\n        owner: null,\n        penalty: null,\n        phoneNumber: null,\n        feeID: null,\n        amount: null\n      }],\n      message: null,\n      selectAll: false,\n      transactionCompleted: false,\n      transactionSummary: false,\n      paymentPanel: true,\n      paymentMethod: false\n    };\n  },\n  watch: {\n    selectAll(newValue) {\n      if (newValue) {\n        this.selectAllVehicles();\n      } else {\n        this.removeAllVehicles();\n      }\n    }\n  },\n  mounted() {\n    this.saccoName = sessionStorage.getItem(\"saccoName\");\n    this.registeredVehicles = sessionStorage.getItem(\"total\");\n    this.compliantVehicles = sessionStorage.getItem(\"compliant\");\n    this.uncompliantVehicles = sessionStorage.getItem(\"unCompliant\");\n    this.getSaccoVehicles();\n  },\n  methods: {\n    selectAllVehicles() {\n      this.totalAmount = 0;\n      this.selectedVehicles.splice(0);\n      this.billItem.splice(0);\n      // Loop through the vehicles array\n      for (let item of this.vehicles) {\n        // Assign the item's id to the item's saccoID\n        item.id = item.saccoID;\n        // Push the item to the selectedVehicles array\n        this.selectedVehicles.push(item);\n      }\n      this.feesAndChargeItems.splice(0);\n      this.generateFeeAndChargesItem();\n    },\n    removeAllVehicles() {\n      this.totalAmount = 0;\n      this.feesAndChargeItems.splice(0);\n      this.billItem.splice(0);\n      // Loop through the vehicles array\n      for (let item of this.vehicles) {\n        // Assign the item's id to null\n        item.id = null;\n        // Find the index of the item in the selectedVehicles array\n        let index = this.selectedVehicles.findIndex(vehicle => vehicle.id === item.id);\n        // If the index is found, splice the item from the selectedVehicles array\n        if (index !== -1) {\n          this.selectedVehicles.splice(index, 1);\n        }\n      }\n      this.generateFeeAndChargesItem();\n    },\n    selectVehicle(vehicle) {\n      this.totalAmount = 0;\n      this.feesAndChargeItems.splice(0);\n      this.billItem.splice(0);\n      this.selectedVehicles.push(vehicle);\n      this.generateFeeAndChargesItem();\n    },\n    removeVehicle(item) {\n      this.totalAmount = 0;\n      this.feesAndChargeItems.splice(0);\n      this.billItem.splice(0);\n      // Find the index of the item in the selectedVehicles array\n      let index = this.selectedVehicles.findIndex(vehicle => vehicle.id === item.id);\n      // If the index is found, splice the item from the selectedVehicles array\n      if (index !== -1) {\n        this.selectedVehicles.splice(index, 1);\n      }\n      this.generateFeeAndChargesItem();\n    },\n    generateFeeAndChargesItem() {\n      // Loop through the selectedVehicles array\n      for (let item of this.selectedVehicles) {\n        // Create a new object with the mapped values\n        let newItem = {\n          feeId: item.feeID,\n          // Map feeID to feeId\n          unitFeeAmount: item.amount,\n          // Map amount to unitFeeAmount\n          customer: item.numberPlate // Map numberPlate to customer\n        };\n        // Push the new object to the feesAndChargeItems array\n        this.feesAndChargeItems.push(newItem);\n      }\n      this.addToBill();\n    },\n    addToBill() {\n      for (const {\n        typeDescription,\n        feeId,\n        feeDescription,\n        unitFeeAmount,\n        accountNo,\n        costCenterNo,\n        incomeTypeId,\n        customer\n      } of this.feesAndChargeItems) {\n        this.totalAmount += parseFloat(unitFeeAmount);\n        this.billItem.push({\n          typeDescription,\n          feeDescription,\n          unitFeeAmount: unitFeeAmount,\n          accountNo,\n          costCenterNo,\n          incomeTypeId,\n          revenueStreamItem: this.sacco.saccoName,\n          feeId,\n          amount: unitFeeAmount,\n          customer: customer,\n          zone: sessionStorage.getItem(\"zone\"),\n          subCountyID: this.sacco.subCountyID,\n          subCountyName: this.sacco.subCountyName,\n          wardID: this.sacco.wardID,\n          wardName: this.sacco.wardName,\n          idNo: sessionStorage.getItem(\"idNo\"),\n          phoneNumber: sessionStorage.getItem(\"phoneNumber\"),\n          names: sessionStorage.getItem(\"names\"),\n          customerPhoneNumber: this.sacco.phoneNumber,\n          description: this.sacco.saccoName\n        });\n      }\n    },\n    generateBill() {\n      this.paymentMethod = false;\n      this.paymentPanel = true;\n      this.transactionSummary = false;\n      this.transactionCompleted = false;\n      this.message = \"Generating Bill...please wait... \";\n      const data = new FormData();\n      data.append(\"function\", \"generateBill3\");\n      data.append(\"billItem\", JSON.stringify(this.billItem));\n      execute(data, biller).then(res => {\n        this.message = res.data.message;\n        if (res.data.success) {\n          this.billDetails = res.data.data.bill.billDetails;\n          this.billInfo = res.data.data.bill.billInfo;\n          this.paymentData.amount = res.data.data.bill.billDetails.billBalance;\n          this.paymentData.accNo = res.data.data.bill.billDetails.billNo;\n          this.paymentData.payBillNo = res.data.data.billGenerated.payBillNo;\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    printBill() {\n      localStorage['params'] = JSON.stringify({\n        billNo: this.billDetails.billNo\n      });\n      const routeData = this.$router.resolve({\n        name: 'bill'\n      });\n      window.open(routeData.href, '_blank');\n    },\n    printReceipt() {\n      if (this.receiptDetails.receiptNo == null) {\n        alert(\"Try again later\");\n      } else {\n        //  this.$refs.closeReceived.click();\n        localStorage['params'] = JSON.stringify({\n          receiptNo: this.receiptDetails.receiptNo\n        });\n        const routeData = this.$router.resolve({\n          name: 'receipt'\n        });\n        window.open(routeData.href, '_blank');\n      }\n    },\n    showPaymentMethod() {\n      this.paymentMethod = true;\n      this.paymentPanel = false;\n      this.transactionSummary = false;\n      this.transactionCompleted = false;\n    },\n    showTransactionSummary(paymentMode) {\n      this.paymentData.paymentMode = paymentMode;\n      if (paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if (paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      this.paymentMethod = false;\n      this.paymentPanel = false;\n      this.transactionSummary = true;\n      this.transactionCompleted = false;\n    },\n    makePayment() {\n      if (this.paymentData.paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if (this.paymentData.paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      this.message = \"Payment Request sent\";\n      this.paymentData.phoneNumber = this.phoneNumber;\n      const data = new FormData();\n      data.append(\"function\", \"makePayment\");\n      data.append(\"paymentData\", JSON.stringify(this.paymentData));\n      let stream = null;\n      if (this.paymentData.accNo.startsWith(\"SBP\")) {\n        stream = trade;\n      }\n      if (this.paymentData.accNo.startsWith(\"PKN\")) {\n        stream = parking;\n      }\n      if (this.paymentData.accNo.startsWith(\"RNT\")) {\n        stream = rent;\n      }\n      if (this.paymentData.accNo.startsWith(\"BLL\")) {\n        stream = biller;\n      }\n      execute(data, stream).then(res => {\n        if (res.data.success) {\n          this.paymentMethod = false;\n          this.paymentPanel = false;\n          //start checking payment\n          this.timer = setInterval(() => {\n            this.checkPayment();\n          }, 3000);\n        } else {\n          this.rate = null;\n          alert(res.data.message);\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    },\n    checkPayment() {\n      this.randomNumber = Math.floor(Math.random() * 3) + 1;\n      if (this.randomNumber === 1) {\n        this.message = \"Waiting for payment.\";\n      }\n      if (this.randomNumber === 2) {\n        this.message = \"Waiting for payment..\";\n      }\n      if (this.randomNumber === 3) {\n        this.message = \"Waiting for payment...\";\n      }\n      const data = new FormData();\n      data.append(\"function\", \"checkPayment\");\n      data.append(\"accountRef\", this.paymentData.accNo);\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.message = null;\n          clearInterval(this.timer);\n          this.receipt = true;\n          this.paymentData.success = false;\n          this.transaction = res.data.data.transaction;\n          this.receiptDetails = res.data.data.receipt.receiptDetails;\n          //Close the modal\n          this.transactionSummary = false;\n          this.transactionCompleted = true;\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    },\n    getSaccoVehicles() {\n      this.feesAndChargeItems.splice(0);\n      this.selectedVehicles.splice(0);\n      const data = new FormData();\n      data.append(\"function\", \"getSaccoVehicles\");\n      data.append(\"saccoID\", sessionStorage.getItem(\"saccoID\"));\n      execute(data, parking).then(res => {\n        if (res.data.success) {\n          this.sacco = res.data.data.sacco;\n          this.vehicles = res.data.data.vehicles;\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    formatPrice(value) {\n      var formatter = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'KES',\n        minimumFractionDigits: 2\n      });\n      return formatter.format(value);\n    },\n    gotTo(route) {\n      router.push(route);\n    }\n  }\n};","map":{"version":3,"names":["NavigationBar","biller","execute","parking","rent","trade","router","name","components","data","uncompliantVehicles","compliantVehicles","registeredVehicles","sacco","id","saccoID","saccoName","physicalAddress","fullNames","role","phoneNumber","subCountyID","subCountyName","wardID","wardName","totalAmount","feesAndChargeItems","feeId","feeDescription","unitOfMeasure","unitFeeAmount","accountNo","incomeTypeId","feeType","accountDesc","costCenterNo","zone","typeDescription","customer","billItem","billDetails","billNo","incomeTypeID","incomeTypeDescription","feeID","detailAmount","receiptAmount","billBalance","status","dateCreated","billInfo","paymentData","bankReceiptNo","accNo","payBillNo","amount","success","paymentMode","alert","info","failed","vehicles","numberPlate","category","owner","penalty","selectedVehicles","message","selectAll","transactionCompleted","transactionSummary","paymentPanel","paymentMethod","watch","newValue","selectAllVehicles","removeAllVehicles","mounted","sessionStorage","getItem","getSaccoVehicles","methods","splice","item","push","generateFeeAndChargesItem","index","findIndex","vehicle","selectVehicle","removeVehicle","newItem","addToBill","parseFloat","revenueStreamItem","idNo","names","customerPhoneNumber","description","generateBill","FormData","append","JSON","stringify","then","res","bill","billGenerated","catch","e","printBill","localStorage","routeData","$router","resolve","window","open","href","printReceipt","receiptDetails","receiptNo","showPaymentMethod","showTransactionSummary","makePayment","stream","startsWith","timer","setInterval","checkPayment","rate","randomNumber","Math","floor","random","clearInterval","receipt","transaction","formatPrice","value","formatter","Intl","NumberFormat","style","currency","minimumFractionDigits","format","gotTo","route"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/biller/meru-biller/src/components/parking/ParkingFleetPayment.vue"],"sourcesContent":["<template>\n\n<head>\n\n    <meta charset=\"utf-8\" />\n    <title>Desk Birdy | Parking Quick Stats</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta content=\"Rental management system by Nouveta LTD\" name=\"description\" />\n    <meta content=\"Kelvin Njuguna\" name=\"author\" />\n    <!-- App favicon -->\n    <link rel=\"shortcut icon\" href=\"assets/images/favicon.svg\">\n    <!-- droping file -->\n    <link href=\"assets/libs/dropzone/min/dropzone.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n\n    <!-- DataTables -->\n    <link href=\"assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <link href=\"assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css\" rel=\"stylesheet\"\n        type=\"text/css\" />\n\n    <!-- Bootstrap Css -->\n    <link href=\"assets/css/bootstrap.min.css\" id=\"bootstrap-style\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- Bootstrap select styling -->\n    <link rel=\"stylesheet\"\n        href=\"https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/css/bootstrap-select.min.css\">\n    <!-- Icons Css -->\n    <link href=\"assets/css/icons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- App Css-->\n\n    <!-- owl.carousel css -->\n    <link rel=\"stylesheet\" href=\"assets/libs/owl.carousel/assets/owl.carousel.min.css\">\n\n    <link rel=\"stylesheet\" href=\"assets/libs/owl.carousel/assets/owl.theme.default.min.css\">\n\n    <link href=\"assets/css/app.min.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- custom Css-->\n    <link href=\"assets/css/custom.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n\n</head>\n\n<body data-sidebar=\"dark\">\n\n    <!-- Begin page -->\n    <div id=\"layout-wrapper\">\n\n\n        <NavigationBar/>\n\n\n\n\n\n        <!-- ============================================================== -->\n        <!-- Start right Content here -->\n        <!-- ============================================================== -->\n        <div class=\"main-content\">\n\n            <div class=\"page-content\">\n                <div class=\"container-fluid\">\n\n                    <div class=\"row\">\n\n                        <div class=\"col-lg-12 px-sm-30px\">\n                            <div class=\"card\">\n                                <div class=\"card-body\">\n                                    <div class=\"row\">\n\n                                        <div class=\"col-sm-12 align-self-center text-capitalize\">\n                                            <div class=\"text-lg-left mt-4 mt-lg-0\">\n                                                <div class=\"row\">\n                                                    <div class=\"col-sm-12 col-md-3 col-lg-3 mb-5 mb-md-0\">\n                                                        <div>\n                                                            <div class=\"avatar-sm mb-3\">\n                                                                <span\n                                                                        class=\"avatar-title rounded-circle bg-warning font-size-20\">\n                                                                    <i class=\"mdi mdi-car-multiple text-white\"></i>\n                                                                </span>\n                                                            </div>\n                                                            <p class=\"text-muted text-truncate mb-2\">Saccos's/Sub Groups</p>\n                                                            <h5 class=\"mb-0\">{{saccoName}}</h5>\n\n                                                        </div>\n                                                    </div>\n\n                                                    <div class=\"col-sm-6 col-md-3 col-lg-3 mb-5 mb-md-0\">\n                                                        <div>\n                                                            <div class=\"avatar-sm mb-3\">\n                                                                <span\n                                                                        class=\"avatar-title rounded-circle bg-info font-size-20\">\n                                                                    <i\n                                                                            class=\"mdi-file-document-edit-outline mdi text-white\"></i>\n                                                                </span>\n                                                            </div>\n                                                            <p class=\"text-muted text-truncate mb-2 text-capitalize\">\n                                                                Registered Vehicles</p>\n                                                            <h5 class=\"mb-0\">{{registeredVehicles}}</h5>\n                                                        </div>\n                                                    </div>\n\n                                                    <div class=\"col-sm-6 col-md-3 col-lg-3 mb-5 mb-md-0\">\n                                                        <div>\n                                                            <div class=\"avatar-sm mb-3\">\n                                                                <span class=\"avatar-title rounded-circle font-size-20\">\n                                                                    <i class=\"bx bxs-ship text-white\"></i>\n                                                                </span>\n                                                            </div>\n                                                            <p class=\"text-muted text-truncate mb-2\">Compliant Vehicles</p>\n                                                            <h5 class=\"mb-0\">{{compliantVehicles}}</h5>\n                                                        </div>\n                                                    </div>\n\n                                                    <div class=\"col-sm-12 col-md-3 col-lg-3 mb-5 mb-md-0\">\n                                                        <div>\n                                                            <div class=\"avatar-sm mb-3\">\n                                                                <span\n                                                                        class=\"avatar-title rounded-circle bg-danger font-size-20\">\n                                                                    <i class=\"mdi mdi-car-off text-white\"></i>\n                                                                </span>\n                                                            </div>\n                                                            <p class=\"text-muted text-truncate mb-2\">Uncompliant Vehicles\n                                                            </p>\n                                                            <h5 class=\"mb-0\">{{uncompliantVehicles}}</h5>\n\n                                                        </div>\n                                                    </div>\n\n\n                                                </div>\n                                            </div>\n                                        </div>\n\n\n\n                                    </div>\n                                    <!-- end row -->\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"col-12 px-sm-30px\">\n                            <div class=\"card\">\n                                <div class=\"card-header bg-white border-bottom d-flex justify-content-between\">\n                                    <div>\n                                        <h4 class=\"card-title\">Select Vehicles To Be Included in the Invoice</h4>\n                                    </div>\n                                    <div class=\"d-none\">\n                                        <button type=\"button\" class=\"btn btn-primary waves-effect waves-light\">\n                                            <i class=\"mdi mdi-upload font-size-16 align-middle me-2\"></i> Upload Excel Sheet\n                                        </button>\n                                    </div>\n                                </div>\n                                <div class=\"card-body d-flex justify-content-between align-items-center\">\n                                    <div class=\" d-flex\">\n                                        <div class=\"alert alert-success\" role=\"alert\">\n                                            <p class=\"mb-0 pb-0\">Selected Vehicles</p>\n                                            <h4 class=\"alert-heading\">{{selectedVehicles.length}} Vehicles</h4>\n                                        </div>\n\n\n\n                                        <div class=\"alert alert-success mx-3\" role=\"alert\">\n                                            <p class=\"mb-0 pb-0\">Accumulated Penalty</p>\n                                            <h4 class=\"alert-heading\">KES 0.00</h4>\n                                        </div>\n\n                                        <div class=\"alert alert-success\" role=\"alert\">\n                                            <p class=\"mb-0 pb-0\">Seasonal Parking Value</p>\n                                            <h4 class=\"alert-heading\">KES {{totalAmount}}</h4>\n                                        </div>\n\n                                    </div>\n                                    <div class=\"text-right\">\n                                        <button @click=\"generateBill()\" type=\"button\" class=\"btn btn-primary waves-effect btn-label waves-light\" data-toggle=\"modal\" data-target=\"#payment-modal\"><i class=\"bx bx-smile label-icon\"></i> Create Invoice</button>\n                                    </div>\n                                </div>\n\n                               <!-- <div> {{billItem}}</div><br>\n                                <div> {{feesAndChargeItems}}</div><br>\n                                <div> {{selectedVehicles}}</div><br>-->\n\n                                <div class=\"card-body\">\n                                    <div class=\"table-responsive\">\n                                        <table class=\"table align-middle table-nowrap table-hover dt-responsive contacts-table\" id=\"datatable-buttons\">\n                                            <thead class=\"table-light\">\n                                                <tr>\n\n                                                    <th scope=\"col\" style=\"width: 70px;\">\n                                                        <div class=\"the-mail-checkbox pr-4\">\n                                                            <label for=\"selectAll\" class=\"d-none\">Select All</label>\n                                                            <input v-model=\"selectAll\" class=\"form-check-input mt-0 pt-0 form-check-dark\" type=\"checkbox\" id=\"selectAll\">\n                                                        </div>\n                                                    </th>\n                                                    <th scope=\"col\">Vehicle</th>\n                                                    <th scope=\"col\">Phone</th>\n                                                    <th scope=\"col\" class=\"text-right\">Category</th>\n                                                    <th scope=\"col\" class=\"text-right\">Parking Fee</th>\n                                                    <th scope=\"col\" class=\"text-right\">Sacco Name</th>\n                                                    <th></th>\n                                                </tr>\n                                            </thead>\n                                            <tbody>\n\n\n                                                <tr v-for=\"(item,index) in vehicles\" :key=\"index\">\n\n                                                    <td>\n                                                        <div class=\"d-flex  align-items-center\">\n                                                            <div class=\"the-mail-checkbox pr-4\">\n                                                                <input v-model=\"item.id\" @change=\"item.id ? selectVehicle(item) : removeVehicle(item)\" class=\"form-check-input mt-0 pt-0 form-check-dark\" type=\"checkbox\" id=\"formCheck1\">\n                                                            </div>\n\n                                                        </div>\n                                                    </td>\n                                                    <td class=\"text-uppercase\">\n                                                        {{item.numberPlate}}\n                                                    </td>\n                                                    <td>\n                                                        {{item.phoneNumber}}\n                                                    </td>\n                                                    <td class=\"text-right text-uppercase\">{{item.category}}</td>\n                                                    <td class=\"text-right text-uppercase\">KES {{item.amount}}</td>\n                                                    <td class=\"text-right text-uppercase\">{{item.saccoName}}</td>\n                                                </tr>\n                                            </tbody>\n                                        </table>\n                                    </div>\n                                </div>\n\n                            </div>\n                        </div>\n                    </div>\n\n                    <!-- end row -->\n                </div>\n                <!-- container-fluid -->\n            </div>\n            <!-- End Page-content -->\n\n            <!-- receipting modal -->\n\n            <!-- payment modal -->\n            <div class=\"modal fade\" id=\"payment-modal\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" role=\"dialog\" aria-bs-labelledby=\"exampleModalCenterTitle\" aria-bs-hidden=\"true\" data-bs-keyboard=\"false\" data-bs-backdrop=\"static\">\n                <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header d-none\">\n                            <span class=\"badge badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n                            <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle close-modal\" data-dismiss=\"modal\"  aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n                            </button>\n\n                        </div>\n                        <div class=\"modal-body\">\n                            <div class=\"d-flex justify-content-between align-items-center\">\n                                <span class=\"badge  badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n                                <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle pull-right close-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n                                </button>\n                            </div>\n\n                            <div class=\"payment-panel-parent\">\n\n                                <div v-if=\"paymentPanel\" class=\"text-center payment-active-panel d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n                                    <div class=\"success-image mb-4 pb-4 pt-4\">\n                                        <img src=\"assets/images/bills.svg\" height=\"200\" alt=\"\">\n                                    </div>\n                                    <h4 class=\"text-black fw-bold\">{{message}}</h4>\n                                    <p class=\"text-muted mb-4\">The bill has been created Successfully, you can print the bill or opt to receive payment for this bill.</p>\n                                    <div class=\"d-flex w-100 pb-2\">\n                                        <button @click=\"showPaymentMethod()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                            <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                            Receive Payment\n                                        </button>\n                                        <a @click=\"printBill()\" target=\"_blank\" data-dismiss=\"\" type=\"button\" class=\"btn btn-outline-secondary waves-effect dismin-modal\">Print Bill</a>\n                                    </div>\n                                </div>\n\n                                <div v-if=\"paymentMethod\" class=\"send-method payment-panel \">\n                                    <label for=\"\" class=\"mb-0 pb-0\">Payment Method</label>\n                                    <p><small class=\"text-muted\">How would you like to send this money?</small></p>\n\n                                    <div>\n                                        <div class=\"accordion\" id=\"accordionExample\">\n                                            <div class=\"accordion-item\">\n                                                <h2 class=\"accordion-header\" id=\"headingOne\">\n                                                    <button class=\"accordion-button fw-medium\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\n                                                        <div class=\"flex-shrink-0 me-3\">\n                                                            <img class=\"rounded-circle\" src=\"assets/images/users/mpesa.jpg\" alt=\"Mobile Money\" height=\"65\">\n                                                        </div>\n                                                        <div class=\"d-flex flex-column\">\n                                                            <p class=\"m-0 p-0 text-uppercase fw-semibold\">MPESA</p>\n                                                            <p class=\"mb-0 p-0\"> <small>A payment request will be sent directly to the customer</small></p>\n                                                        </div>\n                                                    </button>\n                                                </h2>\n                                                <div id=\"collapseOne\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\n                                                    <div class=\"accordion-body\">\n                                                        <div>\n                                                            <p>\n                                                                A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to the MPESA number you enter below.\n                                                            </p>\n                                                        </div>\n                                                        <div class=\"form-group\">\n                                                            <label for=\"\">MPESA Number</label>\n                                                            <div class=\"form-floating mb-3\">\n                                                                <input v-model=\"phoneNumber\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\n                                                                <label for=\"floatingnameInput\">Phone No.</label>\n                                                            </div>\n\n                                                            <button @click=\"showTransactionSummary('MPESA')\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                                                <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                                                Send Payment Request\n                                                            </button>\n\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                            <div class=\"accordion-item\">\n                                                <h2 class=\"accordion-header\" id=\"headingThree\">\n                                                    <button class=\"accordion-button fw-medium collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                                                        <div class=\"flex-shrink-0 me-3\">\n                                                            <img class=\"rounded-circle\" src=\"assets/images/users/money.jpg\" alt=\"Mobile Money\" height=\"65\">\n                                                        </div>\n                                                        <div class=\"d-flex flex-column\">\n                                                            <p class=\"m-0 p-0 text-uppercase fw-semibold\">bank Receipting</p>\n                                                            <p class=\"mb-0 p-0\"> <small>Enter the receipt number here to confirm payment for this transaction.</small></p>\n\n                                                        </div>\n                                                    </button>\n                                                </h2>\n                                                <div id=\"collapseTwo\" class=\"accordion-collapse collapse\" aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample\">\n                                                    <div class=\"accordion-body\">\n                                                        <div class=\"form-group\">\n                                                            <label for=\"\">Enter The Bank's Receipt Number</label>\n                                                            <div class=\"form-floating mb-3\">\n                                                                <input v-model=\"paymentData.bankReceiptNo\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\n                                                                <label for=\"floatingnameInput\">Bank Ref No.</label>\n                                                            </div>\n\n                                                            <button @click=\"showTransactionSummary('BANK')\" class=\"btn w-100 btn-warning mt-3 btn-bank\">\n                                                                Continue\n                                                            </button>\n                                                        </div>\n                                                    </div>\n                                                </div>\n                                            </div>\n\n                                        </div>\n\n                                    </div>\n                                </div>\n\n                                <div v-if=\"transactionSummary\" class=\"transaction-summary payment-panel\">\n                                    <label for=\"\">Transaction Breakdown</label>\n                                    <div class=\"border p-4 rounded \">\n                                        <div class=\"row\">\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted \">\n                                                    BillO NO.\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    {{billDetails.billNo}}\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted mt-2\">\n                                                    Bill For\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    {{billDetails.incomeTypeDescription}}\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted mt-2\">\n                                                    Payment Method\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    {{paymentData.paymentMode}}\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6\">\n                                                <div class=\"text-muted mt-2\">\n                                                    Transaction Amount\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end\">\n                                                <div class=\" text-right text-black\">\n                                                    KES {{billDetails.billBalance}}\n                                                </div>\n                                            </div>\n\n\n                                            <div class=\"col-12 text-black\"><hr class=\"mb-0 pb-0\"></div>\n\n                                            <div class=\"col-lg-6 text-uppercase\">\n                                                <div class=\"text-muted mt-2 font-21\">\n                                                    Total\n                                                </div>\n                                            </div>\n\n                                            <div class=\"col-lg-6 align-self-end text-uppercase\">\n                                                <div class=\" text-right text-black font-21 fw-bold\">\n                                                    KES {{billDetails.billBalance}}\n                                                </div>\n                                            </div>\n                                        </div>\n\n                                        <div class=\"mpesa-confirmation \">\n                                            <div v-if=\"paymentData.paymentMode=='MPESA'\">\n                                                <p class=\"text-muted mt-2\">A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to <strong class=\"text-black\"> phone number ({{ phoneNumber }})</strong> soon after you click the <strong class=\"text-black text-capitalize\">Send Request</strong> button bellow.\n                                                    <br>\n                                                    <br>\n                                                    Remember to <strong class=\"text-black\">Check your phone</strong> to confirm payment by entering your Mpesa pin.</p>\n                                            </div>\n\n                                            <div>{{message}}  </div>\n                                            <br>\n                                            <button @click=\"makePayment()\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect btn-send waves-light text-center w-100\">\n                                                <div class=\"d-flex justify-content-center align-items-center\">\n                                                    <div class=\"stk-timer-container d-none justify-content-center align-items-center\">\n                                                        <span class=\"mdi mdi-timer-outline font-16px\"></span>\n                                                        <span class=\"stk-timer px-2\"></span>\n                                                    </div>\n                                                    <div class=\"justify-content-center align-items-center d-flex\">\n                                                        <span class=\"px-2\">Send Request</span>\n                                                        <div class=\"flip-x\"><i class=\"mdi mdi-reply ms-3 font-16px\"></i></div>\n                                                    </div>\n                                                </div>\n                                            </button>\n                                        </div>\n\n\n                                    </div>\n                                </div>\n                                <div v-if=\"transactionCompleted\" class=\"text-center d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n                                    <div class=\"success-image mb-4\">\n                                        <img src=\"assets/images/payment-confirmation-images/sent.svg\" height=\"200\" alt=\"\">\n                                    </div>\n                                    <h4 class=\"text-blink-primary fw-bold\">Transaction Complete</h4>\n                                    <p class=\"text-muted mb-4\"><strong class=\"text-black\">KES {{receiptDetails.receiptAmount}}</strong> has been received for <strong class=\"text-black\">Bill No. {{receiptDetails.billNo}}</strong></p>\n                                    <button @click=\"printReceipt()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                                        <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                                        Print Receipt\n                                    </button>\n                                </div>\n\n                            </div>\n                        </div>\n                        <div class=\"modal-footer d-flex d-none bill-modal-footer\">\n                            <button href=\"javascript: void(0);\" disabled class=\"btn btn-outline-light waves-effect waves-light payment-prev\"> <i class=\"mdi mdi-arrow-left ms-1\"></i>Previouse</button>\n                            <button href=\"javascript: void(0);\" class=\"btn btn-primary waves-effect waves-light payment-next\">Next <i class=\"mdi mdi-arrow-right ms-1\"></i></button>\n                            <button href=\"javascript: void(0);\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect waves-light text-center d-none\">\n                                <div class=\"d-flex justify-content-center align-items-center\"> <span>Send Money</span> <div class=\"flip-x\"><i class=\"mdi mdi-reply flip-x ms-3 font-16px\"></i></div></div>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <!-- end of payment modal -->\n\n\n\n            <!-- end of receipting modal -->\n\n            <!-- invoice details -->\n            <div class=\"modal fade invoice-modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myLargeModalLabel\"\n                aria-hidden=\"true\">\n                <div class=\"modal-dialog modal-lg modal-dialog-centered\">\n                    <div class=\"modal-content\">\n                        <div class=\"modal-header\">\n                            <h5 class=\"modal-title\" id=\"myLargeModalLabel\">Invoice Details</h5>\n                            <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n                        </div>\n                        <div class=\"modal-body\">\n                            <div class=\"col-12\">\n                                <address>\n                                    <strong>Billed To:</strong><br>\n                                    Kelvin Njuguna<br>\n                                    email@mail.com, 0704 549 859<br>\n                                    Hse No. 410, 90 Degrees By Tsavo\n                                    <br><br>\n                                    1 Mar 2022, 10:20 AM\n                                </address>\n                            </div>\n                            <div class=\"col-12\">\n                                <div class=\"py-2 mt-3\">\n                                    <h3 class=\"font-size-15 fw-bold\">Invoice Details ( <span\n                                            class=\"text-primary fw-medium\">No. 1237</span> )</h3>\n                                </div>\n                            </div>\n                            <div class=\"col-12\">\n                                <div class=\"table-responsive\">\n                                    <table class=\"table table-nowrap\">\n                                        <thead>\n                                            <tr>\n                                                <th style=\"width: 70px;\">No.</th>\n                                                <th>Item</th>\n                                                <th class=\"text-end\">Amount</th>\n                                            </tr>\n                                        </thead>\n                                        <tbody>\n                                            <tr>\n                                                <td>01</td>\n                                                <td>Rent Deposit</td>\n                                                <td class=\"text-end\">KES 24,500</td>\n                                            </tr>\n\n                                            <tr>\n                                                <td>02</td>\n                                                <td>Monthly Rent</td>\n                                                <td class=\"text-end\">KES 12,000</td>\n                                            </tr>\n\n                                            <tr>\n                                                <td>03</td>\n                                                <td>TAX (18%)</td>\n                                                <td class=\"text-end\">KES 250</td>\n                                            </tr>\n                                            <tr>\n                                                <td colspan=\"2\" class=\"text-end\">Total</td>\n                                                <td class=\"text-end fw-bold\">KES 36,750</td>\n                                            </tr>\n                                            <tr>\n                                                <td colspan=\"2\" class=\"text-end\">Paid</td>\n                                                <td class=\"text-end  fw-bold\">KES 0.00</td>\n                                            </tr>\n\n                                            <tr>\n                                                <td colspan=\"2\" class=\"border-0 text-end\">\n                                                    <strong>Balance</strong>\n                                                </td>\n                                                <td class=\"border-0 text-end\">\n                                                    <h5 class=\"m-0 text-uppercase fw-bold\">KES 36,750</h5>\n                                                </td>\n                                            </tr>\n                                        </tbody>\n                                    </table>\n                                </div>\n                            </div>\n                        </div>\n                        <div class=\"modal-footer\">\n                            <div class=\"col-12 d-none\">\n                                <div class=\"table-resposive p-4 px-2 pt-2 overflow-visible\">\n                                    <table class=\"w-100\">\n                                        <tbody>\n                                            <tr data-id=\"1\">\n                                                <td>\n                                                    <label for=\"\" class=\"\">Payment Method</label>\n                                                    <select class=\"form-control selectpicker w-100 payment-method\"\n                                                        data-style=\"btn-secondary w-100\" data-live-search=\"true\"\n                                                        title=\"Select payment Method\">\n                                                        <option value=\"Mpesa\">MPESA</option>\n                                                        <option value=\"Cash\">CASH</option>\n                                                    </select>\n                                                </td>\n                                                <td class=\"px-3 \">\n                                                    <div class=\"phone-num d-none\">\n                                                        <label for=\"\">Phone No.</label>\n                                                        <input type=\"text \" class=\"form-control w-100 d-flex \"\n                                                            placeholder=\"Phone No.\" spellcheck=\"false\"\n                                                            data-ms-editor=\"true\">\n                                                    </div>\n\n                                                </td>\n                                                <td class=\"px-3\">\n                                                    <label for=\"\">Amount To Be Paid</label>\n                                                    <input type=\"text \" class=\"form-control w-100 d-flex\"\n                                                        placeholder=\"KES\" spellcheck=\"false\" data-ms-editor=\"true\">\n\n                                                </td>\n                                                <td class=\"text-right float-right\">\n                                                    <div class=\"d-flex flex-column\">\n                                                        <label class=\"opacity-0\">Something</label>\n                                                        <a href=\"#\"\n                                                            class=\"btn btn-primary w-md waves-effect waves-light\">Submit</a>\n                                                    </div>\n                                                </td>\n\n\n                                            </tr>\n                                        </tbody>\n                                    </table>\n\n                                </div>\n                            </div>\n                            <div class=\"float-end\">\n                                <a href=\"javascript:window.print()\"\n                                    class=\"btn btn-success waves-effect waves-light me-1\"><i\n                                        class=\"mdi mdi-printer font-16px\"></i></a>\n                                <a href=\"javascript: void(0);\"\n                                    class=\"btn btn-primary w-md waves-effect waves-light\">Receive Payment</a>\n                            </div>\n                        </div>\n\n                    </div>\n                    <!-- /.modal-content -->\n                </div>\n                <!-- /.modal-dialog -->\n            </div>\n            <!-- invoice details -->\n\n            <footer class=\"footer \">\n                <div class=\"container-fluid \">\n                    <div class=\"row \">\n                        <div class=\"col-sm-6 \">\n\n    </div>\n    <div class=\"col-sm-6 \">\n\n    </div>\n    </div>\n    </div>\n    </footer>\n    </div>\n    <!-- end main content-->\n\n    </div>\n    <!-- END layout-wrapper -->\n\n    <!-- Right bar overlay-->\n    <div class=\"rightbar-overlay \"></div>\n\n\n</body>\n</template>\n\n<script>\n    import NavigationBar from \"@/components/Navigation\";\n    import {biller, execute, parking, rent, trade} from \"@/api\";\n    import router from \"@/router\";\n    export default {\n        name: \"ParkingFleetPayment\",\n        components: {NavigationBar},\n        data() {\n            return{\n                uncompliantVehicles:0,\n                compliantVehicles:0,\n                registeredVehicles:0,\n                sacco: {\n                    id: null,\n                    saccoID: null,\n                    saccoName: null,\n                    physicalAddress: null,\n                    fullNames: null,\n                    role:null,\n                    phoneNumber: null,\n                    subCountyID: null,\n                    subCountyName: null,\n                    wardID: null,\n                    wardName: null\n                },\n                totalAmount:0,\n                feesAndChargeItems:[{\n                    feeId: null,\n                    feeDescription: null,\n                    unitOfMeasure: null,\n                    unitFeeAmount: null,\n                    accountNo: null,\n                    incomeTypeId: null,\n                    feeType: null,\n                    accountDesc:null ,\n                    costCenterNo:null,\n                    zone: null,\n                    typeDescription: null,\n                    customer: null\n                }],\n                billItem:[],\n                billDetails:{\n                    id:'',\n                    billNo:'',\n                    incomeTypeID:'',\n                    incomeTypeDescription:'',\n                    costCenterNo:'',\n                    accountNo:'',\n                    feeID:'',\n                    detailAmount:'',\n                    receiptAmount:'',\n                    billBalance:'',\n                    wardID:'',\n                    subCountyID:'',\n                    status:'',\n                    dateCreated:''\n                },\n                billInfo:[],\n                paymentData: {\n                    bankReceiptNo: null,\n                    accNo: null,\n                    payBillNo: null,\n                    amount: null,\n                    phoneNumber: null,\n                    success: false,\n                    paymentMode:null\n                },\n                alert:{\n                    success: false,\n                    info: false,\n                    failed:false\n                },\n                vehicles:[\n                    {\n                        id: null,\n                        saccoID: null,\n                        saccoName: null,\n                        numberPlate: null,\n                        category: null,\n                        owner: null,\n                        penalty: null,\n                        phoneNumber: null,\n                        feeID: null,\n                        amount: null\n                    }\n                ],\n                selectedVehicles:[\n                    {\n                        id: null,\n                        saccoID: null,\n                        saccoName: null,\n                        numberPlate: null,\n                        category: null,\n                        owner: null,\n                        penalty: null,\n                        phoneNumber: null,\n                        feeID: null,\n                        amount: null\n                    }\n                ],\n                message:null,\n                selectAll: false,\n                transactionCompleted: false,\n                transactionSummary: false,\n                paymentPanel: true,\n                paymentMethod: false,\n\n            }\n        },\n        watch: {\n            selectAll(newValue) {\n                if (newValue) {\n                    this.selectAllVehicles();\n                }else {\n                    this.removeAllVehicles();\n                }\n                }\n                },\n\n        mounted() {\n            this.saccoName =  sessionStorage.getItem(\"saccoName\")\n            this.registeredVehicles = sessionStorage.getItem(\"total\")\n            this.compliantVehicles = sessionStorage.getItem(\"compliant\")\n            this.uncompliantVehicles =  sessionStorage.getItem(\"unCompliant\")\n\n            this.getSaccoVehicles()\n        },\n\n        methods: {\n            selectAllVehicles() {\n                this.totalAmount =0\n                this.selectedVehicles.splice(0)\n                this.billItem.splice(0)\n            // Loop through the vehicles array\n                for (let item of this.vehicles) {\n           // Assign the item's id to the item's saccoID\n                    item.id = item.saccoID;\n          // Push the item to the selectedVehicles array\n                    this.selectedVehicles.push(item);\n                }\n\n                this.feesAndChargeItems.splice(0)\n                this.generateFeeAndChargesItem()\n            },\n            removeAllVehicles() {\n                this.totalAmount =0\n                this.feesAndChargeItems.splice(0)\n                this.billItem.splice(0)\n          // Loop through the vehicles array\n                for (let item of this.vehicles) {\n           // Assign the item's id to null\n                    item.id = null;\n           // Find the index of the item in the selectedVehicles array\n                    let index = this.selectedVehicles.findIndex(\n                        (vehicle) => vehicle.id === item.id\n                    );\n            // If the index is found, splice the item from the selectedVehicles array\n                    if (index !== -1) {\n                        this.selectedVehicles.splice(index, 1);\n                    }\n                }\n                this.generateFeeAndChargesItem()\n            },\n            selectVehicle(vehicle){\n                this.totalAmount =0\n                this.feesAndChargeItems.splice(0)\n                this.billItem.splice(0)\n                this.selectedVehicles.push(vehicle)\n                this.generateFeeAndChargesItem()\n            },\n            removeVehicle(item) {\n                this.totalAmount =0\n                this.feesAndChargeItems.splice(0)\n                this.billItem.splice(0)\n              // Find the index of the item in the selectedVehicles array\n                let index = this.selectedVehicles.findIndex(\n                    (vehicle) => vehicle.id === item.id\n                );\n                 // If the index is found, splice the item from the selectedVehicles array\n                if (index !== -1) {\n                    this.selectedVehicles.splice(index, 1);\n                }\n                this.generateFeeAndChargesItem()\n            },\n            generateFeeAndChargesItem() {\n           // Loop through the selectedVehicles array\n                for (let item of this.selectedVehicles) {\n             // Create a new object with the mapped values\n                    let newItem = {\n                        feeId: item.feeID, // Map feeID to feeId\n                        unitFeeAmount: item.amount, // Map amount to unitFeeAmount\n                        customer: item.numberPlate, // Map numberPlate to customer\n                    };\n                  // Push the new object to the feesAndChargeItems array\n                    this.feesAndChargeItems.push(newItem);\n                }\n                this.addToBill()\n            },\n            addToBill(){\n                for (const { typeDescription,feeId, feeDescription, unitFeeAmount, accountNo, costCenterNo, incomeTypeId,customer} of this.feesAndChargeItems) {\n                    this.totalAmount += parseFloat(unitFeeAmount);\n\n                    this.billItem.push({\n                        typeDescription,\n                        feeDescription,\n                        unitFeeAmount: unitFeeAmount,\n                        accountNo,\n                        costCenterNo,\n                        incomeTypeId,\n                        revenueStreamItem: this.sacco.saccoName,\n                        feeId,\n                        amount:  unitFeeAmount,\n                        customer: customer,\n                        zone: sessionStorage.getItem(\"zone\"),\n                        subCountyID:this.sacco.subCountyID,\n                        subCountyName:this.sacco.subCountyName,\n                        wardID: this.sacco.wardID,\n                        wardName: this.sacco.wardName,\n                        idNo: sessionStorage.getItem(\"idNo\"),\n                        phoneNumber: sessionStorage.getItem(\"phoneNumber\"),\n                        names: sessionStorage.getItem(\"names\"),\n                        customerPhoneNumber: this.sacco.phoneNumber,\n                        description: this.sacco.saccoName,\n                    });\n                }\n            },\n\n            generateBill(){\n\n                this.paymentMethod = false;\n                this.paymentPanel = true;\n                this.transactionSummary = false ;\n                this.transactionCompleted = false\n                this.message =\"Generating Bill...please wait... \"\n                const data = new FormData();\n                data.append(\"function\", \"generateBill3\");\n                data.append(\"billItem\", JSON.stringify(this.billItem));\n                execute(data,biller)\n                    .then((res) =>{\n                        this.message =res.data.message\n                        if (res.data.success) {\n                            this.billDetails = res.data.data.bill.billDetails\n                            this.billInfo = res.data.data.bill.billInfo\n                            this.paymentData.amount = res.data.data.bill.billDetails.billBalance\n                            this.paymentData.accNo = res.data.data.bill.billDetails.billNo\n                            this.paymentData.payBillNo = res.data.data.billGenerated.payBillNo\n                        }else{\n                            this.message =res.data.message\n                        }\n                    })\n                    .catch((e) => {\n                        this.message =e.message\n                    });\n            },\n            printBill() {\n                localStorage['params'] = JSON.stringify({\n                    billNo: this.billDetails.billNo\n                })\n                const routeData = this.$router.resolve({name: 'bill'});\n                window.open(routeData.href, '_blank');\n            },\n            printReceipt() {\n                if (this.receiptDetails.receiptNo == null) {\n                    alert(\"Try again later\");\n                } else {\n                    //  this.$refs.closeReceived.click();\n                    localStorage['params'] = JSON.stringify({\n                        receiptNo: this.receiptDetails.receiptNo\n                    })\n                    const routeData = this.$router.resolve({name: 'receipt'});\n                    window.open(routeData.href, '_blank');\n                }\n            },\n            showPaymentMethod(){\n                this.paymentMethod = true;\n                this.paymentPanel = false;\n                this.transactionSummary = false;\n                this.transactionCompleted = false\n            },\n            showTransactionSummary(paymentMode){\n\n                this.paymentData.paymentMode = paymentMode\n\n                if(paymentMode === \"MPESA\") {\n                    if (this.phoneNumber == null) {\n                        alert(\"Enter phone number\");\n                        return;\n                    }\n                }\n                if(paymentMode === \"BANK\") {\n                    if (this.paymentData.bankReceiptNo == null) {\n                        alert(\"Enter Bank Receipt No\");\n                        return;\n                    }\n\n                }\n\n                this.paymentMethod = false;\n                this.paymentPanel = false;\n                this.transactionSummary = true;\n                this.transactionCompleted = false\n            },\n            makePayment() {\n                if(this.paymentData.paymentMode === \"MPESA\") {\n                    if (this.phoneNumber == null) {\n                        alert(\"Enter phone number\");\n                        return;\n                    }\n                }\n                if(this.paymentData.paymentMode === \"BANK\") {\n                    if (this.paymentData.bankReceiptNo == null) {\n                        alert(\"Enter Bank Receipt No\");\n                        return;\n                    }\n                }\n                this.message = \"Payment Request sent\";\n                this.paymentData.phoneNumber = this.phoneNumber\n\n                const data = new FormData();\n                data.append(\"function\", \"makePayment\");\n                data.append(\"paymentData\", JSON.stringify(this.paymentData));\n\n                let stream = null;\n                if (this.paymentData.accNo.startsWith(\"SBP\")) {\n                    stream = trade;\n                }\n                if (this.paymentData.accNo.startsWith(\"PKN\")) {\n                    stream = parking;\n                }\n\n                if (this.paymentData.accNo.startsWith(\"RNT\")) {\n                    stream = rent;\n                }\n\n                if (this.paymentData.accNo.startsWith(\"BLL\")) {\n                    stream = biller;\n                }\n\n                execute(data, stream)\n                    .then((res) => {\n                        if (res.data.success) {\n                            this.paymentMethod = false;\n                            this.paymentPanel = false;\n                            //start checking payment\n                            this.timer = setInterval(() => {\n\n                                this.checkPayment();\n                            }, 3000);\n                        } else {\n                            this.rate = null;\n                            alert(res.data.message);\n                        }\n                    })\n                    .catch((e) => {\n                        alert(e.message);\n                    });\n            },\n            checkPayment() {\n                this.randomNumber = Math.floor(Math.random() * 3) + 1\n                if(this.randomNumber === 1){\n                    this.message = \"Waiting for payment.\";\n                }\n                if(this.randomNumber === 2){\n                    this.message = \"Waiting for payment..\";\n                }\n                if(this.randomNumber ===3){\n                    this.message = \"Waiting for payment...\";\n                }\n                const data = new FormData();\n                data.append(\"function\", \"checkPayment\");\n                data.append(\"accountRef\", this.paymentData.accNo);\n\n                execute(data, biller)\n                    .then((res) => {\n                        if (res.data.success) {\n                            this.message = null;\n                            clearInterval(this.timer);\n                            this.receipt = true;\n                            this.paymentData.success = false;\n                            this.transaction = res.data.data.transaction;\n                            this.receiptDetails = res.data.data.receipt.receiptDetails\n                            //Close the modal\n                            this.transactionSummary = false\n                            this.transactionCompleted = true\n                        }\n                    })\n                    .catch((e) => {\n                        alert(e.message);\n                    });\n            },\n            getSaccoVehicles(){\n                this.feesAndChargeItems.splice(0)\n                this.selectedVehicles.splice(0)\n                const data = new FormData();\n                data.append(\"function\", \"getSaccoVehicles\");\n                data.append(\"saccoID\",  sessionStorage.getItem(\"saccoID\"));\n                execute(data,parking)\n                    .then((res) =>{\n                        if (res.data.success) {\n                            this.sacco = res.data.data.sacco;\n                            this.vehicles =res.data.data.vehicles\n                        }else{\n                            this.message =res.data.message\n                        }\n                    })\n                    .catch((e) => {\n                        this.message =e.message\n                    });\n            },\n            formatPrice(value) {\n                var formatter = new Intl.NumberFormat('en-US', {\n                    style: 'currency',\n                    currency: 'KES',\n                    minimumFractionDigits: 2\n                });\n                return formatter.format(value);\n            },\n            gotTo(route){\n                router.push(route)\n            },\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}