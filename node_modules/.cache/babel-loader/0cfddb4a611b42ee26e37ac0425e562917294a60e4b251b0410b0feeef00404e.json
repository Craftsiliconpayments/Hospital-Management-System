{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { authUrl, execute } from \"@/api\";\nimport router from \"@/router\";\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return {\n      message: '',\n      selectedRoles: [],\n      alert: {\n        success: false,\n        info: false,\n        failed: false\n      },\n      contact: {\n        email: ''\n      },\n      password: ''\n    };\n  },\n  mounted() {},\n  methods: {\n    login() {\n      this.message = \"Authorizing...\";\n      this.alert.failed = false;\n      this.alert.info = true;\n      const data = new FormData();\n      data.append(\"function\", \"loginPortal\");\n      data.append(\"email\", this.contact.email);\n      data.append(\"password\", this.password);\n      execute(data);\n      execute(data, authUrl).then(res => {\n        this.alert.info = false;\n        if (res.data.success) {\n          sessionStorage.setItem(\"isLoggedIn\", true);\n          sessionStorage.setItem(\"names\", res.data.data.user.names);\n          sessionStorage.setItem(\"idNo\", res.data.data.user.idNo);\n          sessionStorage.setItem(\"phoneNumber\", res.data.data.user.phoneNumber);\n          sessionStorage.setItem(\"zone\", res.data.data.user.zone);\n          sessionStorage.setItem(\"category\", res.data.data.user.category);\n          sessionStorage.setItem(\"permission\", res.data.data.user.permission);\n          this.message = res.data.message;\n          this.alert.success = true;\n\n          // Assuming selectedRoles is an array of role objects\n          this.selectedRoles = res.data.data.category.selectedRoles;\n          this.selectedRoles.forEach(selectedRoles => {\n            // Check if the role has a type of \"DASHBOARD\"\n            if (selectedRoles.role === \"DASHBOARD\") {\n              // Your logic for roles with type \"DASHBOARD\"\n              console.log(`Dashboard Role: ${selectedRoles.role}`);\n            }\n          });\n          /*   this.selectedRoles = res.data.data.category.selectedRoles//[{\"id\":\"41\",\"type\":\"MODULES\",\"role\":\"FINANCE ACT\"},{\"id\":\"42\",\"type\":\"MODULES\",\"role\":\"BILLS\"},{\"id\":\"43\",\"type\":\"MODULES\",\"role\":\"BILLS RAISED\"}]\n              loop through selectedRoles and check if role has dashboard*/\n\n          if (res.data.data.user.category === \"CASHIER\") {\n            router.push('new-bill');\n          } else {\n            router.push('dashboard');\n          }\n        } else {\n          sessionStorage.setItem(\"isLoggedIn\", false);\n          this.alert.failed = true;\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        //alert(e.message);\n        this.message = e.message;\n      });\n    }\n  }\n};","map":{"version":3,"names":["authUrl","execute","router","name","data","message","selectedRoles","alert","success","info","failed","contact","email","password","mounted","methods","login","FormData","append","then","res","sessionStorage","setItem","user","names","idNo","phoneNumber","zone","category","permission","forEach","role","console","log","push","catch","e"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/biller/meru-biller/src/components/Login.vue"],"sourcesContent":["<template>\n<div>\n\n  <head>\n\n    <meta charset=\"utf-8\" />\n    <title>Login | Best Birdy</title>\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <meta content=\"Keep your finances and membership up to date\" name=\"description\" />\n    <meta content=\"Kelvin Njuguna Ndungu\" name=\"author\" />\n    <!-- App favicon -->\n    <link rel=\"shortcut icon\" href=\"assets/images/favicon.svg\">\n\n    <!-- owl.carousel css -->\n    <link rel=\"stylesheet\" href=\"assets/libs/owl.carousel/assets/owl.carousel.min.css\">\n\n    <link rel=\"stylesheet\" href=\"assets/libs/owl.carousel/assets/owl.theme.default.min.css\">\n\n    <!-- Bootstrap Css -->\n    <link href=\"assets/css/bootstrap.min.css\" id=\"bootstrap-style\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- Icons Css -->\n    <link href=\"assets/css/icons.min.css\" rel=\"stylesheet\" type=\"text/css\" />\n    <!-- App Css-->\n    <link href=\"assets/css/app.min.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n    <link href=\"assets/css/custom.css\" id=\"app-style\" rel=\"stylesheet\" type=\"text/css\" />\n\n  </head>\n\n  <body class=\"auth-body-bg\">\n\n  <div>\n    <div class=\"container-fluid p-0\">\n      <div class=\"row g-0\">\n\n        <div class=\"col-xl-8 col-lg-8\">\n          <div class=\"auth-full-bg pt-lg-5 p-4\">\n            <div class=\"w-100\">\n              <div class=\"bg-overlay\"></div>\n              <div class=\"d-flex h-100 flex-column\">\n\n                <div class=\"p-4 mt-auto\">\n                  <div class=\"row justify-content-center\">\n                    <div class=\"col-lg-7\">\n                      <div class=\"text-center\">\n                        <img src=\"../../public/logos/county_logo.png\" alt=\"Logo\" class=\"img mb-3\" style=\"width: 170px;\">\n\n\n                        <h4 class=\"mb-0 text-white\"><i class=\"bx bxs-quote-alt-left text-success h1 align-middle me-3\"></i><span>Right there for you</span></h4>\n                        <p class=\"font-size-16 text-white mb-0\">Billing system.</p>\n                        <strong>-</strong>\n\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- end col -->\n\n        <div class=\"col-xl-4 col-md-4\">\n          <div class=\"auth-full-page-content p-md-5 p-4\">\n            <div class=\"w-100\">\n\n              <div class=\"d-flex flex-column h-100\">\n                <div class=\"mb-4 mb-md-5\">\n                  <a href=\"index.html\" class=\"d-block auth-logo\">\n                    <img src=\"../../public/logos/county_logo.png\" alt=\"\" height=\"18\" class=\"auth-logo-dark\">\n                    <img src=\"../../public/logos/county_logo.png\" alt=\"\" height=\"18\" class=\"auth-logo-light\">\n                  </a>\n                </div>\n                <div class=\"my-auto\">\n\n                  <div>\n                    <h5 class=\"text-success\">Welcome Back !</h5>\n                    <p class=\"text-muted\">Sign in to continue Using the <strong>Billing system. </strong>\n                    </p>\n                  </div>\n\n                  <div class=\"mt-4\">\n                      <div class=\"mb-3\">\n                        <label for=\"username\" class=\"form-label\">Username/Id Number</label>\n                        <input v-model=\"contact.email\" type=\"text\" class=\"form-control\" id=\"username\" placeholder=\"Enter your username\">\n                      </div>\n\n                      <div class=\"mb-3\">\n                        <div class=\"float-end\">\n                          <a href=\"auth-recoverpw.html\" class=\"text-muted\">Forgot password?</a>\n                        </div>\n                        <label class=\"form-label\">Password</label>\n                        <div class=\"input-group auth-pass-inputgroup\">\n                          <input v-model=\"password\" type=\"password\" class=\"form-control\" placeholder=\"Enter password\" aria-label=\"Password\" aria-describedby=\"password-addon\">\n                          <button class=\"btn btn-light \" type=\"button\" id=\"password-addon\"><i class=\"mdi mdi-eye-outline\"></i></button>\n                        </div>\n                      </div>\n\n                      <div class=\"form-check\">\n                        <input class=\"form-check-input\" type=\"checkbox\" id=\"remember-check\">\n                        <label class=\"form-check-label\" for=\"remember-check\">\n                          Remember me\n                        </label>\n                      </div>\n\n                      <div v-if=\"alert.success\" class=\"alert alert-success\" role=\"alert\">\n                        {{message}}\n                      </div>\n\n                      <div v-if=\"alert.info\" class=\"alert alert-primary\" role=\"alert\">\n                        {{message}}\n                      </div>\n\n                      <div v-if=\"alert.failed\" class=\"alert alert-danger\" role=\"alert\">\n                        {{message}}\n                      </div>\n\n                      <div class=\"mt-3 d-grid\">\n                        <button @click=\"login\" class=\"btn btn-primary waves-effect waves-light\" type=\"submit\">Log In</button>\n                      </div>\n\n\n                  </div>\n                </div>\n\n                <div class=\"mt-4 mt-md-5 text-center\">\n                  <p class=\"mb-0\">Â©\n<!--                    <script>\n                      document.write(new Date().getFullYear())\n                    </script> Best Birdy <strong>Billing System</strong>-->\n                  </p>\n                </div>\n              </div>\n\n\n            </div>\n          </div>\n        </div>\n        <!-- end col -->\n      </div>\n      <!-- end row -->\n    </div>\n    <!-- end container-fluid -->\n  </div>\n\n  </body>\n\n</div>\n</template>\n\n<script>\n\nimport {authUrl, execute} from \"@/api\";\nimport router from \"@/router\";\n\nexport default {\n  name: \"LoginPage\",\n  data() {\n    return{\n      message:'',\n      selectedRoles: [],\n\n      alert:{\n        success: false,\n        info: false,\n        failed:false\n      },\n      contact: {\n        email: ''\n      },\n      password:''\n    }\n  },\n  mounted() {\n\n  },\n  methods: {\n    login(){\n\n      this.message =\"Authorizing...\"\n      this.alert.failed = false\n      this.alert.info = true\n\n      const data = new FormData();\n      data.append(\"function\", \"loginPortal\");\n      data.append(\"email\", this.contact.email);\n      data.append(\"password\", this.password);\n      execute(data,)\n\n      execute(data,authUrl)\n          .then((res) =>{\n            this.alert.info = false\n            if (res.data.success) {\n\n              sessionStorage.setItem(\"isLoggedIn\",true)\n              sessionStorage.setItem(\"names\",res.data.data.user.names)\n              sessionStorage.setItem(\"idNo\",res.data.data.user.idNo)\n              sessionStorage.setItem(\"phoneNumber\",res.data.data.user.phoneNumber)\n              sessionStorage.setItem(\"zone\",res.data.data.user.zone)\n              sessionStorage.setItem(\"category\",res.data.data.user.category)\n              sessionStorage.setItem(\"permission\",res.data.data.user.permission)\n              this.message =res.data.message\n              this.alert.success = true\n\n              // Assuming selectedRoles is an array of role objects\n              this.selectedRoles = res.data.data.category.selectedRoles;\n              this.selectedRoles.forEach(selectedRoles => {\n                // Check if the role has a type of \"DASHBOARD\"\n                if (selectedRoles.role === \"DASHBOARD\") {\n                  // Your logic for roles with type \"DASHBOARD\"\n                  console.log(`Dashboard Role: ${selectedRoles.role}`);\n                }\n              });\n           /*   this.selectedRoles = res.data.data.category.selectedRoles//[{\"id\":\"41\",\"type\":\"MODULES\",\"role\":\"FINANCE ACT\"},{\"id\":\"42\",\"type\":\"MODULES\",\"role\":\"BILLS\"},{\"id\":\"43\",\"type\":\"MODULES\",\"role\":\"BILLS RAISED\"}]\n\n              loop through selectedRoles and check if role has dashboard*/\n\n              if(res.data.data.user.category ===\"CASHIER\"){\n                router.push('new-bill')\n              }else {\n                router.push('dashboard')\n              }\n\n\n            }else{\n              sessionStorage.setItem(\"isLoggedIn\",false)\n              this.alert.failed = true\n              this.message =res.data.message\n            }\n          })\n          .catch((e) => {\n            //alert(e.message);\n            this.message =e.message\n          });\n    },\n  }\n}\n\n</script>\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}