{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/* eslint-disable */\nimport { biller, execute, fire, getRight, parking, rent, trade } from \"@/api\";\nimport vueHelmet from \"vue-helmet/src/VueHelmet\";\nexport default {\n  name: \"ToolBarFire\",\n  data() {\n    return {\n      generatedInvoice: false,\n      invoiceDetails: false,\n      loading: false,\n      message: null,\n      dashboard: true,\n      validation: true,\n      inspection: true,\n      approval: true,\n      declined: true,\n      approved: true,\n      paidSbp: true,\n      unpaidSbp: true,\n      unpaidBills: true,\n      sbpPaidBills: true,\n      sbpMap: true,\n      selectedSub: null,\n      selectedOption: null,\n      businessID: \"\",\n      businessSelector: true,\n      businessDetailsResult: false,\n      assessmentInvoice: false,\n      fireInvoiceCreator: false,\n      businessDetails: {\n        id: \"\",\n        businessID: \"\",\n        businessName: \"\",\n        subCountyID: \"\",\n        subCountyName: \"\",\n        wardID: \"\",\n        wardName: \"\",\n        plotNumber: \"\",\n        physicalAddress: \"\",\n        buildingName: \"\",\n        buildingOccupancy: \"\",\n        floorNo: \"\",\n        roomNo: \"\",\n        premiseSize: \"\",\n        numberOfEmployees: \"\",\n        tonnage: \"\",\n        businessDes: \"\",\n        businessCategory: \"\",\n        businessSubCategory: \"\",\n        incomeTypeID: \"\",\n        feeID: \"\",\n        businessEmail: \"\",\n        postalAddress: \"\",\n        postalCode: \"\",\n        businessPhone: \"\",\n        contactPersonNames: \"\",\n        contactPersonIDNo: \"\",\n        businessRole: \"\",\n        contactPersonPhone: \"\",\n        contactPersonEmail: \"\",\n        fullNames: \"\",\n        ownerID: \"\",\n        ownerPhone: \"\",\n        ownerEmail: \"\",\n        kraPin: \"\",\n        createdBy: \"\",\n        createdByIDNo: \"\",\n        dateCreated: \"\",\n        lat: 0.0,\n        lng: 0.0\n      },\n      fireSafety: [],\n      selectedItems: [],\n      recommendations: [],\n      incomeType: {\n        incomeTypeId: null,\n        incomeTypeDescription: null,\n        incomeTypePrefix: null,\n        fundDescription: null,\n        status: null\n      },\n      description: '',\n      amount: 0,\n      unitFeeAmount: 0,\n      feeID: '',\n      quantity: 1,\n      incomeTypesMain: [],\n      incomeTypes: [],\n      feesAndChargesMain: [{\n        feeId: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc: null,\n        costCenterNo: null,\n        zone: null,\n        typeDescription: null,\n        quantity: 1\n      }],\n      feesAndCharges: [{\n        feeId: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc: null,\n        costCenterNo: null,\n        zone: null,\n        typeDescription: null,\n        quantity: 1\n      }],\n      rowItemsFees: [{\n        customer: null,\n        feeId: null,\n        description: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc: null,\n        costCenterNo: null,\n        zone: null,\n        typeDescription: null,\n        quantity: 1\n      }],\n      rowItemsFeesMain: [{\n        customer: null,\n        feeId: null,\n        description: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc: null,\n        costCenterNo: null,\n        zone: null,\n        typeDescription: null,\n        quantity: 1\n      }],\n      feesAndChargeItems: [],\n      billItem: [],\n      transactionCompleted: false,\n      transactionSummary: false,\n      paymentPanel: true,\n      paymentMethod: false,\n      billDetails: {\n        id: '',\n        billNo: '',\n        incomeTypeID: '',\n        incomeTypeDescription: '',\n        costCenterNo: '',\n        accountNo: '',\n        feeID: '',\n        detailAmount: '',\n        receiptAmount: '',\n        billBalance: '',\n        wardID: '',\n        subCountyID: '',\n        status: '',\n        dateCreated: ''\n      },\n      billInfo: [],\n      paymentData: {\n        bankReceiptNo: null,\n        accNo: null,\n        payBillNo: null,\n        amount: null,\n        phoneNumber: null,\n        success: false,\n        paymentMode: null,\n        sessionNames: null,\n        sessionIdNo: null,\n        sessionPhoneNumber: null\n      },\n      timer: null,\n      categoriesSaftyString: '',\n      recommendationsString: '',\n      billGenerated: {\n        billNo: null,\n        payBillNo: null,\n        amount: null,\n        success: true\n      },\n      confirmCash: false,\n      phoneNumber: '',\n      customerName: '',\n      email: ''\n    };\n  },\n  mounted() {\n    this.selectedSub = sessionStorage.getItem(\"selectedSub\");\n    this.getFireMeasures();\n    this.getIncomeTypes();\n    this.rowItemsFees.splice(0);\n    this.getIncomeTypesMain();\n  },\n  watch: {\n    rowItemsFees: {\n      handler(newValue) {\n        // Iterate over each item in rowItemsFees\n        newValue.forEach(item => {\n          if (item.description && item.description.trim() !== '') {\n            // Split the description\n            const parts = item.description.split(':');\n\n            // Check if parts have the expected length\n            if (parts.length >= 4) {\n              const feeId = parts[0];\n              const feeDescription = parts[1];\n              const unitFeeAmount = parts[2];\n              const incomeTypeId = parts[3];\n\n              // Update the item with the extracted values\n              item.feeId = feeId;\n              item.feeDescription = feeDescription;\n              item.unitFeeAmount = unitFeeAmount;\n              item.incomeTypeId = incomeTypeId;\n            }\n          }\n        });\n      },\n      deep: true // Watch deeply to detect changes within array items\n    }\n  },\n\n  methods: {\n    getRight(type) {\n      return getRight(type);\n    },\n    goTo(route) {\n      this.$router.push(route);\n      sessionStorage.setItem(\"selectedSub\", route);\n      this.selectedSub = route;\n    },\n    getBusiness() {\n      this.loading = true;\n      this.message = null;\n      this.businessDetailsResult = false;\n      const data = new FormData();\n      data.append(\"function\", \"getBusiness\");\n      data.append(\"businessID\", this.businessID);\n      execute(data, trade).then(res => {\n        this.loading = false;\n        if (res.data.success) {\n          this.businessDetailsResult = true;\n          this.businessDetails = res.data.data.business;\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    getFireMeasures() {\n      const data = new FormData();\n      data.append(\"function\", \"getFireMeasures\");\n      execute(data, fire).then(res => {\n        if (res.data.success) {\n          this.fireSafety = res.data.data.fireSafety.map(item => ({\n            ...item,\n            selected: false\n          }));\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    updateSelectedItems() {\n      this.selectedItems = this.fireSafety.filter(item => item.selected);\n      //{ \"id\": \"2\", \"category\": \"They have A Rear escape route\", \"selected\": true }, { \"id\": \"3\", \"category\": \"General House Keeping is good\", \"selected\": true }, { \"id\": \"4\", \"category\": \"Adequate Fire Signs\", \"selected\": true }, { \"id\": \"5\", \"category\": \"Electrical Installation Done To Recommended\\n\", \"selected\": true } ]\n      this.categoriesSaftyString = this.selectedItems.map(item => item.category) // Map to an array of category values\n      .join(', '); // Join the array into a comma-separated string\n    },\n\n    addRecommendation() {\n      this.recommendations.push({\n        text: ''\n      });\n    },\n    removeRecommendation(index) {\n      this.recommendations.splice(index, 1);\n    },\n    submitRecommendations() {\n      this.recommendationsString = this.recommendations.map(r => r.text) // Get the text property from each recommendation\n      .join(', '); // Join all texts into a single comma-separated string\n    },\n\n    getIncomeTypesMain() {\n      const data = new FormData();\n      data.append(\"function\", \"getIncomeTypes\");\n      data.append(\"incomeTypePrefix\", \"FIREINSPECTION\");\n      data.append(\"keyword\", \"Certificate\");\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.incomeTypesMain = res.data.data.incomeTypes;\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    selectedIncomeTypeMain(event) {\n      const value = event.target.value;\n      const result = JSON.parse(value);\n      this.getFeesAndChargesMain(result.incomeTypeId);\n    },\n    selectedFeeAndChargeMain(event) {\n      this.updateSelectedItems();\n      this.submitRecommendations();\n\n      //[General House Keeping is good, Electrical Installation Done To Recommended \\n, They have A Rear escape route, Adequate Fire Signs, Provide red sig, Recommendations: adding red door]\n      const selectedItem = JSON.parse(event.target.value);\n      this.rowItemsFeesMain[0] = selectedItem;\n      this.rowItemsFeesMain[0].customer = \"Business ID:\" + this.businessDetails.businessID, this.rowItemsFeesMain[0].description = `[${this.categoriesSaftyString} ,Recommendations : ${this.recommendationsString}]`;\n    },\n    getFeesAndChargesMain(incomeTypeId) {\n      this.feesAndCharges = []; // Clear the array\n      const data = new FormData();\n      data.append(\"function\", \"getFeesAndCharges\");\n      data.append(\"incomeTypeId\", incomeTypeId);\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.feesAndChargesMain = res.data.data.feesAndCharges;\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    //Others\n    getIncomeTypes() {\n      const data = new FormData();\n      data.append(\"function\", \"getIncomeTypes\");\n      data.append(\"incomeTypePrefix\", \"FIREINSPECTION\");\n      data.append(\"keyword\", \"Other\");\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.incomeTypes = res.data.data.incomeTypes;\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    getFeesAndCharges(incomeTypeId) {\n      this.feesAndCharges = []; // Clear the array\n      const data = new FormData();\n      data.append(\"function\", \"getFeesAndCharges\");\n      data.append(\"incomeTypeId\", incomeTypeId);\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.feesAndCharges = res.data.data.feesAndCharges;\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    selectedIncomeType(event) {\n      const value = event.target.value;\n      const result = JSON.parse(value);\n      this.getFeesAndCharges(result.incomeTypeId);\n    },\n    selectedFeeAndCharge(event, index) {\n      const selectedItem = JSON.parse(event.target.value);\n      this.feesAndChargeItems[index].feeAndCharge = selectedItem;\n      this.feesAndChargeItems[index].unitFeeAmount = selectedItem.unitFeeAmount;\n      this.amount = this.quantity * this.feesAndChargeItems[index].unitFeeAmount;\n    },\n    //value=\"item2.feeId+':'+ item2.feeDescription+':'+ item2.unitFeeAmount+':'+item2.incomeTypeId\n    addRowItem(quantity, description) {\n      this.rowItemsFees.push({\n        quantity: quantity,\n        description: description\n      });\n    },\n    removeRowItem(position) {\n      this.rowItemsFees.splice(position, 1);\n    },\n    totalAmount(amount, quantity) {\n      // Convert amount and months to numbers before multiplying\n      amount = Number(amount);\n      quantity = Number(quantity);\n      // Return the result of multiplication\n      return amount * quantity;\n    },\n    addToBill() {\n      for (const {\n        typeDescription,\n        feeId,\n        feeDescription,\n        unitFeeAmount,\n        accountNo,\n        costCenterNo,\n        incomeTypeId,\n        customer,\n        quantity,\n        description\n      } of this.rowItemsFeesMain) {\n        this.billItem.push({\n          fiscalYear: this.fiscalYear,\n          typeDescription,\n          feeDescription,\n          quantity,\n          unitFeeAmount: unitFeeAmount,\n          accountNo,\n          costCenterNo,\n          incomeTypeId,\n          revenueStreamItem: \"\",\n          feeId,\n          amount: unitFeeAmount,\n          customer: customer,\n          zone: \"\",\n          subCountyID: this.businessDetails.subCountyID,\n          subCountyName: this.businessDetails.subCountyName,\n          wardID: this.businessDetails.wardID,\n          wardName: this.businessDetails.wardName,\n          idNo: sessionStorage.getItem(\"sessionIdNo\"),\n          phoneNumber: sessionStorage.getItem(\"sessionPhoneNumber\"),\n          names: sessionStorage.getItem(\"sessionNames\"),\n          customerPhoneNumber: this.businessDetails.ownerPhone,\n          description\n        });\n      }\n      for (const {\n        typeDescription,\n        feeId,\n        feeDescription,\n        unitFeeAmount,\n        accountNo,\n        costCenterNo,\n        incomeTypeId,\n        customer,\n        quantity\n      } of this.rowItemsFees) {\n        this.billItem.push({\n          fiscalYear: this.fiscalYear,\n          typeDescription,\n          feeDescription,\n          quantity,\n          unitFeeAmount: unitFeeAmount,\n          accountNo,\n          costCenterNo,\n          incomeTypeId,\n          revenueStreamItem: \"\",\n          feeId,\n          amount: unitFeeAmount * quantity,\n          customer: customer,\n          zone: \"\",\n          subCountyID: this.businessDetails.subCountyID,\n          subCountyName: this.businessDetails.subCountyName,\n          wardID: this.businessDetails.wardID,\n          wardName: this.businessDetails.wardName,\n          idNo: sessionStorage.getItem(\"sessionIdNo\"),\n          phoneNumber: sessionStorage.getItem(\"sessionPhoneNumber\"),\n          names: sessionStorage.getItem(\"sessionNames\"),\n          customerPhoneNumber: this.businessDetails.ownerPhone,\n          description: \"\"\n        });\n      }\n      this.generateBill();\n    },\n    generateBill() {\n      this.fireInvoiceCreator = false;\n      this.generatedInvoice = true;\n      this.loading = true;\n      const data = new FormData();\n      data.append(\"function\", \"generateBill3\");\n      data.append(\"billItem\", JSON.stringify(this.billItem));\n      execute(data, biller).then(res => {\n        this.loading = false;\n        if (res.data.success) {\n          this.invoiceDetails = true;\n          this.billDetails = res.data.data.bill.billDetails;\n          this.billInfo = res.data.data.bill.billInfo;\n          this.paymentData.amount = res.data.data.bill.billDetails.billBalance;\n          this.paymentData.accNo = res.data.data.bill.billDetails.billNo;\n          this.paymentData.payBillNo = res.data.data.billGenerated.payBillNo;\n          this.paymentData.sessionPhoneNumber = sessionStorage.getItem(\"sessionPhoneNumber\");\n          this.paymentData.sessionNames = sessionStorage.getItem(\"sessionNames\");\n          this.paymentData.sessionIdNo = sessionStorage.getItem(\"sessionIdNo\");\n        } else {\n          this.message = res.data.message;\n        }\n      }).catch(e => {\n        this.message = e.message;\n      });\n    },\n    printBill() {\n      localStorage['params'] = JSON.stringify({\n        billNo: this.billDetails.billNo\n      });\n      const routeData = this.$router.resolve({\n        name: 'bill'\n      });\n      window.open(routeData.href, '_blank');\n    },\n    printReceipt() {\n      if (this.receiptDetails.receiptNo == null) {\n        alert(\"Try again later\");\n      } else {\n        //  this.$refs.closeReceived.click();\n        localStorage['params'] = JSON.stringify({\n          receiptNo: this.receiptDetails.receiptNo\n        });\n        const routeData = this.$router.resolve({\n          name: 'receipt'\n        });\n        window.open(routeData.href, '_blank');\n      }\n    },\n    showPaymentMethod() {\n      this.paymentMethod = true;\n      this.paymentPanel = false;\n      this.transactionSummary = false;\n      this.transactionCompleted = false;\n    },\n    showTransactionSummary(paymentMode) {\n      this.paymentData.paymentMode = paymentMode;\n      if (paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if (paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      this.paymentMethod = false;\n      this.paymentPanel = false;\n      this.transactionSummary = true;\n      this.transactionCompleted = false;\n    },\n    makePayment() {\n      if (this.paymentData.paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if (this.paymentData.paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      this.message = \"Payment Request sent\";\n      this.paymentData.phoneNumber = this.phoneNumber;\n      const data = new FormData();\n      data.append(\"function\", \"makePayment\");\n      data.append(\"paymentData\", JSON.stringify(this.paymentData));\n      let stream = null;\n      if (this.paymentData.accNo.startsWith(\"SBP\")) {\n        stream = trade;\n      }\n      if (this.paymentData.accNo.startsWith(\"PKN\")) {\n        stream = parking;\n      }\n      if (this.paymentData.accNo.startsWith(\"RNT\")) {\n        stream = rent;\n      }\n      if (this.paymentData.accNo.startsWith(\"BLL\")) {\n        stream = biller;\n      }\n      execute(data, stream).then(res => {\n        if (res.data.success) {\n          this.paymentMethod = false;\n          this.paymentPanel = false;\n          //start checking payment\n          this.timer = setInterval(() => {\n            this.checkPayment();\n          }, 3000);\n        } else {\n          this.rate = null;\n          alert(res.data.message);\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    },\n    checkPayment() {\n      this.randomNumber = Math.floor(Math.random() * 3) + 1;\n      if (this.randomNumber === 1) {\n        this.message = \"Waiting for payment.\";\n      }\n      if (this.randomNumber === 2) {\n        this.message = \"Waiting for payment..\";\n      }\n      if (this.randomNumber === 3) {\n        this.message = \"Waiting for payment...\";\n      }\n      const data = new FormData();\n      data.append(\"function\", \"checkPayment\");\n      data.append(\"accountRef\", this.paymentData.accNo);\n      execute(data, biller).then(res => {\n        if (res.data.success) {\n          this.message = null;\n          clearInterval(this.timer);\n          this.receipt = true;\n          this.paymentData.success = false;\n          this.transaction = res.data.data.transaction;\n          this.receiptDetails = res.data.data.receipt.receiptDetails;\n          //Close the modal\n          this.transactionSummary = false;\n          this.transactionCompleted = true;\n        }\n      }).catch(e => {\n        alert(e.message);\n      });\n    }\n  }\n};","map":{"version":3,"names":["biller","execute","fire","getRight","parking","rent","trade","vueHelmet","name","data","generatedInvoice","invoiceDetails","loading","message","dashboard","validation","inspection","approval","declined","approved","paidSbp","unpaidSbp","unpaidBills","sbpPaidBills","sbpMap","selectedSub","selectedOption","businessID","businessSelector","businessDetailsResult","assessmentInvoice","fireInvoiceCreator","businessDetails","id","businessName","subCountyID","subCountyName","wardID","wardName","plotNumber","physicalAddress","buildingName","buildingOccupancy","floorNo","roomNo","premiseSize","numberOfEmployees","tonnage","businessDes","businessCategory","businessSubCategory","incomeTypeID","feeID","businessEmail","postalAddress","postalCode","businessPhone","contactPersonNames","contactPersonIDNo","businessRole","contactPersonPhone","contactPersonEmail","fullNames","ownerID","ownerPhone","ownerEmail","kraPin","createdBy","createdByIDNo","dateCreated","lat","lng","fireSafety","selectedItems","recommendations","incomeType","incomeTypeId","incomeTypeDescription","incomeTypePrefix","fundDescription","status","description","amount","unitFeeAmount","quantity","incomeTypesMain","incomeTypes","feesAndChargesMain","feeId","feeDescription","unitOfMeasure","accountNo","feeType","accountDesc","costCenterNo","zone","typeDescription","feesAndCharges","rowItemsFees","customer","rowItemsFeesMain","feesAndChargeItems","billItem","transactionCompleted","transactionSummary","paymentPanel","paymentMethod","billDetails","billNo","detailAmount","receiptAmount","billBalance","billInfo","paymentData","bankReceiptNo","accNo","payBillNo","phoneNumber","success","paymentMode","sessionNames","sessionIdNo","sessionPhoneNumber","timer","categoriesSaftyString","recommendationsString","billGenerated","confirmCash","customerName","email","mounted","sessionStorage","getItem","getFireMeasures","getIncomeTypes","splice","getIncomeTypesMain","watch","handler","newValue","forEach","item","trim","parts","split","length","deep","methods","type","goTo","route","$router","push","setItem","getBusiness","FormData","append","then","res","business","catch","e","map","selected","updateSelectedItems","filter","category","join","addRecommendation","text","removeRecommendation","index","submitRecommendations","r","selectedIncomeTypeMain","event","value","target","result","JSON","parse","getFeesAndChargesMain","selectedFeeAndChargeMain","selectedItem","getFeesAndCharges","selectedIncomeType","selectedFeeAndCharge","feeAndCharge","addRowItem","removeRowItem","position","totalAmount","Number","addToBill","fiscalYear","revenueStreamItem","idNo","names","customerPhoneNumber","generateBill","stringify","bill","printBill","localStorage","routeData","resolve","window","open","href","printReceipt","receiptDetails","receiptNo","alert","showPaymentMethod","showTransactionSummary","makePayment","stream","startsWith","setInterval","checkPayment","rate","randomNumber","Math","floor","random","clearInterval","receipt","transaction"],"sources":["/Applications/XAMPP/xamppfiles/htdocs/biller/meru-biller/src/components/fire/ToolBarFire.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n    <div class=\"col-12 active\">\n      <div class=\"card active\">\n        <div class=\"card-body mini-nav bg-primary pt-2 pb-3 active \">\n          <nav class=\"navbar navbar-expand-md navbar navbar-dark bg-primary py-2 active\">\n            <button\n                class=\"navbar-toggler btn btn-sm px-3 font-size-16 header-item waves-effect h-auto text-primary\"\n                type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNavAltMarkup\"\n                aria-controls=\"navbarNavAltMarkup\" aria-expanded=\"false\"\n                aria-label=\"Toggle navigation\">\n              <span class=\"mdi mdi-menu\"></span>\n            </button>\n            <div class=\"collapse navbar-collapse justify-content-between active\"\n                 id=\"navbarNavAltMarkup\">\n              <div class=\"navbar-nav\">\n\n                <router-link v-if=\"getRight('DASHBOARD')\" :to=\"{name: 'fire-dashboard'}\" active-class=\"mm-active\"\n                             class=\"nav-item nav-link\">Quick Stats\n                </router-link>\n                <!--                <router-link v-if=\"getRight('DASHBOARD')\" :to=\"{name: 'cert-biz-stats'}\" active-class=\"mm-active\" class=\"nav-item nav-link\">Fire Permit Register</router-link>-->\n                <router-link v-if=\"getRight('DASHBOARD')\" :to=\"{name: 'cert-fire-pending'}\" active-class=\"mm-active\"\n                             class=\"nav-item nav-link\">Pending Invoices\n                </router-link>\n                <!--                <router-link v-if=\"getRight('DASHBOARD')\" :to=\"{name: 'cert-biz-stats'}\" active-class=\"mm-active\" class=\"nav-item nav-link\">Potential Businesses</router-link>-->\n                <router-link v-if=\"getRight('DASHBOARD')\" :to=\"{name: 'pending-approval-fire'}\" active-class=\"mm-active\"\n                             class=\"nav-item nav-link\">Pending Approval\n                </router-link>\n                <router-link v-if=\"getRight('DASHBOARD')\" :to=\"{name: 'active-fireCert'}\" active-class=\"mm-active\"\n                             class=\"nav-item nav-link\">Active Certificates\n                </router-link>\n                <router-link v-if=\"getRight('DASHBOARD')\" :to=\"{name: 'expired-fireCert'}\" active-class=\"mm-active\"\n                             class=\"nav-item nav-link\">Expired Certificates\n                </router-link>\n                <router-link v-if=\"getRight('DASHBOARD')\" :to=\"{name: 'fire-paid-bills'}\" active-class=\"mm-active\"\n                             class=\"nav-item nav-link\">Fire Paid Bills\n                </router-link>\n                <!--\n                                <router-link v-if=\"getRight('DASHBOARD')\" :to=\"{name: 'cert-biz-stats'}\" active-class=\"mm-active\" class=\"nav-item nav-link\">Map View</router-link>\n                -->\n\n              </div>\n\n              <button class=\"btn btn-info waves-effect waves-light my-2 my-sm-0 text-uppercase\"\n                      data-bs-toggle=\"modal\"\n                      data-bs-target=\".new-fire-invoice\">Invoice A Business\n              </button>\n\n            </div>\n          </nav>\n        </div>\n      </div>\n\n    </div>\n  </div>\n\n  <!-- creating a fire invoice -->\n  <div class=\"modal fade new-fire-invoice\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1 \" role=\"dialog \"\n       aria-labelledby=\"staticBackdropLabel \" aria-hidden=\"true \">\n    <div class=\"modal-dialog modal-lg modal-dialog-centered\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header liq-header\">\n          <h5 class=\"modal-title text-uppercase\" id=\"myLargeModalLabel\">New Fire inspection Permit application</h5>\n\n          <button type=\"button\" class=\"btn-close\" data-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body pb-4 searching-modal-body\">\n          <div v-if=\"businessSelector ==true \" class=\"row business-selector\">\n            <div class=\"col-md-12 mb-3\">\n              <label for=\"\">Search or Input establishment details</label>\n              <select class=\"form-select fire-search-method\" v-model=\"selectedOption\">\n                <option value=\"\">Select Search Method</option>\n                <option value=\"searchBusiness\">Search from Existing Registered Businesses</option>\n                <option value=\"paidInvoice\">Use Paid Invoice</option>\n              </select>\n\n            </div>\n          </div>\n\n          <div class=\"row\">\n\n            <!-- existing business -->\n            <div v-if=\"selectedOption ==='searchBusiness'\" class=\"col-12 business-id-search\">\n              <label for=\"\">Search For Business To continue</label>\n              <div class=\"input-group mb-3\">\n\n                <input v-model=\"businessID\" type=\"text\" class=\"form-control\" placeholder=\"Enter Business ID\">\n                <button @click=\"getBusiness\" type=\"button\" class=\"btn btn-primary waves-effect waves-light search-bz-btn\">\n                  <i class=\"bx bx-search-alt-2 font-size-16 align-middle me-2\"></i> Search\n                </button>\n              </div>\n\n              <!-- business serach results start here display only  when there are results to be shown -->\n              <div class=\"row pt-3\">\n\n                <!-- use this loader when serching for the business -->\n                <div class=\"searching-biz-loader d-none\">\n                  <div class=\"loader-modal p-5\">\n                    <div class=\"d-flex align-items-center justify-content-center p-5 text-center flex-column\">\n                      <div class=\"spinner-border text-dark m-1\" role=\"status\">\n                        <span class=\"sr-only fw-bold\">Searching</span>\n                      </div>\n                      <p class=\"pt-4 fw-strong text-uppercase fw-bold\">Please wait patiently while our system looks <br>\n                        for the business.</p>\n                    </div>\n                  </div>\n                </div>\n\n                <div v-if=\"businessDetailsResult\" class=\"col-12 biz-search-results\">\n                  <table class=\"table table-sm text-uppercase table-striped\">\n                    <thead class=\"table-dark\">\n                    <th colspan=\"2\">Search Results for Business with <span class=\"text-warning\">Business ID 1234</span>\n                    </th>\n                    </thead>\n                    <tbody>\n                    <tr>\n                      <th>\n                        Name of Establishment\n                      </th>\n                      <td>\n                        {{businessDetails.buildingName}}\n                      </td>\n                    </tr>\n\n                    <tr>\n                      <th>\n                        Sub County\n                      </th>\n                      <td>\n                        {{businessDetails.subCountyName}}\n                      </td>\n                    </tr>\n\n                    <tr>\n                      <th>\n                        Ward\n                      </th>\n                      <td>\n                       {{businessDetails.wardName}}\n                      </td>\n                    </tr>\n\n                    <tr>\n                      <th>\n                        Physical Address\n                      </th>\n                      <td>\n                       {{businessDetails.physicalAddress}}\n                      </td>\n                    </tr>\n\n                    <tr>\n                      <th>\n                        Building/Name of Premises\n                      </th>\n                      <td>\n                        {{businessDetails.buildingName}}\n                      </td>\n                    </tr>\n\n                    <tr>\n                      <th>\n                        Postal Address\n                      </th>\n                      <td>\n                       {{businessDetails.postalAddress}}\n                      </td>\n                    </tr>\n\n                    <tr>\n                      <th>\n                        Applicant's Name\n                      </th>\n                      <td>\n                       {{businessDetails.fullNames}}\n                      </td>\n                    </tr>\n\n                    <tr>\n                      <th>\n                        Phone Number\n                      </th>\n                      <td>\n                        {{businessDetails.ownerPhone}}\n                      </td>\n                    </tr>\n\n                    <tr>\n                      <th>\n                        Email Address\n                      </th>\n                      <td>\n                        {{businessDetails.ownerEmail}}\n                      </td>\n                    </tr>\n                    </tbody>\n                  </table>\n\n                  <div class=\"row\">\n                    <div class=\"col-12\">\n                      <button @click=\"assessmentInvoice = true , businessDetailsResult = false, businessSelector = false, selectedOption =''\" type=\"button\"\n                              class=\"btn btn-success waves-effect waves-light w-100 go-to-assesment d-flex justify-content-center align-items-center\">\n                        Next <i\n                          class=\"dripicons-arrow-thin-right font-size-16 align-middle me-2 d-flex align-items-center mx-2\"></i>\n                      </button>\n\n                    </div>\n\n                  </div>\n                </div>\n\n                <!-- use this for a search that has no results -->\n                <div v-if=\"message !==null\" class=\"col-12 no-results\">\n                  <div\n                      class=\"p-4 border-radius border-solid border-primary border-2 d-flex flex-column align-items-center justify-content-center\">\n                    <div class=\"img mb-4 pt-3\">\n                      <img src=\"assets/images/no-result-found-icon.svg\" style=\"height: 65px;\" class=\"img\" alt=\"\">\n                    </div>\n                    <div class=\"text-center\">\n                      <h4 class=\"card-title text-uppercase text-dark\">No results Found</h4>\n                      <p>\n                        The business ID you entered does not correspond to any registered business. Please try your\n                        search again <br> to find the desired results.</p>\n\n\n                    </div>\n                  </div>\n                </div>\n\n              </div>\n              <!-- end of business serach results -->\n            </div>\n\n\n            <!-- fire invoicing -->\n            <div v-if=\"fireInvoiceCreator\" class=\"col-12 fire-invoice-creator pt-4\">\n              <div class=\"row\">\n                <div class=\"col-6\">\n                  <label for=\"\">Permit Category</label>\n\n\n                        <select @change=\"selectedIncomeTypeMain($event)\" title=\"&#45;&#45; Parking Duration &#45;&#45;\" class=\"form-control show-tick\" data-live-search=\"true\" >\n                          <option value=\"\"  selected>Select Option</option>\n                          <option v-for=\"(item, index) in incomeTypesMain\" :value=\"JSON.stringify(item)\" :key=\"index\">\n                            {{ item.incomeTypeDescription}}\n                          </option>\n                        </select>\n\n\n                </div>\n\n                <div class=\"col-6\">\n                  <label for=\"\">Permit Type</label>\n\n                  <select @change=\"selectedFeeAndChargeMain($event)\" title=\"&#45;&#45; Select Car Type &#45;&#45;\" class=\"form-control show-tick\" data-live-search=\"true\">\n                    <option v-for=\"(item, index) in feesAndChargesMain\" :value=\"JSON.stringify(item)\" :key=\"index\">\n                      {{ item.feeDescription }} KES {{item.unitFeeAmount}}\n                    </option>\n                  </select>\n\n                </div>\n\n                <div class=\"col-12\">\n                  <div class=\"col-12\">\n                    <div class=\"py-2 mt-3\">\n                      <h5 for=\"\">Other Possible Fire and Safety fees</h5>\n                      <p>select any other fee's/levies that are applicable to the business in relation to fire. remember to\n                        indicate quantities where applicable</p>\n                    </div>\n                    <div class=\"py-1 mt-3\">\n                      <select @change=\"selectedIncomeType($event)\"  title=\"-- Income Type --\" class=\"form-control show-tick\" data-live-search=\"true\" v-model=\"incomeType\">\n                        <option v-for=\"(item, index) in incomeTypes\" :value=\"JSON.stringify(item)\" :key=\"index\">\n                          {{ item.incomeTypeDescription }}\n                        </option>\n                      </select>\n                    </div>\n                  </div>\n\n\n                  <div class=\"col-12\">\n                    <div class=\"\">\n                      <table class=\"table table-editable-1 align-middle table-edits\">\n                        <thead class=\"table-light\">\n                        <tr class=\"text-uppercase table-dark\">\n                          <th>#</th>\n                          <th class=\"\">Quantity</th>\n                          <th class=\"\">feeDescription</th>\n                          <th></th>\n                        </tr>\n                        </thead>\n                        <tbody>\n                        <tr  v-for=\"(item,index) in rowItemsFees\" :key=\"index\" >\n                          <td style=\"width: 80px \" class=\"categoryIndex \">{{index+1}}</td>\n\n                          <td class=\"\">\n                            <input v-model=\"item.quantity\" type=\"text\" class=\"form-control \" placeholder=\"Quantity(n)\" spellcheck=\"false\" data-ms-editor=\"true\">\n                          </td>\n\n                          <td>\n                            <select v-model=\"item.description\" class=\"form-control bg-white\" title=\"Select Traffic offence\" data-live-search=\"true\" >\n                              <option v-for=\"(item2, index) in feesAndCharges\" :value=\"item2.feeId+':'+ item2.feeDescription+':'+ item2.unitFeeAmount+':'+item2.incomeTypeId\" :key=\"index\">\n                                {{ item2.feeDescription }} KES {{totalAmount(item2.unitFeeAmount,item.quantity)}}\n                              </option>\n                            </select>\n\n                          </td>\n\n                          <td @click=\"removeRowItem(index)\" class=\"text-right cell-change d-flex align-items-center justify-content-end\">\n                            <a class=\"btn btn-light btn-rounded waves-effect btn-circle btn-transparent cancel-new-category-2 \" title=\"Cancel \"><i class=\"bx bx-x \"></i></a>\n                          </td>\n                        </tr>\n\n                        </tbody>\n                        <tfoot>\n                        <tr>\n                          <td @click=\"addRowItem()\" colspan=\"7\" class=\"bg-light add-field-1 cursor-pointer\">\n                            <span class=\"d-flex align-items-center \"><i class=\"dripicons-plus mr-5 d-flex justify-content-center align-items-center font-21 \"></i><span class=\"pl-5 \">Additional Measures</span></span>\n                          </td>\n                        </tr>\n                        </tfoot>\n                      </table>\n                    </div>\n\n                  </div>\n                </div>\n\n\n                <div class=\"col-12\">\n                  <button @click=\"addToBill\" target=\"_blank\" type=\"button\"\n                          class=\"btn btn-success waves-effect waves-light w-100 generate-invoice-btn d-flex justify-content-center align-items-center\">\n                    Next <i\n                      class=\"dripicons-arrow-thin-right font-size-16 align-middle me-2 d-flex align-items-center mx-2\"></i>\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            <!-- Form for invoice search -->\n            <div v-if=\"selectedOption ==='paidInvoice'\"  class=\"col-12 inv-results\">\n              <div class=\"row\">\n                <div class=\"col-12\">\n                  <div class=\"mb-3 mt-5\">\n                    <label for=\"formrow-firstname-input\" class=\"form-label\">Search for Invoice</label>\n                    <input type=\"text\" class=\"form-control\" id=\"formrow-firstname-input\"\n                           placeholder=\"Enter Invoivece Number\" spellcheck=\"false\" data-ms-editor=\"true\">\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <button class=\"btn btn-primary w-100 text-center text-uppercase inv-serach-btn mb-3\">\n                    Search\n                  </button>\n                </div>\n              </div>\n            </div>\n\n            <!-- Results for business search with invoice -->\n            <div class=\"col-12 inv-details-cont\">\n\n              <!-- invoice loader -->\n              <div v-if=\"loading\" class=\"row inv-loader\">\n                <div class=\"\">\n                  <div class=\"loader-modal p-5\">\n                    <div class=\"d-flex align-items-center justify-content-center p-5 text-center flex-column\">\n                      <div class=\"spinner-border text-dark m-1\" role=\"status\">\n                        <span class=\"sr-only fw-bold\">Searching</span>\n                      </div>\n                      <p class=\"pt-4 fw-strong text-uppercase fw-bold\">Please wait patiently while our system looks <br>\n                        for Invoice.</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n\n              <!-- the invoice and business details -->\n\n              <!-- show this for an already paid invoice -->\n              <div class=\"row invoice-details d-none\">\n                <div class=\"col-12\">\n                  <div>\n                    <table class=\"table table-sm text-uppercase table-striped\">\n                      <thead class=\"\">\n                      <tr class=\"table-dark\">\n                        <th colspan=\"2\">Invoice Details <span class=\"text-warning\">Invoice Number ID 1234</span></th>\n                      </tr>\n                      <tr class=\"table-light\">\n                        <th class=\"text-uppercase\">Invoice Item</th>\n                        <th class=\"text-uppercase text-right\">Amount</th>\n                      </tr>\n                      </thead>\n                      <tbody>\n                      <tr>\n                        <th>\n                          SBP Registration fee\n                        </th>\n                        <td class=\"text-right\">\n                          KES 3000\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Fire inspection Fees\n                        </th>\n                        <td class=\"text-right\">\n                          KES 3000\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Small enterprice\n                        </th>\n                        <td class=\"text-right\">\n                          KES 3000\n                        </td>\n                      </tr>\n\n\n                      </tbody>\n                      <tfoot>\n                      <tr class=\"table-success\">\n                        <th>Sub Total</th>\n                        <th class=\"text-right\">KES 5,500</th>\n                      </tr>\n                      </tfoot>\n                    </table>\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <div class=\"alert alert-success\" role=\"alert\">\n                    <h6 class=\"fw-bold text-uppercase\">The invoice has been paid For</h6>\n                  </div>\n                </div>\n\n                <div class=\"col-12 mt-4\">\n                  <div>\n                    <table class=\"table table-sm text-uppercase table-striped\">\n                      <thead class=\"table-dark\">\n                      <tr>\n                        <th colspan=\"2\">Search Results for Business with <span\n                            class=\"text-warning\">Business ID 1234</span></th>\n                      </tr>\n                      </thead>\n                      <tbody>\n                      <tr>\n                        <th>\n                          Name of Establishment\n                        </th>\n                        <td>\n                          The big Palace Bar and Grill\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Sub County\n                        </th>\n                        <td>\n                          Rachuonyo South Subcounty\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Ward\n                        </th>\n                        <td>\n                          Name of the Ward\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Physical Address\n                        </th>\n                        <td>\n                          Next to the Big Super Market\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Building/Name of Premiscess\n                        </th>\n                        <td>\n                          The big Tower\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Postal Address\n                        </th>\n                        <td>\n                          123-100009 Eldoret\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Applicant's Name\n                        </th>\n                        <td>\n                          John Doe\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Phone Number\n                        </th>\n                        <td>\n                          0701234567\n                        </td>\n                      </tr>\n\n                      <tr>\n                        <th>\n                          Email Address\n                        </th>\n                        <td>\n                          email@mail.com\n                        </td>\n                      </tr>\n                      </tbody>\n                    </table>\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <button class=\"btn btn-primary w-100 btn-inv-details \">Next</button>\n                </div>\n              </div>\n\n\n              <!-- application assesment form for invoice searched businesses-->\n              <div v-if=\"assessmentInvoice\" class=\"row assessment-invoice\">\n\n                <div class=\"col-12\">\n                  <h6>Business Name: {{businessDetails.buildingName}}</h6>\n                </div>\n                <div class=\"col-12\">\n                  <div class=\"alert alert-primary\" role=\"alert\">\n                    <h6 class=\"mb-0 pb-0\">Fire Safety Risk Assessment</h6>\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <h5 for=\"\">Safety Measures in Place</h5>\n                  <p>Select from below any Safety measure already deployed by the Business. You can include additional\n                    measures </p>\n\n                </div>\n                <div class=\"col-12 mb-4\">\n                  <div class=\"\">\n                    <table class=\"table table-editable-1 align-middle table-edits\">\n                      <thead class=\"table-light\">\n                      <tr class=\"text-uppercase table-dark\">\n                        <th>#</th>\n                        <th class=\"\" colspan=\"2\">Safety Measure</th>\n                      </tr>\n                      </thead>\n                      <tbody>\n\n                      <tr v-for=\"(item, index) in fireSafety\" :key=\"index\">\n                        <td style=\"width: 20px\">{{ index + 1 }}.</td>\n                        <td class=\"pl-0 px-0\" colspan=\"2\">\n                          <div class=\"d-flex\">\n                            <div class=\"form-check form-check-primary mb-0 d-flex align-items-center\">\n                              <input\n                                  class=\"form-check-input w-auto h-auto me-3\"\n                                  type=\"checkbox\"\n                                  :id=\"'measure' + index\"\n                                  v-model=\"item.selected\"\n                              >\n                              <label class=\"form-check-label\" :for=\"'measure' + index\">\n                                {{ item.category }}\n                              </label>\n                            </div>\n                          </div>\n                        </td>\n                      </tr>\n\n\n                      </tbody>\n                      <tfoot>\n                      <tr>\n                        <td colspan=\"7\" class=\"bg-light add-field-1 cursor-pointer d-none\">\n                          <span class=\"d-flex align-items-center \"><i\n                              class=\"dripicons-plus mr-5 d-flex justify-content-center align-items-center font-21 \"></i><span\n                              class=\"pl-5 \">Additional Measures</span></span>\n                        </td>\n                      </tr>\n                      </tfoot>\n                    </table>\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <h5 for=\"\">Fire Safetey Recommendations</h5>\n                  <p>Enter any recommendations that the applicant should fullfill below.</p>\n\n                </div>\n\n\n                <div class=\"col-12\">\n                  <div class=\"\">\n                    <table class=\"table table-editable-3 align-middle table-edits\">\n                      <thead class=\"table-light\">\n                      <tr class=\"text-uppercase table-dark\">\n                        <th>#</th>\n                        <th colspan=\"2\">Recommendations</th>\n                      </tr>\n                      </thead>\n                      <tbody>\n                      <tr v-for=\"(recommendation, index) in recommendations\" :key=\"index\" data-id=\"1\">\n                        <td style=\"width: 20px\">{{ index + 1 }}.</td>\n                        <td colspan=\"\">\n                          <input\n                              type=\"text\"\n                              class=\"form-control\"\n                              placeholder=\"Enter Recommendation\"\n                              spellcheck=\"false\"\n                              v-model=\"recommendation.text\"\n                          >\n                        </td>\n                        <td>\n                          <button\n                              @click=\"removeRecommendation(index)\"\n                              class=\"btn btn-danger\"\n                              type=\"button\"\n                          >\n                            Remove\n                          </button>\n                        </td>\n                      </tr>\n                      </tbody>\n                      <tfoot>\n                      <tr>\n                        <td colspan=\"3\" class=\"bg-light add-field-3 cursor-pointer\">\n            <span class=\"d-flex align-items-center\" @click=\"addRecommendation\">\n              <i class=\"dripicons-plus mr-5 d-flex justify-content-center align-items-center font-21\"></i>\n              <span class=\"pl-5\">Additional Measures</span>\n            </span>\n                        </td>\n                      </tr>\n                      </tfoot>\n                    </table>\n\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <button @click=\"fireInvoiceCreator = true , assessmentInvoice = false\" target=\"_blank\" type=\"button\"\n                          class=\"btn btn-success waves-effect waves-light w-100 d-flex justify-content-center align-items-center btn-assesment-nv\">\n                    Next <i\n                      class=\"dripicons-arrow-thin-right font-size-16 align-middle me-2 d-flex align-items-center mx-2\"></i>\n                  </button>\n                </div>\n              </div>\n\n              <!-- Sending OTP to the customer during invoicing -->\n              <div class=\"row otp-invoice d-none\">\n                <div class=\"col-12\">\n\n                  <div class=\"col-12\">\n                    <h5>Certificate Type and Verification</h5>\n                  </div>\n\n                  <div class=\"row\">\n                    <div class=\"col-12 mb-3\">\n                      <label for=\"\">Certificate Category</label>\n                      <select class=\"form-select liq-search-method\">\n                        <option value=\"\">Select Certificate Type</option>\n                        <option value=\"\">Certififcta Category 1</option>\n                        <option value=\"\">Certififcta Category 2</option>\n                        <option value=\"\">Certififcta Category 3</option>\n                        <option value=\"\">Certififcta Category 4</option>\n                      </select>\n                    </div>\n                  </div>\n\n\n                  <div class=\"row\">\n                    <div class=\"col-12\">\n                      <label for=\"\" class=\"mb-0\">OTP</label>\n                      <p>An OTP has been sent to the phone number ending in <strong class=\"text-black\">***123</strong>.\n                        Please share the OTP to complete the process.</p>\n                      <input type=\"text\" class=\"form-control\" placeholder=\"Enter OTP\">\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"col-12\">\n                  <button class=\"btn btn-primary w-100 text-uppercase mt-4 send-otp-inv\">Submit</button>\n                </div>\n              </div>\n\n              <!-- succesfull creation of the certificates -->\n              <div class=\"row invoice-success-certificate d-none\">\n                <div class=\"d-flex align-items-center justify-content-center\">\n                  <div class=\"col-8\">\n                    <div class=\"text-center d-flex justify-content-center align-items-center flex-column\">\n                      <div class=\"w-100 my-4 d-flex align-items-center justify-content-center\">\n                        <div class=\"avatar-md\">\n                          <div class=\"avatar-title bg-light rounded-circle text-success font-size-28\">\n                            <i class=\"bx bx-check-double\"></i>\n                          </div>\n                        </div>\n                      </div>\n                      <h4>Succesfully Created</h4>\n                      <p>The Permit has been succesfully created. Click the button bellow to print the respective\n                        certificate. Otherwise you can ignore.</p>\n                      <a href=\"PrintDocs/Fire Permit/homabya trade permit.html\" target=\"new\"\n                         class=\"btn btn-success mt-4 text-uppercase mb-4\">Print Certificate</a>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- matters payment and billing starts here -->\n\n        <div v-if=\"generatedInvoice\" class=\"modal-body receipt-billing-modal-body\">\n          <div v-if=\"loading\" class=\"billing-receipting-loader\">\n            <div class=\"loader-modal p-5\">\n              <div class=\"d-flex align-items-center justify-content-center p-5 text-center flex-column\">\n                <div class=\"spinner-border text-dark m-1\" role=\"status\">\n                  <span class=\"sr-only\">Loading...</span>\n                </div>\n                <p class=\"pt-4 fw-strong text-uppercase\">Generating Invoice Please Wait</p>\n              </div>\n            </div>\n          </div>\n\n\n          <div v-if=\"message !=null\" class=\"alert alert-danger\" role=\"alert\">\n            {{message}}\n          </div>\n\n          <!-- generated invoice results -->\n          <div v-if=\"invoiceDetails\" class=\"row generated-invoice\">\n            <div class=\"col-12\">\n              <div class=\"row\">\n                <div class=\"col-6\">\n                  <address>\n                    <strong class=\"text-capitalize\">Invoice Prepared for:</strong>\n                    <br>Establishment Name: <span class=\"fw-semibold text-black\">{{businessDetails.businessName}}</span><br>\n                    Phone: <span class=\"fw-semibold text-black\">{{businessDetails.ownerPhone}}</span>\n                    <br>\n                    <br> Prepared on {{billDetails.dateCreated}} By {{businessDetails.createdBy}}\n                  </address>\n                </div>\n              </div>\n              <div class=\"table-responsive\">\n                <table class=\"table table-nowrap vertical-align-middle table-bordered \">\n                  <thead class=\"table-dark\">\n                  <tr class=\"vertical-align-middle\">\n                    <th style=\"width: 70px;\">1.</th>\n                    <th class=\"text-uppercase\" colspan=\"3\">\n                      Invoice No:. <span class=\"fw-bold text-warning\">{{billDetails.billNo}}</span>\n                    </th>\n\n                  </tr>\n                  </thead>\n                  <thead class=\"bg-light\">\n                  <tr>\n                    <th style=\"width: 70px;\">No.</th>\n                    <th colspan=\"2\">Item Description (X QTY)</th>\n                    <th class=\"text-end\">Amount</th>\n\n                  </tr>\n                  </thead>\n                  <tfoot class=\"bg-light text-uppercase table-bordered\">\n                  <tr>\n                    <td></td>\n\n                    <td class=\"text-right fw-bold text-uppercase\" colspan=\"2\">\n                      Invoice Sub Total\n                    </td>\n                    <td class=\"text-right fw-bold text-uppercase\" colspan=\"2\">\n                      KES {{billDetails.detailAmount}}\n                    </td>\n\n                  </tr>\n                  <tr>\n                    <td></td>\n\n                    <td class=\"text-right fw-bold text-uppercase\" colspan=\"2\">\n                      Amount Paid\n                    </td>\n                    <td class=\"text-right fw-bold text-uppercase\" colspan=\"2\">\n                      KES {{billDetails.receiptAmount}}\n                    </td>\n\n                  </tr>\n\n                  <tr class=\"table-success\">\n                    <td></td>\n\n                    <td class=\"text-right fw-bold text-uppercase\" colspan=\"2\">\n                      Total Payable\n                    </td>\n                    <td class=\"border-0 text-end text-right\">\n                      <h5 class=\"m-0 text-uppercase fw-bold\">KES {{billDetails.billBalance}}</h5>\n                    </td>\n\n                  </tr>\n                  </tfoot>\n                  <tbody class=\"text-uppercase\">\n                  <tr :key=\"index\" :value=\"item\" v-for=\"(item, index) in billInfo\">\n                    <td>{{index+1}}</td>\n                    <td colspan=\"2\">\n                      <p class=\"mb-0 p-0 m-0\"> {{item.feeDescription}} (X{{item.quantity}})</p>\n                    </td>\n                    <td class=\"text-end text-right\">KES {{item.billTotal}}</td>\n\n                  </tr>\n\n\n                  </tbody>\n                </table>\n              </div>\n\n              <div class=\"d-flex text-right justify-content-end align-self-end\">\n                <button data-bs-dismiss=\"modal\" type=\"button\" data-toggle=\"modal\" data-target=\"#payment-modal\"\n                        class=\"btn btn-primary waves-effect btn-label waves-light fw-bold text-uppercase me-3\">\n                  <i class=\"mdi mdi-send label-icon\"></i> Receipt Invoice\n                </button>\n\n                <a @click=\"printBill\" href=\"javascript: void(0);\" target=\"new\"\n                   class=\"btn btn-success waves-effect waves-light fw-semibold text-uppercase\" type=\"button\"><i\n                    class=\"mdi mdi-printer font-size-16 align-middle me-2\"></i> Print Invoice</a>\n              </div>\n            </div>\n          </div>\n          <!-- end of generated receipt results -->\n        </div>\n\n\n      </div>\n      <!-- /.modal-content -->\n    </div>\n    <!-- /.modal-dialog -->\n  </div>\n  <!-- end of fire invoice -->\n\n  <!-- payment modal -->\n  <div class=\"modal fade\" id=\"payment-modal\" data-backdrop=\"static\" data-keyboard=\"false\" tabindex=\"-1\" role=\"dialog\" aria-bs-labelledby=\"exampleModalCenterTitle\" aria-bs-hidden=\"true\" data-bs-keyboard=\"false\" data-bs-backdrop=\"static\">\n    <div class=\"modal-dialog modal-dialog-centered\" role=\"document\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header d-none\">\n          <span class=\"badge badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n          <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle close-modal\" data-dismiss=\"modal\"  aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n          </button>\n\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"d-flex justify-content-between align-items-center\">\n            <span class=\"badge  badge-soft-success text-uppercase badge font-12px bg-primary-blink text-white\">Receive Payment</span>\n\n\n            <button type=\"button\" class=\"btn btn-light position-relative p-0 avatar-xs rounded-circle pull-right close-modal\" data-dismiss=\"modal\" aria-label=\"Close\">\n                        <span class=\"avatar-title bg-transparent text-reset font-18px\">\n                            <i class=\"bx bx-x\"></i>\n                        </span>\n            </button>\n          </div>\n\n          <div class=\"payment-panel-parent\">\n\n            <div v-if=\"paymentPanel\" class=\"text-center payment-active-panel d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n              <div class=\"success-image mb-4 pb-4 pt-4\">\n                <img src=\"assets/images/bills.svg\" height=\"200\" alt=\"\">\n              </div>\n              <h4 class=\"text-black fw-bold\">{{message}}</h4>\n              <p class=\"text-muted mb-4\">The bill has been created Successfully, you can print the bill or opt to receive payment for this bill.</p>\n              <div class=\"d-flex w-100 pb-2\">\n                <button @click=\"showPaymentMethod()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                  <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                  Receive Payment\n                </button>\n                <a @click=\"printBill()\" target=\"_blank\" data-dismiss=\"\" type=\"button\" class=\"btn btn-outline-secondary waves-effect dismin-modal\">Print Bill</a>\n              </div>\n            </div>\n\n            <div v-if=\"paymentMethod\" class=\"send-method payment-panel \">\n              <label for=\"\" class=\"mb-0 pb-0\">Payment Method</label>\n              <p><small class=\"text-muted\">How would you like to send this money?</small></p>\n\n              <div>\n                <div class=\"accordion\" id=\"accordionExample\">\n                  <div class=\"accordion-item\">\n                    <h2 class=\"accordion-header\" id=\"headingOne\">\n                      <button class=\"accordion-button fw-medium\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseOne\" aria-expanded=\"true\" aria-controls=\"collapseOne\">\n                        <div class=\"flex-shrink-0 me-3\">\n                          <img class=\"rounded-circle\" src=\"assets/images/users/mpesa.jpg\" alt=\"Mobile Money\" height=\"65\">\n                        </div>\n                        <div class=\"d-flex flex-column\">\n                          <p class=\"m-0 p-0 text-uppercase fw-semibold\">MPESA</p>\n                          <p class=\"mb-0 p-0\"> <small>A payment request will be sent directly to the customer</small></p>\n                        </div>\n                      </button>\n                    </h2>\n                    <div id=\"collapseOne\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\n                      <div class=\"accordion-body\">\n                        <div>\n                          <p>\n                            A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to the MPESA number you enter below.\n                          </p>\n                        </div>\n                        <div class=\"form-group\">\n                          <label for=\"\">MPESA Number</label>\n                          <div class=\"form-floating mb-3\">\n                            <input v-model=\"phoneNumber\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" placeholder=\"Enter Name\">\n\n                            <label for=\"floatingnameInput\">Phone No.</label>\n                          </div>\n\n                          <button @click=\"showTransactionSummary('MPESA')\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                            <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                            Send Payment Request\n                          </button>\n\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"accordion-item\">\n                    <h2 class=\"accordion-header\" id=\"headingThree\">\n                      <button class=\"accordion-button fw-medium collapsed\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseTwo\" aria-expanded=\"false\" aria-controls=\"collapseTwo\">\n                        <div class=\"flex-shrink-0 me-3\">\n                          <img class=\"rounded-circle\" src=\"assets/images/users/money.jpg\" alt=\"Mobile Money\" height=\"65\">\n                        </div>\n                        <div class=\"d-flex flex-column\">\n                          <p class=\"m-0 p-0 text-uppercase fw-semibold\">bank Receipting</p>\n                          <p class=\"mb-0 p-0\"> <small>Enter the receipt number here to confirm payment for this transaction.</small></p>\n\n\n                        </div>\n                      </button>\n                    </h2>\n                    <div id=\"collapseTwo\" class=\"accordion-collapse collapse\" aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample\">\n                      <div class=\"accordion-body\">\n                        <div class=\"form-group\">\n                          <label for=\"\">Enter The Bank's Receipt Number</label>\n                          <div class=\"form-floating mb-3\">\n                            <input v-model=\"paymentData.bankReceiptNo\" type=\"text\" class=\"form-control font-21 text-success form-control-lg\" id=\"phone-input\" placeholder=\"Enter Name\">\n                            <label for=\"floatingnameInput\">Bank Ref No.</label>\n                          </div>\n\n                          <button @click=\"showTransactionSummary('BANK')\" class=\"btn w-100 btn-warning mt-3 btn-bank\">\n                            Continue\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n\n                </div>\n              </div>\n            </div>\n\n            <div v-if=\"transactionSummary\" class=\"transaction-summary payment-panel\">\n              <label for=\"\">Transaction Breakdown</label>\n              <div class=\"border p-4 rounded \">\n                <div class=\"row\">\n                  <div class=\"col-lg-6\">\n                    <div class=\"text-muted \">\n                      BillO NO.\n                    </div>\n                  </div>\n\n                  <div class=\"col-lg-6 align-self-end\">\n                    <div class=\" text-right text-black\">\n                      {{billDetails.billNo}}\n                    </div>\n                  </div>\n\n                  <div class=\"col-lg-6\">\n                    <div class=\"text-muted mt-2\">\n                      Bill For\n                    </div>\n                  </div>\n\n                  <div class=\"col-lg-6 align-self-end\">\n                    <div class=\" text-right text-black\">\n                      {{billDetails.incomeTypeDescription}}\n                    </div>\n                  </div>\n\n                  <div class=\"col-lg-6\">\n                    <div class=\"text-muted mt-2\">\n                      Payment Method\n                    </div>\n                  </div>\n\n                  <div class=\"col-lg-6 align-self-end\">\n                    <div class=\" text-right text-black\">\n                      {{paymentData.paymentMode}}\n                    </div>\n                  </div>\n\n                  <div class=\"col-lg-6\">\n                    <div class=\"text-muted mt-2\">\n                      Transaction Amount\n                    </div>\n                  </div>\n\n                  <div class=\"col-lg-6 align-self-end\">\n                    <div class=\" text-right text-black\">\n                      KES {{billDetails.billBalance}}\n                    </div>\n                  </div>\n\n\n                  <div class=\"col-12 text-black\"><hr class=\"mb-0 pb-0\"></div>\n\n                  <div class=\"col-lg-6 text-uppercase\">\n                    <div class=\"text-muted mt-2 font-21\">\n                      Total\n                    </div>\n                  </div>\n\n                  <div class=\"col-lg-6 align-self-end text-uppercase\">\n                    <div class=\" text-right text-black font-21 fw-bold\">\n                      KES {{billDetails.billBalance}}\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"mpesa-confirmation \">\n                  <div v-if=\"paymentData.paymentMode==='MPESA'\">\n                    <p class=\"text-muted mt-2\">A payment request of <strong class=\"text-black\">KES {{billDetails.billBalance}}</strong> will be sent to <strong class=\"text-black\"> phone number ({{ phoneNumber }})</strong> soon after you click the <strong class=\"text-black text-capitalize\">Send Request</strong> button bellow.\n                      <br>\n                      <br>\n                      Remember to <strong class=\"text-black\">Check your phone</strong> to confirm payment by entering your Mpesa pin.</p>\n                  </div>\n\n                  <div>{{message}}  </div>\n                  <br>\n                  <button @click=\"makePayment()\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect btn-send waves-light text-center w-100\">\n                    <div class=\"d-flex justify-content-center align-items-center\">\n                      <div class=\"stk-timer-container d-none justify-content-center align-items-center\">\n                        <span class=\"mdi mdi-timer-outline font-16px\"></span>\n                        <span class=\"stk-timer px-2\"></span>\n                      </div>\n                      <div class=\"justify-content-center align-items-center d-flex\">\n                        <span class=\"px-2\">Send Request</span>\n                        <div class=\"flip-x\"><i class=\"mdi mdi-reply ms-3 font-16px\"></i></div>\n                      </div>\n                    </div>\n                  </button>\n                </div>\n\n\n              </div>\n            </div>\n\n            <div v-if=\"transactionCompleted\" class=\"text-center d-flex flex-column justify-content-around align-items-center sent-success payment-panel\">\n              <div class=\"success-image mb-4\">\n                <img src=\"assets/images/payment-confirmation-images/sent.svg\" height=\"200\" alt=\"\">\n              </div>\n              <h4 class=\"text-blink-primary fw-bold\">Transaction Complete</h4>\n              <p class=\"text-muted mb-4\"><strong class=\"text-black\">KES {{receiptDetails.receiptAmount}}</strong> has been received for <strong class=\"text-black\">Bill No. {{receiptDetails.billNo}}</strong></p>\n              <button @click=\"printReceipt()\" type=\"button\" class=\"btn btn-primary btn-block  me-3 flex-grow-1\">\n                <i class=\"mdi-cash-check mdi font-size-16 align-middle me-2 \"></i>\n                Print Receipt\n              </button>\n            </div>\n\n\n\n          </div>\n        </div>\n        <div class=\"modal-footer d-flex d-none bill-modal-footer\">\n          <button href=\"javascript: void(0);\" disabled class=\"btn btn-outline-light waves-effect waves-light payment-prev\"> <i class=\"mdi mdi-arrow-left ms-1\"></i>Previouse</button>\n          <button href=\"javascript: void(0);\" class=\"btn btn-primary waves-effect waves-light payment-next\">Next <i class=\"mdi mdi-arrow-right ms-1\"></i></button>\n          <button href=\"javascript: void(0);\" class=\"btn btn-primary btn-flex flex-grow-1 waves-effect waves-light text-center d-none\">\n            <div class=\"d-flex justify-content-center align-items-center\"> <span>Send Money</span> <div class=\"flip-x\"><i class=\"mdi mdi-reply flip-x ms-3 font-16px\"></i></div></div>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n  <!-- end of payment modal -->\n\n</template>\n\n<script>\n/* eslint-disable */\nimport {biller, execute, fire, getRight, parking, rent, trade} from \"@/api\";\nimport vueHelmet from \"vue-helmet/src/VueHelmet\";\n\nexport default {\n  name: \"ToolBarFire\",\n  data() {\n    return {\n      generatedInvoice: false,\n      invoiceDetails: false,\n\n      loading: false,\n      message: null,\n      dashboard: true,\n      validation: true,\n      inspection: true,\n      approval: true,\n      declined: true,\n      approved: true,\n      paidSbp: true,\n      unpaidSbp: true,\n      unpaidBills: true,\n      sbpPaidBills: true,\n      sbpMap: true,\n      selectedSub: null,\n      selectedOption: null,\n      businessID: \"\",\n      businessSelector: true,\n      businessDetailsResult: false,\n      assessmentInvoice: false,\n      fireInvoiceCreator: false,\n      businessDetails: {\n        id: \"\",\n        businessID: \"\",\n        businessName: \"\",\n        subCountyID: \"\",\n        subCountyName: \"\",\n        wardID: \"\",\n        wardName: \"\",\n        plotNumber: \"\",\n        physicalAddress: \"\",\n        buildingName: \"\",\n        buildingOccupancy: \"\",\n        floorNo: \"\",\n        roomNo: \"\",\n        premiseSize: \"\",\n        numberOfEmployees: \"\",\n        tonnage: \"\",\n        businessDes: \"\",\n        businessCategory: \"\",\n        businessSubCategory: \"\",\n        incomeTypeID: \"\",\n        feeID: \"\",\n        businessEmail: \"\",\n        postalAddress: \"\",\n        postalCode: \"\",\n        businessPhone: \"\",\n        contactPersonNames: \"\",\n        contactPersonIDNo: \"\",\n        businessRole: \"\",\n        contactPersonPhone: \"\",\n        contactPersonEmail: \"\",\n        fullNames: \"\",\n        ownerID: \"\",\n        ownerPhone: \"\",\n        ownerEmail: \"\",\n        kraPin: \"\",\n        createdBy: \"\",\n        createdByIDNo: \"\",\n        dateCreated: \"\",\n        lat: 0.0,\n        lng: 0.0\n      },\n      fireSafety: [],\n      selectedItems: [],\n      recommendations: [],\n      incomeType: {\n        incomeTypeId: null,\n        incomeTypeDescription: null,\n        incomeTypePrefix: null,\n        fundDescription: null,\n        status: null\n      },\n      description: '',\n      amount: 0,\n      unitFeeAmount: 0,\n      feeID: '',\n      quantity: 1,\n      incomeTypesMain: [],\n      incomeTypes: [],\n      feesAndChargesMain:[{\n        feeId: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc:null ,\n        costCenterNo:null,\n        zone: null,\n        typeDescription: null,\n        quantity: 1\n      }],\n      feesAndCharges:[{\n        feeId: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc:null ,\n        costCenterNo:null,\n        zone: null,\n        typeDescription: null,\n        quantity: 1\n      }],\n      rowItemsFees:[{\n        customer:null,\n        feeId: null,\n        description: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc:null ,\n        costCenterNo:null,\n        zone: null,\n        typeDescription: null,\n        quantity: 1\n      }],\n      rowItemsFeesMain:[{\n        customer:null,\n        feeId: null,\n        description: null,\n        feeDescription: null,\n        unitOfMeasure: null,\n        unitFeeAmount: null,\n        accountNo: null,\n        incomeTypeId: null,\n        feeType: null,\n        accountDesc:null ,\n        costCenterNo:null,\n        zone: null,\n        typeDescription: null,\n        quantity: 1\n      }],\n      feesAndChargeItems: [],\n      billItem: [],\n\n      transactionCompleted: false,\n      transactionSummary: false,\n      paymentPanel: true,\n      paymentMethod: false,\n      billDetails:{\n        id:'',\n        billNo:'',\n        incomeTypeID:'',\n        incomeTypeDescription:'',\n        costCenterNo:'',\n        accountNo:'',\n        feeID:'',\n        detailAmount:'',\n        receiptAmount:'',\n        billBalance:'',\n        wardID:'',\n        subCountyID:'',\n        status:'',\n        dateCreated:''\n      },\n      billInfo:[],\n\n      paymentData: {\n        bankReceiptNo: null,\n        accNo: null,\n        payBillNo: null,\n        amount: null,\n        phoneNumber: null,\n        success: false,\n        paymentMode:null,\n        sessionNames:null,\n        sessionIdNo:null,\n        sessionPhoneNumber:null\n      },\n      timer: null,\n      categoriesSaftyString:'',\n      recommendationsString:'',\n\n      billGenerated: {\n        billNo: null,\n        payBillNo: null,\n        amount: null,\n        success: true\n      },\n      confirmCash: false,\n      phoneNumber:'',\n      customerName:'',\n      email:'',\n\n    }\n  },\n  mounted() {\n    this.selectedSub = sessionStorage.getItem(\"selectedSub\");\n    this.getFireMeasures();\n    this.getIncomeTypes();\n    this.rowItemsFees.splice(0)\n    this.getIncomeTypesMain()\n  },\n  watch:{\n\n    rowItemsFees: {\n      handler(newValue) {\n        // Iterate over each item in rowItemsFees\n        newValue.forEach(item => {\n          if (item.description && item.description.trim() !== '') {\n            // Split the description\n            const parts = item.description.split(':');\n\n            // Check if parts have the expected length\n            if (parts.length >= 4) {\n              const feeId = parts[0];\n              const feeDescription = parts[1];\n              const unitFeeAmount = parts[2];\n              const incomeTypeId = parts[3];\n\n              // Update the item with the extracted values\n              item.feeId = feeId;\n              item.feeDescription = feeDescription;\n              item.unitFeeAmount = unitFeeAmount;\n              item.incomeTypeId = incomeTypeId;\n            }\n          }\n        });\n      },\n      deep: true // Watch deeply to detect changes within array items\n    },\n\n  },\n  methods: {\n    getRight(type) {\n      return getRight(type);\n    },\n    goTo(route) {\n      this.$router.push(route);\n      sessionStorage.setItem(\"selectedSub\", route);\n      this.selectedSub = route;\n    },\n    getBusiness() {\n      this.loading = true;\n      this.message = null;\n      this.businessDetailsResult = false;\n      const data = new FormData();\n      data.append(\"function\", \"getBusiness\");\n      data.append(\"businessID\", this.businessID);\n      execute(data, trade)\n          .then((res) => {\n            this.loading = false;\n            if (res.data.success) {\n              this.businessDetailsResult = true;\n              this.businessDetails = res.data.data.business;\n            } else {\n              this.message = res.data.message;\n            }\n          })\n          .catch((e) => {\n            this.message = e.message;\n          });\n    },\n    getFireMeasures() {\n      const data = new FormData();\n      data.append(\"function\", \"getFireMeasures\");\n      execute(data, fire)\n          .then((res) => {\n            if (res.data.success) {\n              this.fireSafety = res.data.data.fireSafety.map(item => ({\n                ...item,\n                selected: false\n              }));\n            } else {\n              this.message = res.data.message;\n            }\n          })\n          .catch((e) => {\n            this.message = e.message;\n          });\n    },\n    updateSelectedItems() {\n      this.selectedItems = this.fireSafety.filter(item => item.selected);\n      //{ \"id\": \"2\", \"category\": \"They have A Rear escape route\", \"selected\": true }, { \"id\": \"3\", \"category\": \"General House Keeping is good\", \"selected\": true }, { \"id\": \"4\", \"category\": \"Adequate Fire Signs\", \"selected\": true }, { \"id\": \"5\", \"category\": \"Electrical Installation Done To Recommended\\n\", \"selected\": true } ]\n      this.categoriesSaftyString = this.selectedItems\n          .map(item => item.category) // Map to an array of category values\n          .join(', '); // Join the array into a comma-separated string\n    },\n    addRecommendation() {\n      this.recommendations.push({ text: '' });\n    },\n    removeRecommendation(index) {\n      this.recommendations.splice(index, 1);\n    },\n    submitRecommendations() {\n\n      this.recommendationsString = this.recommendations\n          .map(r => r.text) // Get the text property from each recommendation\n          .join(', '); // Join all texts into a single comma-separated string\n\n    },\n\n    getIncomeTypesMain() {\n      const data = new FormData();\n      data.append(\"function\", \"getIncomeTypes\");\n      data.append(\"incomeTypePrefix\", \"FIREINSPECTION\");\n      data.append(\"keyword\", \"Certificate\");\n      execute(data, biller)\n          .then((res) => {\n            if (res.data.success) {\n              this.incomeTypesMain = res.data.data.incomeTypes;\n            } else {\n              this.message = res.data.message;\n            }\n          })\n          .catch((e) => {\n            this.message = e.message;\n          });\n    },\n\n    selectedIncomeTypeMain(event){\n      const value = event.target.value\n      const result = JSON.parse(value);\n      this.getFeesAndChargesMain(result.incomeTypeId)\n    },\n\n    selectedFeeAndChargeMain(event) {\n\n      this.updateSelectedItems()\n      this.submitRecommendations()\n\n      //[General House Keeping is good, Electrical Installation Done To Recommended \\n, They have A Rear escape route, Adequate Fire Signs, Provide red sig, Recommendations: adding red door]\n      const selectedItem = JSON.parse(event.target.value);\n      this.rowItemsFeesMain[0] = selectedItem;\n      this.rowItemsFeesMain[0].customer = \"Business ID:\"+this.businessDetails.businessID,\n      this.rowItemsFeesMain[0].description = `[${this.categoriesSaftyString} ,Recommendations : ${this.recommendationsString}]`\n    },\n\n    getFeesAndChargesMain(incomeTypeId) {\n      this.feesAndCharges = []; // Clear the array\n      const data = new FormData();\n      data.append(\"function\", \"getFeesAndCharges\");\n      data.append(\"incomeTypeId\", incomeTypeId);\n      execute(data, biller)\n          .then((res) => {\n            if (res.data.success) {\n              this.feesAndChargesMain = res.data.data.feesAndCharges;\n            } else {\n              this.message = res.data.message;\n            }\n          })\n          .catch((e) => {\n            this.message = e.message;\n          });\n    },\n\n\n    //Others\n    getIncomeTypes() {\n      const data = new FormData();\n      data.append(\"function\", \"getIncomeTypes\");\n      data.append(\"incomeTypePrefix\", \"FIREINSPECTION\");\n      data.append(\"keyword\", \"Other\");\n      execute(data, biller)\n          .then((res) => {\n            if (res.data.success) {\n              this.incomeTypes = res.data.data.incomeTypes;\n            } else {\n              this.message = res.data.message;\n            }\n          })\n          .catch((e) => {\n            this.message = e.message;\n          });\n    },\n    getFeesAndCharges(incomeTypeId) {\n      this.feesAndCharges = []; // Clear the array\n      const data = new FormData();\n      data.append(\"function\", \"getFeesAndCharges\");\n      data.append(\"incomeTypeId\", incomeTypeId);\n      execute(data, biller)\n          .then((res) => {\n            if (res.data.success) {\n              this.feesAndCharges = res.data.data.feesAndCharges;\n            } else {\n              this.message = res.data.message;\n            }\n          })\n          .catch((e) => {\n            this.message = e.message;\n          });\n    },\n    selectedIncomeType(event){\n      const value = event.target.value\n      const result = JSON.parse(value);\n      this.getFeesAndCharges(result.incomeTypeId)\n    },\n    selectedFeeAndCharge(event, index) {\n      const selectedItem = JSON.parse(event.target.value);\n      this.feesAndChargeItems[index].feeAndCharge = selectedItem;\n      this.feesAndChargeItems[index].unitFeeAmount = selectedItem.unitFeeAmount;\n      this.amount = this.quantity * this.feesAndChargeItems[index].unitFeeAmount;\n    },\n\n    //value=\"item2.feeId+':'+ item2.feeDescription+':'+ item2.unitFeeAmount+':'+item2.incomeTypeId\n    addRowItem(quantity,description){\n      this.rowItemsFees.push({\n        quantity:quantity,\n        description:description\n      })\n    },\n    removeRowItem(position){\n      this.rowItemsFees.splice(position,1)\n    },\n    totalAmount(amount, quantity) {\n      // Convert amount and months to numbers before multiplying\n      amount = Number(amount);\n      quantity = Number(quantity);\n      // Return the result of multiplication\n      return amount * quantity;\n    },\n\n    addToBill(){\n\n      for (const { typeDescription,feeId, feeDescription, unitFeeAmount, accountNo, costCenterNo, incomeTypeId,customer,quantity,description} of this.rowItemsFeesMain) {\n\n        this.billItem.push({\n          fiscalYear: this.fiscalYear,\n          typeDescription,\n          feeDescription,\n          quantity,\n          unitFeeAmount: unitFeeAmount,\n          accountNo,\n          costCenterNo,\n          incomeTypeId,\n          revenueStreamItem: \"\",\n          feeId,\n          amount:  unitFeeAmount,\n          customer: customer,\n          zone: \"\",\n          subCountyID:this.businessDetails.subCountyID,\n          subCountyName:this.businessDetails.subCountyName,\n          wardID: this.businessDetails.wardID,\n          wardName: this.businessDetails.wardName,\n          idNo: sessionStorage.getItem(\"sessionIdNo\"),\n          phoneNumber: sessionStorage.getItem(\"sessionPhoneNumber\"),\n          names: sessionStorage.getItem(\"sessionNames\"),\n          customerPhoneNumber: this.businessDetails.ownerPhone,\n          description\n        });\n\n      }\n\n      for (const { typeDescription,feeId, feeDescription, unitFeeAmount, accountNo, costCenterNo, incomeTypeId,customer,quantity} of this.rowItemsFees) {\n\n        this.billItem.push({\n          fiscalYear: this.fiscalYear,\n          typeDescription,\n          feeDescription,\n          quantity,\n          unitFeeAmount: unitFeeAmount,\n          accountNo,\n          costCenterNo,\n          incomeTypeId,\n          revenueStreamItem: \"\",\n          feeId,\n          amount:  unitFeeAmount * quantity,\n          customer: customer,\n          zone: \"\",\n          subCountyID:this.businessDetails.subCountyID,\n          subCountyName:this.businessDetails.subCountyName,\n          wardID: this.businessDetails.wardID,\n          wardName: this.businessDetails.wardName,\n          idNo: sessionStorage.getItem(\"sessionIdNo\"),\n          phoneNumber: sessionStorage.getItem(\"sessionPhoneNumber\"),\n          names: sessionStorage.getItem(\"sessionNames\"),\n          customerPhoneNumber: this.businessDetails.ownerPhone,\n          description: \"\",\n        });\n\n      }\n\n\n      this.generateBill()\n\n    },\n    generateBill(){\n      this.fireInvoiceCreator = false\n      this.generatedInvoice = true;\n      this.loading = true\n      const data = new FormData();\n      data.append(\"function\", \"generateBill3\");\n      data.append(\"billItem\", JSON.stringify(this.billItem));\n      execute(data,biller)\n          .then((res) =>{\n            this.loading = false\n            if (res.data.success) {\n\n              this.invoiceDetails = true\n\n              this.billDetails = res.data.data.bill.billDetails\n              this.billInfo = res.data.data.bill.billInfo\n              this.paymentData.amount = res.data.data.bill.billDetails.billBalance\n              this.paymentData.accNo = res.data.data.bill.billDetails.billNo\n              this.paymentData.payBillNo = res.data.data.billGenerated.payBillNo\n              this.paymentData.sessionPhoneNumber = sessionStorage.getItem(\"sessionPhoneNumber\")\n              this.paymentData.sessionNames = sessionStorage.getItem(\"sessionNames\")\n              this.paymentData.sessionIdNo = sessionStorage.getItem(\"sessionIdNo\")\n\n            }else{\n              this.message =res.data.message\n            }\n          })\n          .catch((e) => {\n            this.message =e.message\n          });\n    },\n    printBill() {\n      localStorage['params'] = JSON.stringify({\n        billNo: this.billDetails.billNo\n      })\n      const routeData = this.$router.resolve({name: 'bill'});\n      window.open(routeData.href, '_blank');\n    },\n    printReceipt() {\n      if (this.receiptDetails.receiptNo == null) {\n        alert(\"Try again later\");\n      } else {\n        //  this.$refs.closeReceived.click();\n        localStorage['params'] = JSON.stringify({\n          receiptNo: this.receiptDetails.receiptNo\n        })\n        const routeData = this.$router.resolve({name: 'receipt'});\n        window.open(routeData.href, '_blank');\n      }\n    },\n    showPaymentMethod(){\n      this.paymentMethod = true;\n      this.paymentPanel = false;\n      this.transactionSummary = false;\n      this.transactionCompleted = false\n    },\n    showTransactionSummary(paymentMode){\n\n      this.paymentData.paymentMode = paymentMode\n\n      if(paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if(paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n\n      }\n\n      this.paymentMethod = false;\n      this.paymentPanel = false;\n      this.transactionSummary = true;\n      this.transactionCompleted = false\n    },\n    makePayment() {\n      if(this.paymentData.paymentMode === \"MPESA\") {\n        if (this.phoneNumber == null) {\n          alert(\"Enter phone number\");\n          return;\n        }\n      }\n      if(this.paymentData.paymentMode === \"BANK\") {\n        if (this.paymentData.bankReceiptNo == null) {\n          alert(\"Enter Bank Receipt No\");\n          return;\n        }\n      }\n      this.message = \"Payment Request sent\";\n      this.paymentData.phoneNumber = this.phoneNumber\n\n      const data = new FormData();\n      data.append(\"function\", \"makePayment\");\n      data.append(\"paymentData\", JSON.stringify(this.paymentData));\n\n      let stream = null;\n      if (this.paymentData.accNo.startsWith(\"SBP\")) {\n        stream = trade;\n      }\n      if (this.paymentData.accNo.startsWith(\"PKN\")) {\n        stream = parking;\n      }\n\n      if (this.paymentData.accNo.startsWith(\"RNT\")) {\n        stream = rent;\n      }\n\n      if (this.paymentData.accNo.startsWith(\"BLL\")) {\n        stream = biller;\n      }\n\n      execute(data, stream)\n          .then((res) => {\n            if (res.data.success) {\n              this.paymentMethod = false;\n              this.paymentPanel = false;\n              //start checking payment\n              this.timer = setInterval(() => {\n\n                this.checkPayment();\n              }, 3000);\n            } else {\n              this.rate = null;\n              alert(res.data.message);\n            }\n          })\n          .catch((e) => {\n            alert(e.message);\n          });\n    },\n    checkPayment() {\n      this.randomNumber = Math.floor(Math.random() * 3) + 1\n      if(this.randomNumber === 1){\n        this.message = \"Waiting for payment.\";\n      }\n      if(this.randomNumber === 2){\n        this.message = \"Waiting for payment..\";\n      }\n      if(this.randomNumber ===3){\n        this.message = \"Waiting for payment...\";\n      }\n      const data = new FormData();\n      data.append(\"function\", \"checkPayment\");\n      data.append(\"accountRef\", this.paymentData.accNo);\n\n      execute(data, biller)\n          .then((res) => {\n            if (res.data.success) {\n              this.message = null;\n              clearInterval(this.timer);\n              this.receipt = true;\n              this.paymentData.success = false;\n              this.transaction = res.data.data.transaction;\n              this.receiptDetails = res.data.data.receipt.receiptDetails\n              //Close the modal\n              this.transactionSummary = false\n              this.transactionCompleted = true\n            }\n          })\n          .catch((e) => {\n            alert(e.message);\n          });\n    }\n\n\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}