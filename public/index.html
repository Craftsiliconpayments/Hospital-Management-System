<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="./county_logo.png" type="image/x-icon">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <link rel="icon" href="<%= BASE_URL %>favicon.png">
    <title><%= htmlWebpackPlugin.options.title %></title>
</head>
<body>
<noscript>
    <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled.
        Please enable it to continue.</strong>
</noscript>
<div id="app"></div>


<!-- Right bar overlay-->
<div class="rightbar-overlay "></div>

<script src="./assets/libs/jquery/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
<script src="./assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="./assets/libs/metismenu/metisMenu.min.js"></script>
<script src="./assets/libs/simplebar/simplebar.min.js"></script>
<script src="./assets/libs/node-waves/waves.min.js"></script>
<script src="./assets/libs/slick/slick.min.js"></script>
<!-- Required datatable js -->
<script src="./assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="./assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
<!-- Buttons examples -->
<script src="./assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
<script src="./assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
<script src="./assets/libs/jszip/jszip.min.js"></script>
<script src="./assets/libs/pdfmake/build/pdfmake.min.js"></script>
<script src="./assets/libs/pdfmake/build/vfs_fonts.js"></script>
<script src="./assets/libs/datatables.net-buttons/js/buttons.html5.min.js"></script>
<script src="./assets/libs/datatables.net-buttons/js/buttons.print.min.js"></script>
<script src="./assets/libs/datatables.net-buttons/js/buttons.colVis.min.js"></script>
<!-- numerals number formater -->
<script src="./assets/libs/numeral/numeral.js"></script>
<!-- highchart cdns -->
<script src="https://code.highcharts.com/highcharts.js"></script>
<!-- highchart drill down -->
<script src="https://code.highcharts.com/modules/drilldown.js"></script>
<!-- Responsive examples -->
<script src="./assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="./assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>
<!-- Bootstrap select -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.14/dist/js/bootstrap-select.min.js"></script>
<!-- Plugins js -->
<script src="./assets/libs/dropzone/min/dropzone.min.js"></script>
<!-- Datatable init js -->
<script src="./assets/js/pages/datatables.init.js"></script>
<!-- owl.carousel js -->
<script src="./assets/libs/owl.carousel/owl.carousel.min.js"></script>
<!-- timeline init js -->
<script src="./assets/js/pages/timeline.init.js"></script>
<!-- Application statuses -->
<script src="./assets/js/pages/applicationStatuses.js"></script>
<!-- revenue perfomance -->
<script src="./assets/js/pages/revenuePwerfomance.js"></script>
<!-- active vs expired certificats -->
<script src="./assets/js/pages/expiredVsActiveCerts.js"></script>

<script src="./assets/js/pages/saas-dashboard.init.js"></script>
<!-- apexcharts -->
<script src="assets/libs/apexcharts/apexcharts.min.js"></script>


<!-- highchart map modules -->

<script src="https://code.highcharts.com/maps/highmaps.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/drilldown.js"></script>
<script src="https://code.highcharts.com/highcharts-more.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/pictorial.js"></script>

<!-- highchart js files -->
<script src="https://code.highcharts.com/modules/heatmap.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script src="https://code.highcharts.com/maps/highmaps.js"></script>


<!-- App js -->
<script src="./assets/js/app.js"></script>
<script src="./assets/js/custom.js"></script>
<!-- axios to be used for geocoding -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.20.0/axios.min.js"
        integrity="sha512-quHCp3WbBNkwLfYUMd+KwBAgpVukJu5MncuQaWXgCrfgcxCJAq/fo+oqrRKOj+UKEmyMCG3tb8RB63W+EmrOBg=="
        crossorigin="anonymous"></script>
<script defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGPbYfcYqdbSBeXdIpH5iWrznfU886Qk8&callback=initMap"></script>
<script defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAGPbYfcYqdbSBeXdIpH5iWrznfU886Qk8&callback=initMap&libraries=places&v=weekly"
        defer></script>


<!-- Script to generate the chart -->
<script>
    // Function to generate a random value between min and max
    function getRandomValue(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    // Function to generate revenue data
    function generateRevenueData() {
        const data = [{
            name: 'Rentals',
            y: getRandomValue(500000, 1000000),
            drilldown: 'rentals'
        }, {
            name: 'Other Revenue Streams',
            y: getRandomValue(500000, 1000000),
            drilldown: 'others'
        }];
        return data;
    }

    // Function to generate drilldown data
    function generateDrilldownData() {
        const rentalsData = [
            ['Oyugis Market', getRandomValue(500000, 1000000)],
            ['Modern Market', getRandomValue(500000, 1000000)],
            ['Mbita Market', getRandomValue(500000, 1000000)]
        ];

        const othersData = [
            ['Site Value Rates', getRandomValue(500000, 1000000)],
            ['Estate Development Fees', getRandomValue(500000, 1000000)],
            ['Survey/Subdivision Fees', getRandomValue(500000, 1000000)],
            ['Housing Development Fees', getRandomValue(500000, 1000000)]
        ];

        return {
            rentals: rentalsData,
            others: othersData
        };
    }

    // Create the initial column chart
    const revenueChart = Highcharts.chart('revenueSources', {
        chart: {
            type: 'column'
        },
        title: {
            text: null
        },
        plotOptions: {
            column: {
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: KES {point.y}'
                }
            }
        },
        tooltip: {
            pointFormat: '<b>{point.name}</b>: KES {point.y}'
        },
        series: [{
            name: 'Sub Counties',
            colorByPoint: true,
            data: generateRevenueData()
        }],
        drilldown: {
            series: [{
                id: 'rentals',
                data: generateDrilldownData().rentals
            }, {
                id: 'others',
                data: generateDrilldownData().others
            }]
        }
    });

    function resetDrillDown() {
        revenueChart.options.drilldown.series.forEach(function (series) {
            series.remove();
        });
    }

    $('.daily-rev-source').on('click', function () {
        // alert("daily is clicked")
        //write a code that changes data when daily navigation is clicked
        revenueChart.options.drilldown.series.forEach(function (series) {
            series.remove();
        });

        const dailyData = generateRevenueData();
        revenueChart.series[0].setData(dailyData);
    })

    $('.weekly-rev-source').on('click', function () {
        //alert("weekly is clicked")
        //write a code that changes data when weekly navigation is clicked

        const weeklyData = generateRevenueData();
        revenueChart.series[0].update({type: 'column'});
        revenueChart.series[0].setData(weeklyData);
    })

    $('.monthly-rev-source').on('click', function () {
        //alert("weekly is clicked")
        //write a code that changes data when weekly navigation is clicked

        const monthlyData = generateRevenueData();
        revenueChart.series[0].update({type: 'column'});
        revenueChart.series[0].setData(monthlyData);
    })

    $('.year-rev-source').on('click', function () {
        //alert("weekly is clicked")
        //write a code that changes data when weekly navigation is clicked

        const yearData = generateRevenueData();
        revenueChart.series[0].update({type: 'column'});
        revenueChart.series[0].setData(yearData);
    })
</script>


<!-- script comparing weekly collections -->


<!-- annual revenue collections by housing revenue streams -->
<script>
    // Data for the chart
    const data = [
        ['Jul 23', 80000, 120000, 90000, 70000, 95000],
        ['Aug 23', 82000, 125000, 92000, 71000, 97000],
        ['Sep 23', 81000, 123000, 91000, 72000, 96000],
        ['Oct 23', 83000, 126000, 93000, 73000, 98000],
        ['Nov 23', 85000, 128000, 95000, 75000, 100000],
        ['Dec 23', 88000, 130000, 98000, 78000, 103000],
        ['Jan 24', 86000, 129000, 97000, 76000, 101000],
        ['Feb 24', 87000, 132000, 99000, 77000, 102000],
        ['Mar 24', 89000, 134000, 101000, 79000, 104000],
        ['Apr 24', 88000, 131000, 98000, 78000, 103000],
        ['May 24', 90000, 135000, 102000, 80000, 105000],
        ['Jun 24', 91000, 137000, 103000, 81000, 106000]
    ];

    // Create the stacked column chart
    Highcharts.chart('StreamRevenueChart', {
        chart: {
            type: 'column'
        },
        title: {
            text: 'Revenue Sources for Housing Department'
        },
        xAxis: {
            categories: data.map(item => item[0])
        },
        yAxis: {
            title: {
                text: 'Revenue (KES)'
            }
        },
        tooltip: {
            shared: true,
            valueSuffix: ' KES'
        },
        plotOptions: {
            column: {
                stacking: 'normal'
            }
        },
        series: [{
            name: 'Stall Rents',
            data: data.map(item => item[1])
        }, {
            name: 'Housing Development Fees',
            data: data.map(item => item[2])
        }, {
            name: 'Site Value Rates Fees',
            data: data.map(item => item[3])
        }, {
            name: 'Estate Development Fees',
            data: data.map(item => item[4])
        }, {
            name: 'Survey/Subdivision Fees',
            data: data.map(item => item[5])
        }]
    });

</script>


<!-- collections by sub counties and individual zones -->
<script>
    // Data retrieved from https://gs.statcounter.com/browser-market-share#monthly-202201-202201-bar

    // Create the chart
    Highcharts.chart('subCounty-collections', {
        chart: {
            type: 'column'
        },
        title: {
            align: 'left',
            text: null
        },

        accessibility: {
            announceNewData: {
                enabled: true
            }
        },
        xAxis: {
            type: 'category'
        },
        yAxis: {
            title: {
                text: 'Collected Revenue'
            }

        },
        legend: {
            enabled: false
        },
        plotOptions: {
            series: {
                borderWidth: 0,
                pointWidth: 40, // Set the desired column width
                borderRadius: 0, // Remove border radius
                dataLabels: {
                    enabled: true,
                    inside: true,
                    format: 'KES {point.y:,.0f}',  // Updated format to include 'KES' and remove decimals
                    rotation: -90,
                    align: 'left',
                    verticalAlign: 'middle',
                    x: 4,
                    y: 10,
                    style: {
                        fontSize: '12px'
                    }
                },
                color: 'black', // Set column color to black
                color: '#023382'
            },

        },

        tooltip: {
            headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
            pointFormat: '<span style="color:{point.color}">{point.name}</span>: <b>KES {point.y:,.0f}</b><br/>'
        },


        series: [
            {
                name: 'Sub County Collections',
                colorByPoint: false,
                data: [
                    {
                        name: 'MERU TOWN',
                        y: generateRandomNumber(),
                        drilldown: 'Chrome'
                    },
                    {
                        name: 'BUURI WEST',
                        y: generateRandomNumber(),
                        drilldown: 'Safari'
                    },
                    {
                        name: 'SOUTH IMENTI',
                        y: generateRandomNumber(),
                        drilldown: 'Firefox'
                    },
                    {
                        name: 'MAUA TOWN',
                        y: generateRandomNumber(),
                        drilldown: 'Edge'
                    },
                    {
                        name: 'CENTRAL IMENTI',
                        y: generateRandomNumber(),
                        drilldown: 'Opera'
                    },
                    {
                        name: 'TIGANIA WEST',
                        y: generateRandomNumber(),
                        drilldown: 'Internet Explorer'
                    },
                    {
                        name: 'NKUBU TOWN',
                        y: generateRandomNumber(),
                        drilldown: null
                    }
                ]
            }
        ],
        drilldown: {
            breadcrumbs: {
                position: {
                    align: 'left'
                }
            },
            series: [
                {
                    name: 'Chrome',
                    id: 'Chrome',
                    data: [
                        [
                            'Zone A',
                            generateRandomNumber()
                        ],
                        [
                            'Zone B',
                            generateRandomNumber()
                        ],
                        [
                            'Zone C',
                            generateRandomNumber()
                        ],
                        [
                            'Zone D',
                            generateRandomNumber()
                        ],
                        [
                            'Zone E',
                            generateRandomNumber()
                        ],
                        [
                            'Zone F',
                            generateRandomNumber()
                        ],
                        [
                            'Zone G',
                            generateRandomNumber()
                        ],
                        [
                            'Zone H',
                            generateRandomNumber()
                        ],
                        [
                            'Zone I',
                            generateRandomNumber()
                        ],
                        [
                            'Zone J',
                            generateRandomNumber()
                        ],
                        [
                            'Zone K',
                            generateRandomNumber()
                        ],
                        [
                            'Zone L',
                            generateRandomNumber()
                        ],
                        [
                            'Zone M',
                            generateRandomNumber()
                        ],
                        [
                            'Zone N',
                            generateRandomNumber()
                        ],
                        [
                            'Zone O',
                            generateRandomNumber()
                        ],
                        [
                            'Zone P',
                            generateRandomNumber()
                        ],
                        [
                            'Zone U',
                            generateRandomNumber()
                        ],
                        [
                            'Zone V',
                            generateRandomNumber()
                        ]
                    ]
                },
                {
                    name: 'Firefox',
                    id: 'Firefox',
                    data: [
                        [
                            'Zone W',
                            generateRandomNumber()
                        ],
                        [
                            'Zone X',
                            generateRandomNumber()
                        ],
                        [
                            'Zone Y',
                            generateRandomNumber()
                        ],
                        [
                            'Zone Z',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AA',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AB',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AC',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AD',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AE',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AF',
                            generateRandomNumber()
                        ]
                    ]
                },
                {
                    name: 'Internet Explorer',
                    id: 'Internet Explorer',
                    data: [
                        [
                            'Zone AG',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AH',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AI',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AJ',
                            generateRandomNumber()
                        ]
                    ]
                },
                {
                    name: 'Safari',
                    id: 'Safari',
                    data: [
                        [
                            'Zone AK',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AL',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AM',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AN',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AO',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AP',
                            generateRandomNumber()
                        ]
                    ]
                },
                {
                    name: 'Edge',
                    id: 'Edge',
                    data: [
                        [
                            'Zone AU',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AV',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AW',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AX',
                            generateRandomNumber()
                        ]
                    ]
                },
                {
                    name: 'Opera',
                    id: 'Opera',
                    data: [
                        [
                            'Zone AY',
                            generateRandomNumber()
                        ],
                        [
                            'Zone AZ',
                            generateRandomNumber()
                        ],
                        [
                            'Zone BA',
                            generateRandomNumber()
                        ]
                    ]
                }
            ]
        }
    });

    function generateRandomNumber() {
        return Math.floor(Math.random() * (500000 - 40000 + 1)) + 40000;
    }

</script>

<!-- end of weekly collections -->


<script defer>
    function toggleVerticalMenu() {

        console.log("toggleVerticalMenu() called");

        var verticalMenu = document.getElementById("vertical-menu");
        var content = document.getElementById("content");

        if (verticalMenu && content) {
            verticalMenu.classList.toggle("hide-vertical-menu");
            content.classList.toggle("content-minimize");
            verticalMenu.classList.toggle("show-mobile-verticle");
        }
    }

</script>


</body>
</html>
